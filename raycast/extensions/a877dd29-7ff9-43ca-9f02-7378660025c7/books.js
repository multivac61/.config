var Ju=Object.create;var sr=Object.defineProperty;var Zu=Object.getOwnPropertyDescriptor;var el=Object.getOwnPropertyNames,Mo=Object.getOwnPropertySymbols,tl=Object.getPrototypeOf,Lo=Object.prototype.hasOwnProperty,rl=Object.prototype.propertyIsEnumerable;var qo=(t,r,n)=>r in t?sr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,jn=(t,r)=>{for(var n in r||(r={}))Lo.call(r,n)&&qo(t,n,r[n]);if(Mo)for(var n of Mo(r))rl.call(r,n)&&qo(t,n,r[n]);return t};var Io=t=>sr(t,"__esModule",{value:!0});var ur=(t,r)=>()=>(t&&(r=t(t=0)),r);var at=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Uo=(t,r)=>{for(var n in r)sr(t,n,{get:r[n],enumerable:!0})},zo=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of el(r))!Lo.call(t,i)&&(n||i!=="default")&&sr(t,i,{get:()=>r[i],enumerable:!(o=Zu(r,i))||o.enumerable});return t},Ce=(t,r)=>zo(Io(sr(t!=null?Ju(tl(t)):{},"default",!r&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),nl=(t=>(r,n)=>t&&t.get(r)||(n=zo(Io({}),r,1),t&&t.set(r,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var jo=at((id,No)=>{"use strict";No.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)});var Qo=at((sd,Vo)=>{"use strict";var Yo="%[a-f0-9]{2}",$o=new RegExp(Yo,"gi"),Ho=new RegExp("("+Yo+")+","gi");function $n(t,r){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;r=r||1;var n=t.slice(0,r),o=t.slice(r);return Array.prototype.concat.call([],$n(n),$n(o))}function al(t){try{return decodeURIComponent(t)}catch{for(var r=t.match($o),n=1;n<r.length;n++)t=$n(r,n).join(""),r=t.match($o);return t}}function ol(t){for(var r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Ho.exec(t);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch{var o=al(n[0]);o!==n[0]&&(r[n[0]]=o)}n=Ho.exec(t)}r["%C2"]="\uFFFD";for(var i=Object.keys(r),u=0;u<i.length;u++){var f=i[u];t=t.replace(new RegExp(f,"g"),r[f])}return t}Vo.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return ol(t)}}});var Xo=at((ud,Go)=>{"use strict";Go.exports=(t,r)=>{if(!(typeof t=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r==="")return[t];let n=t.indexOf(r);return n===-1?[t]:[t.slice(0,n),t.slice(n+r.length)]}});var Jo=at((ld,Ko)=>{"use strict";Ko.exports=function(t,r){for(var n={},o=Object.keys(t),i=Array.isArray(r),u=0;u<o.length;u++){var f=o[u],m=t[f];(i?r.indexOf(f)!==-1:r(f,m,t))&&(n[f]=m)}return n}});var an=at(le=>{"use strict";var il=jo(),sl=Qo(),ei=Xo(),ul=Jo(),ll=t=>t==null,Hn=Symbol("encodeFragmentIdentifier");function fl(t){switch(t.arrayFormat){case"index":return r=>(n,o)=>{let i=n.length;return o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),"[",i,"]"].join("")]:[...n,[$(r,t),"[",$(i,t),"]=",$(o,t)].join("")]};case"bracket":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),"[]"].join("")]:[...n,[$(r,t),"[]=",$(o,t)].join("")];case"colon-list-separator":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),":list="].join("")]:[...n,[$(r,t),":list=",$(o,t)].join("")];case"comma":case"separator":case"bracket-separator":{let r=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(o,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?o:(i=i===null?"":i,o.length===0?[[$(n,t),r,$(i,t)].join("")]:[[o,$(i,t)].join(t.arrayFormatSeparator)])}default:return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,$(r,t)]:[...n,[$(r,t),"=",$(o,t)].join("")]}}function dl(t){let r;switch(t.arrayFormat){case"index":return(n,o,i)=>{if(r=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!r){i[n]=o;return}i[n]===void 0&&(i[n]={}),i[n][r[1]]=o};case"bracket":return(n,o,i)=>{if(r=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"colon-list-separator":return(n,o,i)=>{if(r=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"comma":case"separator":return(n,o,i)=>{let u=typeof o=="string"&&o.includes(t.arrayFormatSeparator),f=typeof o=="string"&&!u&&Ue(o,t).includes(t.arrayFormatSeparator);o=f?Ue(o,t):o;let m=u||f?o.split(t.arrayFormatSeparator).map(p=>Ue(p,t)):o===null?o:Ue(o,t);i[n]=m};case"bracket-separator":return(n,o,i)=>{let u=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!u){i[n]=o&&Ue(o,t);return}let f=o===null?[]:o.split(t.arrayFormatSeparator).map(m=>Ue(m,t));if(i[n]===void 0){i[n]=f;return}i[n]=[].concat(i[n],f)};default:return(n,o,i)=>{if(i[n]===void 0){i[n]=o;return}i[n]=[].concat(i[n],o)}}}function ti(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $(t,r){return r.encode?r.strict?il(t):encodeURIComponent(t):t}function Ue(t,r){return r.decode?sl(t):t}function ri(t){return Array.isArray(t)?t.sort():typeof t=="object"?ri(Object.keys(t)).sort((r,n)=>Number(r)-Number(n)).map(r=>t[r]):t}function ni(t){let r=t.indexOf("#");return r!==-1&&(t=t.slice(0,r)),t}function cl(t){let r="",n=t.indexOf("#");return n!==-1&&(r=t.slice(n)),r}function ai(t){t=ni(t);let r=t.indexOf("?");return r===-1?"":t.slice(r+1)}function Zo(t,r){return r.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):r.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function oi(t,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),ti(r.arrayFormatSeparator);let n=dl(r),o=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return o;for(let i of t.split("&")){if(i==="")continue;let[u,f]=ei(r.decode?i.replace(/\+/g," "):i,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?f:Ue(f,r),n(Ue(u,r),f,o)}for(let i of Object.keys(o)){let u=o[i];if(typeof u=="object"&&u!==null)for(let f of Object.keys(u))u[f]=Zo(u[f],r);else o[i]=Zo(u,r)}return r.sort===!1?o:(r.sort===!0?Object.keys(o).sort():Object.keys(o).sort(r.sort)).reduce((i,u)=>{let f=o[u];return Boolean(f)&&typeof f=="object"&&!Array.isArray(f)?i[u]=ri(f):i[u]=f,i},Object.create(null))}le.extract=ai;le.parse=oi;le.stringify=(t,r)=>{if(!t)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),ti(r.arrayFormatSeparator);let n=f=>r.skipNull&&ll(t[f])||r.skipEmptyString&&t[f]==="",o=fl(r),i={};for(let f of Object.keys(t))n(f)||(i[f]=t[f]);let u=Object.keys(i);return r.sort!==!1&&u.sort(r.sort),u.map(f=>{let m=t[f];return m===void 0?"":m===null?$(f,r):Array.isArray(m)?m.length===0&&r.arrayFormat==="bracket-separator"?$(f,r)+"[]":m.reduce(o(f),[]).join("&"):$(f,r)+"="+$(m,r)}).filter(f=>f.length>0).join("&")};le.parseUrl=(t,r)=>{r=Object.assign({decode:!0},r);let[n,o]=ei(t,"#");return Object.assign({url:n.split("?")[0]||"",query:oi(ai(t),r)},r&&r.parseFragmentIdentifier&&o?{fragmentIdentifier:Ue(o,r)}:{})};le.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[Hn]:!0},r);let n=ni(t.url).split("?")[0]||"",o=le.extract(t.url),i=le.parse(o,{sort:!1}),u=Object.assign(i,t.query),f=le.stringify(u,r);f&&(f=`?${f}`);let m=cl(t.url);return t.fragmentIdentifier&&(m=`#${r[Hn]?$(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${n}${f}${m}`};le.pick=(t,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[Hn]:!1},n);let{url:o,query:i,fragmentIdentifier:u}=le.parseUrl(t,n);return le.stringifyUrl({url:o,query:ul(i,r),fragmentIdentifier:u},n)};le.exclude=(t,r,n)=>{let o=Array.isArray(r)?i=>!r.includes(i):(i,u)=>!r(i,u);return le.pick(t,o,n)}});var Ei=at((ln,Ci)=>{(function(t,r){typeof ln=="object"&&typeof Ci<"u"?r(ln):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(ln,function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=n,m=Promise,p=Promise.prototype.then,c=Promise.resolve.bind(m),_=Promise.reject.bind(m);function v(e){return new m(e)}function y(e){return c(e)}function w(e){return _(e)}function S(e,a,s){return p.call(e,a,s)}function E(e,a,s){S(S(e,a,s),void 0,f)}function T(e,a){E(e,a)}function g(e,a){E(e,void 0,a)}function D(e,a,s){return S(e,a,s)}function I(e){S(e,void 0,f)}let P=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=y(void 0);return s=>S(a,s)})();function q(e,a,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,s)}function O(e,a,s){try{return y(q(e,a,s))}catch(l){return w(l)}}let Z=16384;class X{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let s=this._back,l=s;s._elements.length===Z-1&&(l={_elements:[],_next:void 0}),s._elements.push(a),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let a=this._front,s=a,l=this._cursor,d=l+1,h=a._elements,b=h[l];return d===Z&&(s=a._next,d=0),--this._size,this._cursor=d,a!==s&&(this._front=s),h[l]=void 0,b}forEach(a){let s=this._cursor,l=this._front,d=l._elements;for(;(s!==d.length||l._next!==void 0)&&!(s===d.length&&(l=l._next,d=l._elements,s=0,d.length===0));)a(d[s]),++s}peek(){let a=this._front,s=this._cursor;return a._elements[s]}}function V(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?Ht(e):a._state==="closed"?Tr(e):ge(e,a._storedError)}function ft(e,a){let s=e._ownerReadableStream;return Re(s,a)}function oe(e){e._ownerReadableStream._state==="readable"?xe(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Cr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Fe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ht(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s})}function ge(e,a){Ht(e),xe(e,a)}function Tr(e){Ht(e),Yt(e)}function xe(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Cr(e,a){ge(e,a)}function Yt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Er=r("[[AbortSteps]]"),Pt=r("[[ErrorSteps]]"),dt=r("[[CancelSteps]]"),Pe=r("[[PullSteps]]"),At=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Dt=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Be(e){return typeof e=="object"||typeof e=="function"}function Se(e,a){if(e!==void 0&&!Be(e))throw new TypeError(`${a} is not an object.`)}function N(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function ie(e){return typeof e=="object"&&e!==null||typeof e=="function"}function te(e,a){if(!ie(e))throw new TypeError(`${a} is not an object.`)}function j(e,a,s){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${s}'.`)}function Me(e,a,s){if(e===void 0)throw new TypeError(`${a} is required in '${s}'.`)}function qe(e){return Number(e)}function de(e){return e===0?0:e}function K(e){return de(Dt(e))}function _e(e,a){let l=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=de(d),!At(d))throw new TypeError(`${a} is not a finite number`);if(d=K(d),d<0||d>l)throw new TypeError(`${a} is outside the accepted range of ${0} to ${l}, inclusive`);return!At(d)||d===0?0:d}function se(e,a){if(!tt(e))throw new TypeError(`${a} is not a ReadableStream.`)}function Ae(e){return new Xe(e)}function Ve(e,a){e._reader._readRequests.push(a)}function De(e,a,s){let d=e._reader._readRequests.shift();s?d._closeSteps():d._chunkSteps(a)}function Qe(e){return e._reader._readRequests.length}function Ge(e){let a=e._reader;return!(a===void 0||!Ke(a))}class Xe{constructor(a){if(j(a,1,"ReadableStreamDefaultReader"),se(a,"First parameter"),rt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");V(this,a),this._readRequests=new X}get closed(){return Ke(this)?this._closedPromise:w(Pr("closed"))}cancel(a=void 0){return Ke(this)?this._ownerReadableStream===void 0?w(Fe("cancel")):ft(this,a):w(Pr("cancel"))}read(){if(!Ke(this))return w(Pr("read"));if(this._ownerReadableStream===void 0)return w(Fe("read from"));let a,s,l=v((h,b)=>{a=h,s=b});return Vt(this,{_chunkSteps:h=>a({value:h,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:h=>s(h)}),l}releaseLock(){if(!Ke(this))throw Pr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(Xe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Xe}function Vt(e,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?a._closeSteps():s._state==="errored"?a._errorSteps(s._storedError):s._readableStreamController[Pe](a)}function Pr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ka=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Wa{constructor(a,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=s}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?D(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let s=()=>this._returnSteps(a);return this._ongoingPromise?D(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return w(Fe("iterate"));let s,l,d=v((b,R)=>{s=b,l=R});return Vt(a,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),l(b)}}),d}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(Fe("finish iterating"));if(!this._preventCancel){let l=ft(s,a);return oe(s),D(l,()=>({value:a,done:!0}))}return oe(s),y({value:a,done:!0})}}let Fa={next(){return xa(this)?this._asyncIteratorImpl.next():w(Ba("next"))},return(e){return xa(this)?this._asyncIteratorImpl.return(e):w(Ba("return"))}};ka!==void 0&&Object.setPrototypeOf(Fa,ka);function Fs(e,a){let s=Ae(e),l=new Wa(s,a),d=Object.create(Fa);return d._asyncIteratorImpl=l,d}function xa(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Wa}catch{return!1}}function Ba(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ma=Number.isNaN||function(e){return e!==e};function Qt(e){return e.slice()}function qa(e,a,s,l,d){new Uint8Array(e).set(new Uint8Array(s,l,d),a)}function ad(e){return e}function Ar(e){return!1}function La(e,a,s){if(e.slice)return e.slice(a,s);let l=s-a,d=new ArrayBuffer(l);return qa(d,0,e,a,l),d}function xs(e){return!(typeof e!="number"||Ma(e)||e<0)}function Ia(e){let a=La(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Sn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function _n(e,a,s){if(!xs(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:s}),e._queueTotalSize+=s}function Bs(e){return e._queue.peek().value}function Je(e){e._queue=new X,e._queueTotalSize=0}class Gt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!vn(this))throw En("view");return this._view}respond(a){if(!vn(this))throw En("respond");if(j(a,1,"respond"),a=_e(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ar(this._view.buffer),Fr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!vn(this))throw En("respondWithNewView");if(j(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ar(a.buffer),xr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Gt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Gt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ot{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ct(this))throw Kt("byobRequest");return Cn(this)}get desiredSize(){if(!ct(this))throw Kt("desiredSize");return Va(this)}close(){if(!ct(this))throw Kt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);Xt(this)}enqueue(a){if(!ct(this))throw Kt("enqueue");if(j(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);Wr(this,a)}error(a=void 0){if(!ct(this))throw Kt("error");ve(this,a)}[dt](a){Ua(this),Je(this);let s=this._cancelAlgorithm(a);return kr(this),s}[Pe](a){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,$a(this);let h=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);a._chunkSteps(h);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let d;try{d=new ArrayBuffer(l)}catch(b){a._errorSteps(b);return}let h={buffer:d,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}Ve(s,a),mt(this)}}Object.defineProperties(Ot.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ct(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ot}function vn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Gt}function mt(e){if(!Is(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,mt(e))},l=>{ve(e,l)})}function Ua(e){Tn(e),e._pendingPullIntos=new X}function Rn(e,a){let s=!1;e._state==="closed"&&(s=!0);let l=za(a);a.readerType==="default"?De(e,l,s):Ns(e,l,s)}function za(e){let a=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/s)}function Dr(e,a,s,l){e._queue.push({buffer:a,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function Na(e,a){let s=a.elementSize,l=a.bytesFilled-a.bytesFilled%s,d=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),h=a.bytesFilled+d,b=h-h%s,R=d,A=!1;b>l&&(R=b-a.bytesFilled,A=!0);let W=e._queue;for(;R>0;){let F=W.peek(),x=Math.min(R,F.byteLength),Y=a.byteOffset+a.bytesFilled;qa(a.buffer,Y,F.buffer,F.byteOffset,x),F.byteLength===x?W.shift():(F.byteOffset+=x,F.byteLength-=x),e._queueTotalSize-=x,ja(e,x,a),R-=x}return A}function ja(e,a,s){s.bytesFilled+=a}function $a(e){e._queueTotalSize===0&&e._closeRequested?(kr(e),or(e._controlledReadableByteStream)):mt(e)}function Tn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ha(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Na(e,a)&&(Or(e),Rn(e._controlledReadableByteStream,a))}}function Ms(e,a,s){let l=e._controlledReadableByteStream,d=1;a.constructor!==DataView&&(d=a.constructor.BYTES_PER_ELEMENT);let h=a.constructor,b=a.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:d,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Xa(l,s);return}if(l._state==="closed"){let A=new h(R.buffer,R.byteOffset,0);s._closeSteps(A);return}if(e._queueTotalSize>0){if(Na(e,R)){let A=za(R);$a(e),s._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");ve(e,A),s._errorSteps(A);return}}e._pendingPullIntos.push(R),Xa(l,s),mt(e)}function qs(e,a){let s=e._controlledReadableByteStream;if(Pn(s))for(;Ka(s)>0;){let l=Or(e);Rn(s,l)}}function Ls(e,a,s){if(ja(e,a,s),s.bytesFilled<s.elementSize)return;Or(e);let l=s.bytesFilled%s.elementSize;if(l>0){let d=s.byteOffset+s.bytesFilled,h=La(s.buffer,d-l,d);Dr(e,h,0,h.byteLength)}s.bytesFilled-=l,Rn(e._controlledReadableByteStream,s),Ha(e)}function Ya(e,a){let s=e._pendingPullIntos.peek();Tn(e),e._controlledReadableByteStream._state==="closed"?qs(e):Ls(e,a,s),mt(e)}function Or(e){return e._pendingPullIntos.shift()}function Is(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ge(a)&&Qe(a)>0||Pn(a)&&Ka(a)>0||Va(e)>0)}function kr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Xt(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ve(e,l),l}kr(e),or(a)}}function Wr(e,a){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=a.buffer,d=a.byteOffset,h=a.byteLength,b=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Ar(R.buffer),R.buffer=R.buffer}if(Tn(e),Ge(s))if(Qe(s)===0)Dr(e,b,d,h);else{e._pendingPullIntos.length>0&&Or(e);let R=new Uint8Array(b,d,h);De(s,R,!1)}else Pn(s)?(Dr(e,b,d,h),Ha(e)):Dr(e,b,d,h);mt(e)}function ve(e,a){let s=e._controlledReadableByteStream;s._state==="readable"&&(Ua(e),Je(e),kr(e),vo(s,a))}function Cn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),s=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),l=Object.create(Gt.prototype);zs(l,e,s),e._byobRequest=l}return e._byobRequest}function Va(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Fr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+a>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Ya(e,a)}function xr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+a.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=a.byteLength;s.buffer=a.buffer,Ya(e,d)}function Qa(e,a,s,l,d,h,b){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Je(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=h,a._pullAlgorithm=l,a._cancelAlgorithm=d,a._autoAllocateChunkSize=b,a._pendingPullIntos=new X,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,mt(a)},A=>{ve(a,A)})}function Us(e,a,s){let l=Object.create(Ot.prototype),d=()=>{},h=()=>y(void 0),b=()=>y(void 0);a.start!==void 0&&(d=()=>a.start(l)),a.pull!==void 0&&(h=()=>a.pull(l)),a.cancel!==void 0&&(b=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Qa(e,l,d,h,b,s,R)}function zs(e,a,s){e._associatedReadableByteStreamController=a,e._view=s}function En(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Kt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ga(e){return new Jt(e)}function Xa(e,a){e._reader._readIntoRequests.push(a)}function Ns(e,a,s){let d=e._reader._readIntoRequests.shift();s?d._closeSteps(a):d._chunkSteps(a)}function Ka(e){return e._reader._readIntoRequests.length}function Pn(e){let a=e._reader;return!(a===void 0||!ht(a))}class Jt{constructor(a){if(j(a,1,"ReadableStreamBYOBReader"),se(a,"First parameter"),rt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ct(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");V(this,a),this._readIntoRequests=new X}get closed(){return ht(this)?this._closedPromise:w(Br("closed"))}cancel(a=void 0){return ht(this)?this._ownerReadableStream===void 0?w(Fe("cancel")):ft(this,a):w(Br("cancel"))}read(a){if(!ht(this))return w(Br("read"));if(!ArrayBuffer.isView(a))return w(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Ar(a.buffer),this._ownerReadableStream===void 0)return w(Fe("read from"));let s,l,d=v((b,R)=>{s=b,l=R});return Ja(this,a,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>l(b)}),d}releaseLock(){if(!ht(this))throw Br("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(Jt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function ht(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Jt}function Ja(e,a,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):Ms(l._readableStreamController,a,s)}function Br(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Zt(e,a){let{highWaterMark:s}=e;if(s===void 0)return a;if(Ma(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function Mr(e){let{size:a}=e;return a||(()=>1)}function qr(e,a){Se(e,a);let s=e==null?void 0:e.highWaterMark,l=e==null?void 0:e.size;return{highWaterMark:s===void 0?void 0:qe(s),size:l===void 0?void 0:js(l,`${a} has member 'size' that`)}}function js(e,a){return N(e,a),s=>qe(e(s))}function $s(e,a){Se(e,a);let s=e==null?void 0:e.abort,l=e==null?void 0:e.close,d=e==null?void 0:e.start,h=e==null?void 0:e.type,b=e==null?void 0:e.write;return{abort:s===void 0?void 0:Hs(s,e,`${a} has member 'abort' that`),close:l===void 0?void 0:Ys(l,e,`${a} has member 'close' that`),start:d===void 0?void 0:Vs(d,e,`${a} has member 'start' that`),write:b===void 0?void 0:Qs(b,e,`${a} has member 'write' that`),type:h}}function Hs(e,a,s){return N(e,s),l=>O(e,a,[l])}function Ys(e,a,s){return N(e,s),()=>O(e,a,[])}function Vs(e,a,s){return N(e,s),l=>q(e,a,[l])}function Qs(e,a,s){return N(e,s),(l,d)=>O(e,a,[l,d])}function Za(e,a){if(!kt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Gs(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Xs=typeof AbortController=="function";function Ks(){if(Xs)return new AbortController}class er{constructor(a={},s={}){a===void 0?a=null:te(a,"First parameter");let l=qr(s,"Second parameter"),d=$s(a,"First parameter");if(to(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let b=Mr(l),R=Zt(l,1);du(this,d,R,b)}get locked(){if(!kt(this))throw Nr("locked");return Wt(this)}abort(a=void 0){return kt(this)?Wt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Lr(this,a):w(Nr("abort"))}close(){return kt(this)?Wt(this)?w(new TypeError("Cannot close a stream that already has a writer")):Oe(this)?w(new TypeError("Cannot close an already-closing stream")):ro(this):w(Nr("close"))}getWriter(){if(!kt(this))throw Nr("getWriter");return eo(this)}}Object.defineProperties(er.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(er.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function eo(e){return new tr(e)}function Js(e,a,s,l,d=1,h=()=>1){let b=Object.create(er.prototype);to(b);let R=Object.create(Ft.prototype);return uo(b,R,e,a,s,l,d,h),b}function to(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new X,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function kt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof er}function Wt(e){return e._writer!==void 0}function Lr(e,a){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=a,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;l==="erroring"&&(d=!0,a=void 0);let h=v((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:a,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=h,d||Dn(e,a),h}function ro(e){let a=e._state;if(a==="closed"||a==="errored")return w(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let s=v((d,h)=>{let b={_resolve:d,_reject:h};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&a==="writable"&&Ln(l),cu(e._writableStreamController),s}function Zs(e){return v((s,l)=>{let d={_resolve:s,_reject:l};e._writeRequests.push(d)})}function An(e,a){if(e._state==="writable"){Dn(e,a);return}On(e)}function Dn(e,a){let s=e._writableStreamController;e._state="erroring",e._storedError=a;let l=e._writer;l!==void 0&&ao(l,a),!au(e)&&s._started&&On(e)}function On(e){e._state="errored",e._writableStreamController[Pt]();let a=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(a)}),e._writeRequests=new X,e._pendingAbortRequest===void 0){Ir(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(a),Ir(e);return}let l=e._writableStreamController[Er](s._reason);E(l,()=>{s._resolve(),Ir(e)},d=>{s._reject(d),Ir(e)})}function eu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function tu(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,An(e,a)}function ru(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&mo(s)}function nu(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),An(e,a)}function Oe(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function au(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function ou(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function iu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ir(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Mn(a,e._storedError)}function kn(e,a){let s=e._writer;s!==void 0&&a!==e._backpressure&&(a?wu(s):Ln(s)),e._backpressure=a}class tr{constructor(a){if(j(a,1,"WritableStreamDefaultWriter"),Za(a,"First parameter"),Wt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let s=a._state;if(s==="writable")!Oe(a)&&a._backpressure?$r(this):ho(this),jr(this);else if(s==="erroring")qn(this,a._storedError),jr(this);else if(s==="closed")ho(this),gu(this);else{let l=a._storedError;qn(this,l),co(this,l)}}get closed(){return pt(this)?this._closedPromise:w(bt("closed"))}get desiredSize(){if(!pt(this))throw bt("desiredSize");if(this._ownerWritableStream===void 0)throw rr("desiredSize");return fu(this)}get ready(){return pt(this)?this._readyPromise:w(bt("ready"))}abort(a=void 0){return pt(this)?this._ownerWritableStream===void 0?w(rr("abort")):su(this,a):w(bt("abort"))}close(){if(!pt(this))return w(bt("close"));let a=this._ownerWritableStream;return a===void 0?w(rr("close")):Oe(a)?w(new TypeError("Cannot close an already-closing stream")):no(this)}releaseLock(){if(!pt(this))throw bt("releaseLock");this._ownerWritableStream!==void 0&&oo(this)}write(a=void 0){return pt(this)?this._ownerWritableStream===void 0?w(rr("write to")):io(this,a):w(bt("write"))}}Object.defineProperties(tr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function pt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof tr}function su(e,a){let s=e._ownerWritableStream;return Lr(s,a)}function no(e){let a=e._ownerWritableStream;return ro(a)}function uu(e){let a=e._ownerWritableStream,s=a._state;return Oe(a)||s==="closed"?y(void 0):s==="errored"?w(a._storedError):no(e)}function lu(e,a){e._closedPromiseState==="pending"?Mn(e,a):yu(e,a)}function ao(e,a){e._readyPromiseState==="pending"?po(e,a):Su(e,a)}function fu(e){let a=e._ownerWritableStream,s=a._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:lo(a._writableStreamController)}function oo(e){let a=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ao(e,s),lu(e,s),a._writer=void 0,e._ownerWritableStream=void 0}function io(e,a){let s=e._ownerWritableStream,l=s._writableStreamController,d=mu(l,a);if(s!==e._ownerWritableStream)return w(rr("write to"));let h=s._state;if(h==="errored")return w(s._storedError);if(Oe(s)||h==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return w(s._storedError);let b=Zs(s);return hu(l,a,d),b}let so={};class Ft{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Wn(this))throw Bn("abortReason");return this._abortReason}get signal(){if(!Wn(this))throw Bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!Wn(this))throw Bn("error");this._controlledWritableStream._state==="writable"&&fo(this,a)}[Er](a){let s=this._abortAlgorithm(a);return Ur(this),s}[Pt](){Je(this)}}Object.defineProperties(Ft.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Wn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ft}function uo(e,a,s,l,d,h,b,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._abortReason=void 0,a._abortController=Ks(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=b,a._writeAlgorithm=l,a._closeAlgorithm=d,a._abortAlgorithm=h;let A=xn(a);kn(e,A);let W=s(),F=y(W);E(F,()=>{a._started=!0,zr(a)},x=>{a._started=!0,An(e,x)})}function du(e,a,s,l){let d=Object.create(Ft.prototype),h=()=>{},b=()=>y(void 0),R=()=>y(void 0),A=()=>y(void 0);a.start!==void 0&&(h=()=>a.start(d)),a.write!==void 0&&(b=W=>a.write(W,d)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=W=>a.abort(W)),uo(e,d,h,b,R,A,s,l)}function Ur(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function cu(e){_n(e,so,0),zr(e)}function mu(e,a){try{return e._strategySizeAlgorithm(a)}catch(s){return Fn(e,s),1}}function lo(e){return e._strategyHWM-e._queueTotalSize}function hu(e,a,s){try{_n(e,a,s)}catch(d){Fn(e,d);return}let l=e._controlledWritableStream;if(!Oe(l)&&l._state==="writable"){let d=xn(e);kn(l,d)}zr(e)}function zr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){On(a);return}if(e._queue.length===0)return;let l=Bs(e);l===so?pu(e):bu(e,l)}function Fn(e,a){e._controlledWritableStream._state==="writable"&&fo(e,a)}function pu(e){let a=e._controlledWritableStream;ou(a),Sn(e);let s=e._closeAlgorithm();Ur(e),E(s,()=>{ru(a)},l=>{nu(a,l)})}function bu(e,a){let s=e._controlledWritableStream;iu(s);let l=e._writeAlgorithm(a);E(l,()=>{eu(s);let d=s._state;if(Sn(e),!Oe(s)&&d==="writable"){let h=xn(e);kn(s,h)}zr(e)},d=>{s._state==="writable"&&Ur(e),tu(s,d)})}function xn(e){return lo(e)<=0}function fo(e,a){let s=e._controlledWritableStream;Ur(e),Dn(s,a)}function Nr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function bt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function rr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function jr(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function co(e,a){jr(e),Mn(e,a)}function gu(e){jr(e),mo(e)}function Mn(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function yu(e,a){co(e,a)}function mo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function $r(e){e._readyPromise=v((a,s)=>{e._readyPromise_resolve=a,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function qn(e,a){$r(e),po(e,a)}function ho(e){$r(e),Ln(e)}function po(e,a){e._readyPromise_reject!==void 0&&(I(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function wu(e){$r(e)}function Su(e,a){qn(e,a)}function Ln(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let bo=typeof DOMException<"u"?DOMException:void 0;function _u(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function vu(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Ru=_u(bo)?bo:vu();function go(e,a,s,l,d,h){let b=Ae(e),R=eo(a);e._disturbed=!0;let A=!1,W=y(void 0);return v((F,x)=>{let Y;if(h!==void 0){if(Y=()=>{let C=new Ru("Aborted","AbortError"),k=[];l||k.push(()=>a._state==="writable"?Lr(a,C):y(void 0)),d||k.push(()=>e._state==="readable"?Re(e,C):y(void 0)),ue(()=>Promise.all(k.map(U=>U())),!0,C)},h.aborted){Y();return}h.addEventListener("abort",Y)}function Te(){return v((C,k)=>{function U(ce){ce?C():S(Mt(),U,k)}U(!1)})}function Mt(){return A?y(!0):S(R._readyPromise,()=>v((C,k)=>{Vt(b,{_chunkSteps:U=>{W=S(io(R,U),void 0,n),C(!1)},_closeSteps:()=>C(!0),_errorSteps:k})}))}if(Le(e,b._closedPromise,C=>{l?ye(!0,C):ue(()=>Lr(a,C),!0,C)}),Le(a,R._closedPromise,C=>{d?ye(!0,C):ue(()=>Re(e,C),!0,C)}),re(e,b._closedPromise,()=>{s?ye():ue(()=>uu(R))}),Oe(a)||a._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?ye(!0,C):ue(()=>Re(e,C),!0,C)}I(Te());function nt(){let C=W;return S(W,()=>C!==W?nt():void 0)}function Le(C,k,U){C._state==="errored"?U(C._storedError):g(k,U)}function re(C,k,U){C._state==="closed"?U():T(k,U)}function ue(C,k,U){if(A)return;A=!0,a._state==="writable"&&!Oe(a)?T(nt(),ce):ce();function ce(){E(C(),()=>Ie(k,U),qt=>Ie(!0,qt))}}function ye(C,k){A||(A=!0,a._state==="writable"&&!Oe(a)?T(nt(),()=>Ie(C,k)):Ie(C,k))}function Ie(C,k){oo(R),oe(b),h!==void 0&&h.removeEventListener("abort",Y),C?x(k):F(void 0)}})}class xt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Hr(this))throw Qr("desiredSize");return In(this)}close(){if(!Hr(this))throw Qr("close");if(!Bt(this))throw new TypeError("The stream is not in a state that permits close");ar(this)}enqueue(a=void 0){if(!Hr(this))throw Qr("enqueue");if(!Bt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Vr(this,a)}error(a=void 0){if(!Hr(this))throw Qr("error");Ze(this,a)}[dt](a){Je(this);let s=this._cancelAlgorithm(a);return Yr(this),s}[Pe](a){let s=this._controlledReadableStream;if(this._queue.length>0){let l=Sn(this);this._closeRequested&&this._queue.length===0?(Yr(this),or(s)):nr(this),a._chunkSteps(l)}else Ve(s,a),nr(this)}}Object.defineProperties(xt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Hr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof xt}function nr(e){if(!yo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,nr(e))},l=>{Ze(e,l)})}function yo(e){let a=e._controlledReadableStream;return!Bt(e)||!e._started?!1:!!(rt(a)&&Qe(a)>0||In(e)>0)}function Yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ar(e){if(!Bt(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Yr(e),or(a))}function Vr(e,a){if(!Bt(e))return;let s=e._controlledReadableStream;if(rt(s)&&Qe(s)>0)De(s,a,!1);else{let l;try{l=e._strategySizeAlgorithm(a)}catch(d){throw Ze(e,d),d}try{_n(e,a,l)}catch(d){throw Ze(e,d),d}}nr(e)}function Ze(e,a){let s=e._controlledReadableStream;s._state==="readable"&&(Je(e),Yr(e),vo(s,a))}function In(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Tu(e){return!yo(e)}function Bt(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function wo(e,a,s,l,d,h,b){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=b,a._strategyHWM=h,a._pullAlgorithm=l,a._cancelAlgorithm=d,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,nr(a)},A=>{Ze(a,A)})}function Cu(e,a,s,l){let d=Object.create(xt.prototype),h=()=>{},b=()=>y(void 0),R=()=>y(void 0);a.start!==void 0&&(h=()=>a.start(d)),a.pull!==void 0&&(b=()=>a.pull(d)),a.cancel!==void 0&&(R=A=>a.cancel(A)),wo(e,d,h,b,R,s,l)}function Qr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Eu(e,a){return ct(e._readableStreamController)?Au(e):Pu(e)}function Pu(e,a){let s=Ae(e),l=!1,d=!1,h=!1,b=!1,R,A,W,F,x,Y=v(re=>{x=re});function Te(){return l?(d=!0,y(void 0)):(l=!0,Vt(s,{_chunkSteps:ue=>{P(()=>{d=!1;let ye=ue,Ie=ue;h||Vr(W._readableStreamController,ye),b||Vr(F._readableStreamController,Ie),l=!1,d&&Te()})},_closeSteps:()=>{l=!1,h||ar(W._readableStreamController),b||ar(F._readableStreamController),(!h||!b)&&x(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function Mt(re){if(h=!0,R=re,b){let ue=Qt([R,A]),ye=Re(e,ue);x(ye)}return Y}function nt(re){if(b=!0,A=re,h){let ue=Qt([R,A]),ye=Re(e,ue);x(ye)}return Y}function Le(){}return W=Un(Le,Te,Mt),F=Un(Le,Te,nt),g(s._closedPromise,re=>{Ze(W._readableStreamController,re),Ze(F._readableStreamController,re),(!h||!b)&&x(void 0)}),[W,F]}function Au(e){let a=Ae(e),s=!1,l=!1,d=!1,h=!1,b=!1,R,A,W,F,x,Y=v(C=>{x=C});function Te(C){g(C._closedPromise,k=>{C===a&&(ve(W._readableStreamController,k),ve(F._readableStreamController,k),(!h||!b)&&x(void 0))})}function Mt(){ht(a)&&(oe(a),a=Ae(e),Te(a)),Vt(a,{_chunkSteps:k=>{P(()=>{l=!1,d=!1;let U=k,ce=k;if(!h&&!b)try{ce=Ia(k)}catch(qt){ve(W._readableStreamController,qt),ve(F._readableStreamController,qt),x(Re(e,qt));return}h||Wr(W._readableStreamController,U),b||Wr(F._readableStreamController,ce),s=!1,l?Le():d&&re()})},_closeSteps:()=>{s=!1,h||Xt(W._readableStreamController),b||Xt(F._readableStreamController),W._readableStreamController._pendingPullIntos.length>0&&Fr(W._readableStreamController,0),F._readableStreamController._pendingPullIntos.length>0&&Fr(F._readableStreamController,0),(!h||!b)&&x(void 0)},_errorSteps:()=>{s=!1}})}function nt(C,k){Ke(a)&&(oe(a),a=Ga(e),Te(a));let U=k?F:W,ce=k?W:F;Ja(a,C,{_chunkSteps:Lt=>{P(()=>{l=!1,d=!1;let It=k?b:h;if(k?h:b)It||xr(U._readableStreamController,Lt);else{let Bo;try{Bo=Ia(Lt)}catch(Nn){ve(U._readableStreamController,Nn),ve(ce._readableStreamController,Nn),x(Re(e,Nn));return}It||xr(U._readableStreamController,Lt),Wr(ce._readableStreamController,Bo)}s=!1,l?Le():d&&re()})},_closeSteps:Lt=>{s=!1;let It=k?b:h,nn=k?h:b;It||Xt(U._readableStreamController),nn||Xt(ce._readableStreamController),Lt!==void 0&&(It||xr(U._readableStreamController,Lt),!nn&&ce._readableStreamController._pendingPullIntos.length>0&&Fr(ce._readableStreamController,0)),(!It||!nn)&&x(void 0)},_errorSteps:()=>{s=!1}})}function Le(){if(s)return l=!0,y(void 0);s=!0;let C=Cn(W._readableStreamController);return C===null?Mt():nt(C._view,!1),y(void 0)}function re(){if(s)return d=!0,y(void 0);s=!0;let C=Cn(F._readableStreamController);return C===null?Mt():nt(C._view,!0),y(void 0)}function ue(C){if(h=!0,R=C,b){let k=Qt([R,A]),U=Re(e,k);x(U)}return Y}function ye(C){if(b=!0,A=C,h){let k=Qt([R,A]),U=Re(e,k);x(U)}return Y}function Ie(){}return W=_o(Ie,Le,ue),F=_o(Ie,re,ye),Te(a),[W,F]}function Du(e,a){Se(e,a);let s=e,l=s==null?void 0:s.autoAllocateChunkSize,d=s==null?void 0:s.cancel,h=s==null?void 0:s.pull,b=s==null?void 0:s.start,R=s==null?void 0:s.type;return{autoAllocateChunkSize:l===void 0?void 0:_e(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:Ou(d,s,`${a} has member 'cancel' that`),pull:h===void 0?void 0:ku(h,s,`${a} has member 'pull' that`),start:b===void 0?void 0:Wu(b,s,`${a} has member 'start' that`),type:R===void 0?void 0:Fu(R,`${a} has member 'type' that`)}}function Ou(e,a,s){return N(e,s),l=>O(e,a,[l])}function ku(e,a,s){return N(e,s),l=>O(e,a,[l])}function Wu(e,a,s){return N(e,s),l=>q(e,a,[l])}function Fu(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function xu(e,a){Se(e,a);let s=e==null?void 0:e.mode;return{mode:s===void 0?void 0:Bu(s,`${a} has member 'mode' that`)}}function Bu(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Mu(e,a){Se(e,a);let s=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(s)}}function So(e,a){Se(e,a);let s=e==null?void 0:e.preventAbort,l=e==null?void 0:e.preventCancel,d=e==null?void 0:e.preventClose,h=e==null?void 0:e.signal;return h!==void 0&&qu(h,`${a} has member 'signal' that`),{preventAbort:Boolean(s),preventCancel:Boolean(l),preventClose:Boolean(d),signal:h}}function qu(e,a){if(!Gs(e))throw new TypeError(`${a} is not an AbortSignal.`)}function Lu(e,a){Se(e,a);let s=e==null?void 0:e.readable;Me(s,"readable","ReadableWritablePair"),se(s,`${a} has member 'readable' that`);let l=e==null?void 0:e.writable;return Me(l,"writable","ReadableWritablePair"),Za(l,`${a} has member 'writable' that`),{readable:s,writable:l}}class et{constructor(a={},s={}){a===void 0?a=null:te(a,"First parameter");let l=qr(s,"Second parameter"),d=Du(a,"First parameter");if(zn(this),d.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=Zt(l,0);Us(this,d,h)}else{let h=Mr(l),b=Zt(l,1);Cu(this,d,b,h)}}get locked(){if(!tt(this))throw gt("locked");return rt(this)}cancel(a=void 0){return tt(this)?rt(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Re(this,a):w(gt("cancel"))}getReader(a=void 0){if(!tt(this))throw gt("getReader");return xu(a,"First parameter").mode===void 0?Ae(this):Ga(this)}pipeThrough(a,s={}){if(!tt(this))throw gt("pipeThrough");j(a,1,"pipeThrough");let l=Lu(a,"First parameter"),d=So(s,"Second parameter");if(rt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Wt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=go(this,l.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return I(h),l.readable}pipeTo(a,s={}){if(!tt(this))return w(gt("pipeTo"));if(a===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!kt(a))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=So(s,"Second parameter")}catch(d){return w(d)}return rt(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Wt(a)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):go(this,a,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!tt(this))throw gt("tee");let a=Eu(this);return Qt(a)}values(a=void 0){if(!tt(this))throw gt("values");let s=Mu(a,"First parameter");return Fs(this,s.preventCancel)}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(et.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(et.prototype,r.asyncIterator,{value:et.prototype.values,writable:!0,configurable:!0});function Un(e,a,s,l=1,d=()=>1){let h=Object.create(et.prototype);zn(h);let b=Object.create(xt.prototype);return wo(h,b,e,a,s,l,d),h}function _o(e,a,s){let l=Object.create(et.prototype);zn(l);let d=Object.create(Ot.prototype);return Qa(l,d,e,a,s,0,void 0),l}function zn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof et}function rt(e){return e._reader!==void 0}function Re(e,a){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return w(e._storedError);or(e);let s=e._reader;s!==void 0&&ht(s)&&(s._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),s._readIntoRequests=new X);let l=e._readableStreamController[dt](a);return D(l,n)}function or(e){e._state="closed";let a=e._reader;a!==void 0&&(Yt(a),Ke(a)&&(a._readRequests.forEach(s=>{s._closeSteps()}),a._readRequests=new X))}function vo(e,a){e._state="errored",e._storedError=a;let s=e._reader;s!==void 0&&(xe(s,a),Ke(s)?(s._readRequests.forEach(l=>{l._errorSteps(a)}),s._readRequests=new X):(s._readIntoRequests.forEach(l=>{l._errorSteps(a)}),s._readIntoRequests=new X))}function gt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ro(e,a){Se(e,a);let s=e==null?void 0:e.highWaterMark;return Me(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:qe(s)}}let To=e=>e.byteLength;Object.defineProperty(To,"name",{value:"size",configurable:!0});class Gr{constructor(a){j(a,1,"ByteLengthQueuingStrategy"),a=Ro(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Eo(this))throw Co("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Eo(this))throw Co("size");return To}}Object.defineProperties(Gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Gr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Co(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Eo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Gr}let Po=()=>1;Object.defineProperty(Po,"name",{value:"size",configurable:!0});class Xr{constructor(a){j(a,1,"CountQueuingStrategy"),a=Ro(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Do(this))throw Ao("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Do(this))throw Ao("size");return Po}}Object.defineProperties(Xr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Xr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ao(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Do(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Xr}function Iu(e,a){Se(e,a);let s=e==null?void 0:e.flush,l=e==null?void 0:e.readableType,d=e==null?void 0:e.start,h=e==null?void 0:e.transform,b=e==null?void 0:e.writableType;return{flush:s===void 0?void 0:Uu(s,e,`${a} has member 'flush' that`),readableType:l,start:d===void 0?void 0:zu(d,e,`${a} has member 'start' that`),transform:h===void 0?void 0:Nu(h,e,`${a} has member 'transform' that`),writableType:b}}function Uu(e,a,s){return N(e,s),l=>O(e,a,[l])}function zu(e,a,s){return N(e,s),l=>q(e,a,[l])}function Nu(e,a,s){return N(e,s),(l,d)=>O(e,a,[l,d])}class Kr{constructor(a={},s={},l={}){a===void 0&&(a=null);let d=qr(s,"Second parameter"),h=qr(l,"Third parameter"),b=Iu(a,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Zt(h,0),A=Mr(h),W=Zt(d,1),F=Mr(d),x,Y=v(Te=>{x=Te});ju(this,Y,W,F,R,A),Hu(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!Oo(this))throw xo("readable");return this._readable}get writable(){if(!Oo(this))throw xo("writable");return this._writable}}Object.defineProperties(Kr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function ju(e,a,s,l,d,h){function b(){return a}function R(Y){return Qu(e,Y)}function A(Y){return Gu(e,Y)}function W(){return Xu(e)}e._writable=Js(b,R,W,A,s,l);function F(){return Ku(e)}function x(Y){return Zr(e,Y),y(void 0)}e._readable=Un(b,F,x,d,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,en(e,!0),e._transformStreamController=void 0}function Oo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Kr}function Jr(e,a){Ze(e._readable._readableStreamController,a),Zr(e,a)}function Zr(e,a){ko(e._transformStreamController),Fn(e._writable._writableStreamController,a),e._backpressure&&en(e,!1)}function en(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=v(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=a}class ir{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!tn(this))throw rn("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return In(a)}enqueue(a=void 0){if(!tn(this))throw rn("enqueue");Wo(this,a)}error(a=void 0){if(!tn(this))throw rn("error");Yu(this,a)}terminate(){if(!tn(this))throw rn("terminate");Vu(this)}}Object.defineProperties(ir.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function tn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof ir}function $u(e,a,s,l){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=s,a._flushAlgorithm=l}function Hu(e,a){let s=Object.create(ir.prototype),l=h=>{try{return Wo(s,h),y(void 0)}catch(b){return w(b)}},d=()=>y(void 0);a.transform!==void 0&&(l=h=>a.transform(h,s)),a.flush!==void 0&&(d=()=>a.flush(s)),$u(e,s,l,d)}function ko(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Wo(e,a){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!Bt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Vr(l,a)}catch(h){throw Zr(s,h),s._readable._storedError}Tu(l)!==s._backpressure&&en(s,!0)}function Yu(e,a){Jr(e._controlledTransformStream,a)}function Fo(e,a){let s=e._transformAlgorithm(a);return D(s,void 0,l=>{throw Jr(e._controlledTransformStream,l),l})}function Vu(e){let a=e._controlledTransformStream,s=a._readable._readableStreamController;ar(s);let l=new TypeError("TransformStream terminated");Zr(a,l)}function Qu(e,a){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return D(l,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return Fo(s,a)})}return Fo(s,a)}function Gu(e,a){return Jr(e,a),y(void 0)}function Xu(e){let a=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return ko(s),D(l,()=>{if(a._state==="errored")throw a._storedError;ar(a._readableStreamController)},d=>{throw Jr(e,d),a._storedError})}function Ku(e){return en(e,!1),e._backpressureChangePromise}function rn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function xo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Gr,t.CountQueuingStrategy=Xr,t.ReadableByteStreamController=Ot,t.ReadableStream=et,t.ReadableStreamBYOBReader=Jt,t.ReadableStreamBYOBRequest=Gt,t.ReadableStreamDefaultController=xt,t.ReadableStreamDefaultReader=Xe,t.TransformStream=Kr,t.TransformStreamDefaultController=ir,t.WritableStream=er,t.WritableStreamDefaultController=Ft,t.WritableStreamDefaultWriter=tr,Object.defineProperty(t,"__esModule",{value:!0})})});var Pi=at(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(n){throw t.emitWarning=r,n}}catch{Object.assign(globalThis,Ei())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let m=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=m.byteLength,u.enqueue(new Uint8Array(m)),o===i.size&&u.close()}})})}catch{}});async function*ra(t,r=!0){for(let n of t)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(r){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let u=Math.min(i-o,Ai),f=n.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Ai)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var gd,Ai,Di,Bl,Ne,mr=ur(()=>{gd=Ce(Pi(),1);Ai=65536;Di=class na{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],n={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof na?f=u:f=o.encode(`${u}`);let m=ArrayBuffer.isView(f)?f.byteLength:f.size;m&&(this.#r+=m,this.#e.push(f))}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,n="";for await(let o of ra(this.#e,!1))n+=r.decode(o,{stream:!0});return n+=r.decode(),n}async arrayBuffer(){let r=new Uint8Array(this.size),n=0;for await(let o of ra(this.#e,!1))r.set(o,n),n+=o.length;return r.buffer}stream(){let r=ra(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await r.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await r.return()}})}slice(r=0,n=this.size,o=""){let{size:i}=this,u=r<0?Math.max(i+r,0):Math.min(r,i),f=n<0?Math.max(i+n,0):Math.min(n,i),m=Math.max(f-u,0),p=this.#e,c=[],_=0;for(let y of p){if(_>=m)break;let w=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=y.slice(u,Math.min(w,f)),_+=S.size),f-=w,c.push(S),u=0}}let v=new na([],{type:String(o).toLowerCase()});return v.#r=m,v.#e=c,v}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Di.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Bl=Di,Ne=Bl});var Ml,ql,Ut,aa=ur(()=>{mr();Ml=class extends Ne{#e=0;#t="";constructor(r,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,o);o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Ne&&/^(File)$/.test(r[Symbol.toStringTag])}},ql=Ml,Ut=ql});function Wi(t,r=Ne){var n=`${Oi()}${Oi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return t.forEach((u,f)=>typeof u=="string"?o.push(i+oa(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+oa(f)+`"; filename="${oa(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new r(o,{type:"multipart/form-data; boundary="+n})}var hr,Ll,Il,Oi,Ul,ki,oa,St,_t,fn=ur(()=>{mr();aa();({toStringTag:hr,iterator:Ll,hasInstance:Il}=Symbol),Oi=Math.random,Ul="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ki=(t,r,n)=>(t+="",/^(Blob|File)$/.test(r&&r[hr])?[(n=n!==void 0?n+"":r[hr]=="File"?r.name:"blob",t),r.name!==n||r[hr]=="blob"?new Ut([r],n,r):r]:[t,r+""]),oa=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),St=(t,r,n)=>{if(r.length<n)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${n} arguments required, but only ${r.length} present.`)},_t=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[hr](){return"FormData"}[Ll](){return this.entries()}static[Il](r){return r&&typeof r=="object"&&r[hr]==="FormData"&&!Ul.some(n=>typeof r[n]!="function")}append(...r){St("append",arguments,2),this.#e.push(ki(...r))}delete(r){St("delete",arguments,1),r+="",this.#e=this.#e.filter(([n])=>n!==r)}get(r){St("get",arguments,1),r+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===r)return n[i][1];return null}getAll(r,n){return St("getAll",arguments,1),n=[],r+="",this.#e.forEach(o=>o[0]===r&&n.push(o[1])),n}has(r){return St("has",arguments,1),r+="",this.#e.some(n=>n[0]===r)}forEach(r,n){St("forEach",arguments,1);for(var[o,i]of this)r.call(n,i,o,this)}set(...r){St("set",arguments,2);var n=[],o=!0;r=ki(...r),this.#e.forEach(i=>{i[0]===r[0]?o&&(o=!n.push(r)):n.push(i)}),o&&n.push(r),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Mi=at((Od,Bi)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,n=new ArrayBuffer;r.postMessage(n,[n,n])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Bi.exports=globalThis.DOMException});var br,qi,zl,sa,ua=ur(()=>{br=require("node:fs"),qi=Ce(Mi(),1);aa();mr();({stat:zl}=br.promises),sa=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified,this.originalSize=r.originalSize===void 0?r.size:r.originalSize}slice(r,n){return new sa({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:n-r,start:this.#t+r})}async*stream(){let{mtimeMs:r,size:n}=await zl(this.#e);if(r>this.lastModified||this.originalSize!==n)throw new qi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,br.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ui={};Uo(Ui,{toFormData:()=>Ql});function Vl(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let n=r[2]||r[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),o}async function Ql(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let n=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new Ii(n[1]||n[2]),i,u,f,m,p,c,_=[],v=new _t,y=g=>{f+=T.decode(g,{stream:!0})},w=g=>{_.push(g)},S=()=>{let g=new Ut(_,c,{type:p});v.append(m,g)},E=()=>{v.append(m,f)},T=new TextDecoder("utf-8");T.decode(),o.onPartBegin=function(){o.onPartData=y,o.onPartEnd=E,i="",u="",f="",m="",p="",c=null,_.length=0},o.onHeaderField=function(g){i+=T.decode(g,{stream:!0})},o.onHeaderValue=function(g){u+=T.decode(g,{stream:!0})},o.onHeaderEnd=function(){if(u+=T.decode(),i=i.toLowerCase(),i==="content-disposition"){let g=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);g&&(m=g[2]||g[3]||""),c=Vl(u),c&&(o.onPartData=w,o.onPartEnd=S)}else i==="content-type"&&(p=u);u="",i=""};for await(let g of t)o.write(g);return o.end(),v}var We,z,Li,it,cn,mn,Nl,gr,jl,$l,Hl,Yl,vt,Ii,zi=ur(()=>{ua();fn();We=0,z={START_BOUNDARY:We++,HEADER_FIELD_START:We++,HEADER_FIELD:We++,HEADER_VALUE_START:We++,HEADER_VALUE:We++,HEADER_VALUE_ALMOST_DONE:We++,HEADERS_ALMOST_DONE:We++,PART_DATA_START:We++,PART_DATA:We++,END:We++},Li=1,it={PART_BOUNDARY:Li,LAST_BOUNDARY:Li*=2},cn=10,mn=13,Nl=32,gr=45,jl=58,$l=97,Hl=122,Yl=t=>t|32,vt=()=>{},Ii=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=vt,this.onHeaderField=vt,this.onHeadersEnd=vt,this.onHeaderValue=vt,this.onPartBegin=vt,this.onPartData=vt,this.onPartEnd=vt,this.boundaryChars={},r=`\r
--`+r;let n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let n=0,o=r.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:m,index:p,state:c,flags:_}=this,v=this.boundary.length,y=v-1,w=r.length,S,E,T=P=>{this[P+"Mark"]=n},g=P=>{delete this[P+"Mark"]},D=(P,q,O,Z)=>{(q===void 0||q!==O)&&this[P](Z&&Z.subarray(q,O))},I=(P,q)=>{let O=P+"Mark";O in this&&(q?(D(P,this[O],n,r),delete this[O]):(D(P,this[O],r.length,r),this[O]=0))};for(n=0;n<o;n++)switch(S=r[n],c){case z.START_BOUNDARY:if(p===f.length-2){if(S===gr)_|=it.LAST_BOUNDARY;else if(S!==mn)return;p++;break}else if(p-1===f.length-2){if(_&it.LAST_BOUNDARY&&S===gr)c=z.END,_=0;else if(!(_&it.LAST_BOUNDARY)&&S===cn)p=0,D("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}S!==f[p+2]&&(p=-2),S===f[p+2]&&p++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,T("onHeaderField"),p=0;case z.HEADER_FIELD:if(S===mn){g("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(p++,S===gr)break;if(S===jl){if(p===1)return;I("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(E=Yl(S),E<$l||E>Hl)return;break;case z.HEADER_VALUE_START:if(S===Nl)break;T("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:S===mn&&(I("onHeaderValue",!0),D("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==cn)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==cn)return;D("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,T("onPartData");case z.PART_DATA:if(i=p,p===0){for(n+=y;n<w&&!(r[n]in m);)n+=v;n-=y,S=r[n]}if(p<f.length)f[p]===S?(p===0&&I("onPartData",!0),p++):p=0;else if(p===f.length)p++,S===mn?_|=it.PART_BOUNDARY:S===gr?_|=it.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(_&it.PART_BOUNDARY){if(p=0,S===cn){_&=~it.PART_BOUNDARY,D("onPartEnd"),D("onPartBegin"),c=z.HEADER_FIELD_START;break}}else _&it.LAST_BOUNDARY&&S===gr?(D("onPartEnd"),c=z.END,_=0):p=0;if(p>0)u[p-1]=S;else if(i>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);D("onPartData",0,i,P),i=0,T("onPartData"),n--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}I("onHeaderField"),I("onHeaderValue"),I("onPartData"),this.index=p,this.state=c,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var nd={};Uo(nd,{default:()=>Ws});var Rr=require("@raycast/api");var fs=Ce(an());var us=require("react");var L=require("react");function li(t,r,n,o){function i(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function m(_){try{c(o.next(_))}catch(v){f(v)}}function p(_){try{c(o.throw(_))}catch(v){f(v)}}function c(_){_.done?u(_.value):i(_.value).then(m,p)}c((o=o.apply(t,r||[])).next())})}function fi(t,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,i,u,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(c){return function(_){return p([c,_])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(u=c[0]&2?i.return:c[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,c[1])).done)return u;switch(i=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){n.label=c[1];break}if(c[0]===6&&n.label<u[1]){n.label=u[1],u=c;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(c);break}u[2]&&n.ops.pop(),n.trys.pop();continue}c=r.call(t,n)}catch(_){c=[6,_],i=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ke=function(){},ee=ke(),lr=Object,ne=function(t){return t===ee},wt=function(t){return typeof t=="function"},ze=function(t,r){return lr.assign({},t,r)},Zn="undefined",ea=function(){return typeof window!=Zn},ml=function(){return typeof document!=Zn},hl=function(){return ea()&&typeof window.requestAnimationFrame!=Zn},on=new WeakMap,pl=0,cr=function(t){var r=typeof t,n=t&&t.constructor,o=n==Date,i,u;if(lr(t)===t&&!o&&n!=RegExp){if(i=on.get(t),i)return i;if(i=++pl+"~",on.set(t,i),n==Array){for(i="@",u=0;u<t.length;u++)i+=cr(t[u])+",";on.set(t,i)}if(n==lr){i="#";for(var f=lr.keys(t).sort();!ne(u=f.pop());)ne(t[u])||(i+=u+":"+cr(t[u])+",");on.set(t,i)}}else i=o?t.toJSON():r=="symbol"?t.toString():r=="string"?JSON.stringify(t):""+t;return i},Qn=!0,bl=function(){return Qn},di=ea(),ta=ml(),Gn=di&&window.addEventListener?window.addEventListener.bind(window):ke,gl=ta?document.addEventListener.bind(document):ke,Xn=di&&window.removeEventListener?window.removeEventListener.bind(window):ke,yl=ta?document.removeEventListener.bind(document):ke,wl=function(){var t=ta&&document.visibilityState;return ne(t)||t!=="hidden"},Sl=function(t){return gl("visibilitychange",t),Gn("focus",t),function(){yl("visibilitychange",t),Xn("focus",t)}},_l=function(t){var r=function(){Qn=!0,t()},n=function(){Qn=!1};return Gn("online",r),Gn("offline",n),function(){Xn("online",r),Xn("offline",n)}},vl={isOnline:bl,isVisible:wl},Rl={initFocus:Sl,initReconnect:_l},sn=!ea()||"Deno"in window,Tl=function(t){return hl()?window.requestAnimationFrame(t):setTimeout(t,1)},fr=sn?L.useEffect:L.useLayoutEffect,Yn=typeof navigator<"u"&&navigator.connection,ii=!sn&&Yn&&(["slow-2g","2g"].includes(Yn.effectiveType)||Yn.saveData),ci=function(t){if(wt(t))try{t=t()}catch{t=""}var r=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?cr(t):"";var n=t?"$swr$"+t:"";return[t,r,n]},yt=new WeakMap,mi=0,hi=1,pi=2,dr=function(t,r,n,o,i,u,f){f===void 0&&(f=!0);var m=yt.get(t),p=m[0],c=m[1],_=m[3],v=p[r],y=c[r];if(f&&y)for(var w=0;w<y.length;++w)y[w](n,o,i);return u&&(delete _[r],v&&v[0])?v[0](pi).then(function(){return t.get(r)}):t.get(r)},Cl=0,Kn=function(){return++Cl},bi=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return li(void 0,void 0,void 0,function(){var n,o,i,u,f,m,p,c,_,v,y,w,S,E,T,g,D,I,P,q;return fi(this,function(O){switch(O.label){case 0:if(n=t[0],o=t[1],i=t[2],u=t[3],f=typeof u=="boolean"?{revalidate:u}:u||{},m=ne(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,c=f.rollbackOnError!==!1,_=f.optimisticData,v=ci(o),y=v[0],w=v[2],!y)return[2];if(S=yt.get(n),E=S[2],t.length<3)return[2,dr(n,y,n.get(y),ee,ee,p,!0)];if(T=i,D=Kn(),E[y]=[D,0],I=!ne(_),P=n.get(y),I&&(n.set(y,_),dr(n,y,_)),wt(T))try{T=T(n.get(y))}catch(Z){g=Z}return T&&wt(T.then)?[4,T.catch(function(Z){g=Z})]:[3,2];case 1:if(T=O.sent(),D!==E[y][0]){if(g)throw g;return[2,T]}else g&&I&&c&&(m=!0,T=P,n.set(y,P));O.label=2;case 2:return m&&(g||(wt(m)&&(T=m(T,P)),n.set(y,T)),n.set(w,ze(n.get(w),{error:g}))),E[y][1]=Kn(),[4,dr(n,y,T,g,ee,p,!!m)];case 3:if(q=O.sent(),g)throw g;return[2,m?q:T]}})})},si=function(t,r){for(var n in t)t[n][0]&&t[n][0](r)},gi=function(t,r){if(!yt.has(t)){var n=ze(Rl,r),o={},i=bi.bind(ee,t),u=ke;if(yt.set(t,[o,{},{},{},i]),!sn){var f=n.initFocus(setTimeout.bind(ee,si.bind(ee,o,mi))),m=n.initReconnect(setTimeout.bind(ee,si.bind(ee,o,hi)));u=function(){f&&f(),m&&m(),yt.delete(t)}}return[t,i,u]}return[t,yt.get(t)[4]]},El=function(t,r,n,o,i){var u=n.errorRetryCount,f=i.retryCount,m=~~((Math.random()+.5)*(1<<(f<8?f:8)))*n.errorRetryInterval;!ne(u)&&f>u||setTimeout(o,m,i)},yi=gi(new Map),wi=yi[0],Pl=yi[1],Si=ze({onLoadingSlow:ke,onSuccess:ke,onError:ke,onErrorRetry:El,onDiscarded:ke,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ii?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:ii?5e3:3e3,compare:function(t,r){return cr(t)==cr(r)},isPaused:function(){return!1},cache:wi,mutate:Pl,fallback:{}},vl),_i=function(t,r){var n=ze(t,r);if(r){var o=t.use,i=t.fallback,u=r.use,f=r.fallback;o&&u&&(n.use=o.concat(u)),i&&f&&(n.fallback=ze(i,f))}return n},Jn=(0,L.createContext)({}),Al=function(t){var r=t.value,n=_i((0,L.useContext)(Jn),r),o=r&&r.provider,i=(0,L.useState)(function(){return o?gi(o(n.cache||wi),r):ee})[0];return i&&(n.cache=i[0],n.mutate=i[1]),fr(function(){return i?i[2]:ee},[]),(0,L.createElement)(Jn.Provider,ze(t,{value:n}))},Dl=function(t,r){var n=(0,L.useState)({})[1],o=(0,L.useRef)(t),i=(0,L.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,L.useCallback)(function(f){var m=!1,p=o.current;for(var c in f){var _=c;p[_]!==f[_]&&(p[_]=f[_],i.current[_]&&(m=!0))}m&&!r.current&&n({})},[]);return fr(function(){o.current=t}),[o,i.current,u]},Ol=function(t){return wt(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},kl=function(){return ze(Si,(0,L.useContext)(Jn))},Wl=function(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=kl(),u=Ol(n),f=u[0],m=u[1],p=u[2],c=_i(i,p),_=t,v=c.use;if(v)for(var y=v.length;y-- >0;)_=v[y](_);return _(f,m||c.fetcher,c)}},ui=function(t,r,n){var o=r[t]||(r[t]=[]);return o.push(n),function(){var i=o.indexOf(n);i>=0&&(o[i]=o[o.length-1],o.pop())}},Vn={dedupe:!0},Fl=function(t,r,n){var o=n.cache,i=n.compare,u=n.fallbackData,f=n.suspense,m=n.revalidateOnMount,p=n.refreshInterval,c=n.refreshWhenHidden,_=n.refreshWhenOffline,v=yt.get(o),y=v[0],w=v[1],S=v[2],E=v[3],T=ci(t),g=T[0],D=T[1],I=T[2],P=(0,L.useRef)(!1),q=(0,L.useRef)(!1),O=(0,L.useRef)(g),Z=(0,L.useRef)(r),X=(0,L.useRef)(n),V=function(){return X.current},ft=function(){return V().isVisible()&&V().isOnline()},oe=function(N){return o.set(I,ze(o.get(I),N))},Fe=o.get(g),Ht=ne(u)?n.fallback[g]:u,ge=ne(Fe)?Ht:Fe,Tr=o.get(I)||{},xe=Tr.error,Cr=!P.current,Yt=function(){return Cr&&!ne(m)?m:V().isPaused()?!1:f?!ne(ge):ne(ge)||n.revalidateIfStale},Er=function(){return!g||!r?!1:Tr.isValidating?!0:Cr&&Yt()},Pt=Er(),dt=Dl({data:ge,error:xe,isValidating:Pt},q),Pe=dt[0],At=dt[1],Dt=dt[2],Be=(0,L.useCallback)(function(N){return li(void 0,void 0,void 0,function(){var ie,te,j,Me,qe,de,K,_e,se,Ae,Ve,De,Qe;return fi(this,function(Ge){switch(Ge.label){case 0:if(ie=Z.current,!g||!ie||q.current||V().isPaused())return[2,!1];Me=!0,qe=N||{},de=!E[g]||!qe.dedupe,K=function(){return!q.current&&g===O.current&&P.current},_e=function(){var Xe=E[g];Xe&&Xe[1]===j&&delete E[g]},se={isValidating:!1},Ae=function(){oe({isValidating:!1}),K()&&Dt(se)},oe({isValidating:!0}),Dt({isValidating:!0}),Ge.label=1;case 1:return Ge.trys.push([1,3,,4]),de&&(dr(o,g,Pe.current.data,Pe.current.error,!0),n.loadingTimeout&&!o.get(g)&&setTimeout(function(){Me&&K()&&V().onLoadingSlow(g,n)},n.loadingTimeout),E[g]=[ie.apply(void 0,D),Kn()]),Qe=E[g],te=Qe[0],j=Qe[1],[4,te];case 2:return te=Ge.sent(),de&&setTimeout(_e,n.dedupingInterval),!E[g]||E[g][1]!==j?(de&&K()&&V().onDiscarded(g),[2,!1]):(oe({error:ee}),se.error=ee,Ve=S[g],!ne(Ve)&&(j<=Ve[0]||j<=Ve[1]||Ve[1]===0)?(Ae(),de&&K()&&V().onDiscarded(g),[2,!1]):(i(Pe.current.data,te)?se.data=Pe.current.data:se.data=te,i(o.get(g),te)||o.set(g,te),de&&K()&&V().onSuccess(te,g,n),[3,4]));case 3:return De=Ge.sent(),_e(),V().isPaused()||(oe({error:De}),se.error=De,de&&K()&&(V().onError(De,g,n),(typeof n.shouldRetryOnError=="boolean"&&n.shouldRetryOnError||wt(n.shouldRetryOnError)&&n.shouldRetryOnError(De))&&ft()&&V().onErrorRetry(De,g,n,Be,{retryCount:(qe.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Me=!1,Ae(),K()&&de&&dr(o,g,se.data,se.error,!1),[2,!0]}})})},[g]),Se=(0,L.useCallback)(bi.bind(ee,o,function(){return O.current}),[]);if(fr(function(){Z.current=r,X.current=n}),fr(function(){if(!!g){var N=g!==O.current,ie=Be.bind(ee,Vn),te=function(K,_e,se){Dt(ze({error:_e,isValidating:se},i(Pe.current.data,K)?ee:{data:K}))},j=0,Me=function(K){if(K==mi){var _e=Date.now();V().revalidateOnFocus&&_e>j&&ft()&&(j=_e+V().focusThrottleInterval,ie())}else if(K==hi)V().revalidateOnReconnect&&ft()&&ie();else if(K==pi)return Be()},qe=ui(g,w,te),de=ui(g,y,Me);return q.current=!1,O.current=g,P.current=!0,N&&Dt({data:ge,error:xe,isValidating:Pt}),Yt()&&(ne(ge)||sn?ie():Tl(ie)),function(){q.current=!0,qe(),de()}}},[g,Be]),fr(function(){var N;function ie(){var j=wt(p)?p(ge):p;j&&N!==-1&&(N=setTimeout(te,j))}function te(){!Pe.current.error&&(c||V().isVisible())&&(_||V().isOnline())?Be(Vn).then(ie):ie()}return ie(),function(){N&&(clearTimeout(N),N=-1)}},[p,c,_,Be]),(0,L.useDebugValue)(ge),f&&ne(ge)&&g)throw Z.current=r,X.current=n,q.current=!1,ne(xe)?Be(Vn):xe;return{mutate:Se,get data(){return At.data=!0,ge},get error(){return At.error=!0,xe},get isValidating(){return At.isValidating=!0,Pt}}},dd=lr.defineProperty(Al,"default",{value:Si});var vi=Wl(Fl);var Ri=require("@raycast/api"),un=()=>(0,Ri.getPreferenceValues)();var rs=Ce(require("node:http"),1),ns=Ce(require("node:https"),1),Rt=Ce(require("node:zlib"),1),be=Ce(require("node:stream"),1),wr=require("node:buffer");function xl(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let n=t.substring(5,r).split(";"),o="",i=!1,u=n[0]||"text/plain",f=u;for(let _=1;_<n.length;_++)n[_]==="base64"?i=!0:(f+=`;${n[_]}`,n[_].indexOf("charset=")===0&&(o=n[_].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let m=i?"base64":"ascii",p=unescape(t.substring(r+1)),c=Buffer.from(p,m);return c.type=u,c.typeFull=f,c.charset=o,c}var Ti=xl;var we=Ce(require("node:stream"),1),$e=require("node:util"),he=require("node:buffer");mr();fn();var ot=class extends Error{constructor(r,n){super(r);Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var me=class extends ot{constructor(r,n,o){super(r,n);o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var dn=Symbol.toStringTag,ia=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[dn]==="URLSearchParams",pr=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[dn]),Fi=t=>typeof t=="object"&&(t[dn]==="AbortSignal"||t[dn]==="EventTarget"),xi=(t,r)=>{let n=new URL(r).hostname,o=new URL(t).hostname;return n===o||n.endsWith(`.${o}`)};var Gl=(0,$e.promisify)(we.default.pipeline),fe=Symbol("Body internals"),je=class{constructor(r,{size:n=0}={}){let o=null;r===null?r=null:ia(r)?r=he.Buffer.from(r.toString()):pr(r)||he.Buffer.isBuffer(r)||($e.types.isAnyArrayBuffer(r)?r=he.Buffer.from(r):ArrayBuffer.isView(r)?r=he.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof we.default||(r instanceof _t?(r=Wi(r),o=r.type.split("=")[1]):r=he.Buffer.from(String(r))));let i=r;he.Buffer.isBuffer(r)?i=we.default.Readable.from(r):pr(r)&&(i=we.default.Readable.from(r.stream())),this[fe]={body:r,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,r instanceof we.default&&r.on("error",u=>{let f=u instanceof ot?u:new me(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[fe].error=f})}get body(){return this[fe].stream}get bodyUsed(){return this[fe].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:n,byteLength:o}=await la(this);return r.slice(n,n+o)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let o=new _t,i=new URLSearchParams(await this.text());for(let[u,f]of i)o.append(u,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(zi(),Ui));return n(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[fe].body&&this[fe].body.type||"",n=await this.arrayBuffer();return new Ne([n],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await la(this);return new TextDecoder().decode(r)}buffer(){return la(this)}};je.prototype.buffer=(0,$e.deprecate)(je.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(je.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,$e.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function la(t){if(t[fe].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[fe].disturbed=!0,t[fe].error)throw t[fe].error;let{body:r}=t;if(r===null)return he.Buffer.alloc(0);if(!(r instanceof we.default))return he.Buffer.alloc(0);let n=[],o=0;try{for await(let i of r){if(t.size>0&&o+i.length>t.size){let u=new me(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(u),u}o+=i.length,n.push(i)}}catch(i){throw i instanceof ot?i:new me(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?he.Buffer.from(n.join("")):he.Buffer.concat(n,o)}catch(i){throw new me(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new me(`Premature close of server response while trying to fetch ${t.url}`)}var zt=(t,r)=>{let n,o,{body:i}=t[fe];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof we.default&&typeof i.getBoundary!="function"&&(n=new we.PassThrough({highWaterMark:r}),o=new we.PassThrough({highWaterMark:r}),i.pipe(n),i.pipe(o),t[fe].stream=n,i=o),i},Xl=(0,$e.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),hn=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":ia(t)?"application/x-www-form-urlencoded;charset=UTF-8":pr(t)?t.type||null:he.Buffer.isBuffer(t)||$e.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof _t?`multipart/form-data; boundary=${r[fe].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${Xl(t)}`:t instanceof we.default?null:"text/plain;charset=UTF-8",Ni=t=>{let{body:r}=t[fe];return r===null?0:pr(r)?r.size:he.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},ji=async(t,{body:r})=>{r===null?t.end():await Gl(r,t)};var fa=require("node:util"),yr=Ce(require("node:http"),1),pn=typeof yr.default.validateHeaderName=="function"?yr.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},da=typeof yr.default.validateHeaderValue=="function"?yr.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},pe=class extends URLSearchParams{constructor(r){let n=[];if(r instanceof pe){let o=r.raw();for(let[i,u]of Object.entries(o))n.push(...u.map(f=>[i,f]))}else if(r!=null)if(typeof r=="object"&&!fa.types.isBoxedPrimitive(r)){let o=r[Symbol.iterator];if(o==null)n.push(...Object.entries(r));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...r].map(i=>{if(typeof i!="object"||fa.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");n=n.length>0?n.map(([o,i])=>(pn(o),da(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0;super(n);return new Proxy(this,{get(o,i,u){switch(i){case"append":case"set":return(f,m)=>(pn(f),da(f,String(m)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(pn(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let n=this.getAll(r);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(r)&&(o=o.toLowerCase()),o}forEach(r,n=void 0){for(let o of this.keys())Reflect.apply(r,n,[this.get(o),o,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,n)=>(r[n]=this.getAll(n),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,n)=>{let o=this.getAll(n);return n==="host"?r[n]=o[0]:r[n]=o.length>1?o:o[0],r},{})}};Object.defineProperties(pe.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function $i(t=[]){return new pe(t.reduce((r,n,o,i)=>(o%2===0&&r.push(i.slice(o,o+2)),r),[]).filter(([r,n])=>{try{return pn(r),da(r,String(n)),!0}catch{return!1}}))}var Kl=new Set([301,302,303,307,308]),bn=t=>Kl.has(t);var Ee=Symbol("Response internals"),ae=class extends je{constructor(r=null,n={}){super(r,n);let o=n.status!=null?n.status:200,i=new pe(n.headers);if(r!==null&&!i.has("Content-Type")){let u=hn(r,this);u&&i.append("Content-Type",u)}this[Ee]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Ee].type}get url(){return this[Ee].url||""}get status(){return this[Ee].status}get ok(){return this[Ee].status>=200&&this[Ee].status<300}get redirected(){return this[Ee].counter>0}get statusText(){return this[Ee].statusText}get headers(){return this[Ee].headers}get highWaterMark(){return this[Ee].highWaterMark}clone(){return new ae(zt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,n=302){if(!bn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new ae(null,{headers:{location:new URL(r).toString()},status:n})}static error(){let r=new ae(null,{status:0,statusText:""});return r[Ee].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(ae.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Zi=require("node:url"),es=require("node:util");var Hi=t=>{if(t.search)return t.search;let r=t.href.length-1,n=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-n.length]==="?"?"?":""};var Vi=require("node:net");function Yi(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var Qi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Gi="strict-origin-when-cross-origin";function Xi(t){if(!Qi.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Jl(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),n=(0,Vi.isIP)(r);return n===4&&/^127\./.test(r)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(t.host)?!1:t.protocol==="file:"}function Nt(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Jl(t)}function Ki(t,{referrerURLCallback:r,referrerOriginCallback:n}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let o=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,u=Yi(i),f=Yi(i,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),n&&(f=n(f));let m=new URL(t.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Nt(u)&&!Nt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:Nt(u)&&!Nt(m)?"no-referrer":f;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:f;case"no-referrer-when-downgrade":return Nt(u)&&!Nt(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Ji(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of r)o&&Qi.has(o)&&(n=o);return n}var G=Symbol("Request internals"),gn=t=>typeof t=="object"&&typeof t[G]=="object",Zl=(0,es.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),st=class extends je{constructor(r,n={}){let o;if(gn(r)?o=new URL(r.url):(o=new URL(r),r={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||r.method||"GET";if(i=i.toUpperCase(),"data"in n&&Zl(),(n.body!=null||gn(r)&&r.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:gn(r)&&r.body!==null?zt(r):null;super(u,{size:n.size||r.size||0});let f=new pe(n.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let c=hn(u,this);c&&f.set("Content-Type",c)}let m=gn(r)?r.signal:null;if("signal"in n&&(m=n.signal),m!=null&&!Fi(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?r.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let c=new URL(p);p=/^about:(\/\/)?client$/.test(c)?"client":c}else p=void 0;this[G]={method:i,redirect:n.redirect||r.redirect||"follow",headers:f,parsedURL:o,signal:m,referrer:p},this.follow=n.follow===void 0?r.follow===void 0?20:r.follow:n.follow,this.compress=n.compress===void 0?r.compress===void 0?!0:r.compress:n.compress,this.counter=n.counter||r.counter||0,this.agent=n.agent||r.agent,this.highWaterMark=n.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||r.referrerPolicy||""}get method(){return this[G].method}get url(){return(0,Zi.format)(this[G].parsedURL)}get headers(){return this[G].headers}get redirect(){return this[G].redirect}get signal(){return this[G].signal}get referrer(){if(this[G].referrer==="no-referrer")return"";if(this[G].referrer==="client")return"about:client";if(this[G].referrer)return this[G].referrer.toString()}get referrerPolicy(){return this[G].referrerPolicy}set referrerPolicy(r){this[G].referrerPolicy=Xi(r)}clone(){return new st(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(st.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ts=t=>{let{parsedURL:r}=t[G],n=new pe(t[G].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(o="0"),t.body!==null){let m=Ni(t);typeof m=="number"&&!Number.isNaN(m)&&(o=String(m))}o&&n.set("Content-Length",o),t.referrerPolicy===""&&(t.referrerPolicy=Gi),t.referrer&&t.referrer!=="no-referrer"?t[G].referrer=Ki(t):t[G].referrer="no-referrer",t[G].referrer instanceof URL&&n.set("Referer",t.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(r)),!n.has("Connection")&&!i&&n.set("Connection","close");let u=Hi(r),f={path:r.pathname+u,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:r,options:f}};var ca=class extends ot{constructor(r,n="aborted"){super(r,n)}};fn();ua();var ef=new Set(["data:","http:","https:"]);async function yn(t,r){return new Promise((n,o)=>{let i=new st(t,r),{parsedURL:u,options:f}=ts(i);if(!ef.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ti(i.url),E=new ae(S,{headers:{"Content-Type":S.typeFull}});n(E);return}let m=(u.protocol==="https:"?ns.default:rs.default).request,{signal:p}=i,c=null,_=()=>{let S=new ca("The operation was aborted.");o(S),i.body&&i.body instanceof be.default.Readable&&i.body.destroy(S),!(!c||!c.body)&&c.body.emit("error",S)};if(p&&p.aborted){_();return}let v=()=>{_(),w()},y=m(u.toString(),f);p&&p.addEventListener("abort",v);let w=()=>{y.abort(),p&&p.removeEventListener("abort",v)};y.on("error",S=>{o(new me(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),w()}),tf(y,S=>{c.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(c&&E<S._eventsCount&&!T){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",g)}})}),y.on("response",S=>{y.setTimeout(0);let E=$i(S.rawHeaders);if(bn(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,i.url)}catch{if(i.redirect!=="manual"){o(new me(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),w();return}}switch(i.redirect){case"error":o(new me(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(q===null)break;if(i.counter>=i.follow){o(new me(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let O={headers:new pe(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:zt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!xi(i.url,q))for(let X of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(X);if(S.statusCode!==303&&i.body&&r.body instanceof be.default.Readable){o(new me("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let Z=Ji(E);Z&&(O.referrerPolicy=Z),n(yn(new st(q,O))),w();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&S.once("end",()=>{p.removeEventListener("abort",v)});let T=(0,be.pipeline)(S,new be.PassThrough,P=>{P&&o(P)});process.version<"v12.10"&&S.on("aborted",v);let g={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},D=E.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||D===null||S.statusCode===204||S.statusCode===304){c=new ae(T,g),n(c);return}let I={flush:Rt.default.Z_SYNC_FLUSH,finishFlush:Rt.default.Z_SYNC_FLUSH};if(D==="gzip"||D==="x-gzip"){T=(0,be.pipeline)(T,Rt.default.createGunzip(I),P=>{P&&o(P)}),c=new ae(T,g),n(c);return}if(D==="deflate"||D==="x-deflate"){let P=(0,be.pipeline)(S,new be.PassThrough,q=>{q&&o(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,be.pipeline)(T,Rt.default.createInflate(),O=>{O&&o(O)}):T=(0,be.pipeline)(T,Rt.default.createInflateRaw(),O=>{O&&o(O)}),c=new ae(T,g),n(c)}),P.once("end",()=>{c||(c=new ae(T,g),n(c))});return}if(D==="br"){T=(0,be.pipeline)(T,Rt.default.createBrotliDecompress(),P=>{P&&o(P)}),c=new ae(T,g),n(c);return}c=new ae(T,g),n(c)}),ji(y,i).catch(o)})}function tf(t,r){let n=wr.Buffer.from(`0\r
\r
`),o=!1,i=!1,u;t.on("response",f=>{let{headers:m}=f;o=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),t.on("socket",f=>{let m=()=>{if(o&&!i){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};f.prependListener("close",m),t.on("abort",()=>{f.removeListener("close",m)}),f.on("data",p=>{i=wr.Buffer.compare(p.slice(-5),n)===0,!i&&u&&(i=wr.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&wr.Buffer.compare(p.slice(-2),n.slice(3))===0),u=p})})}var as=Ce(an());var{token:rf}=un(),nf={method:"get",headers:{Authorization:`Token ${rf}`}},os=async(t,r)=>{let n=await yn(`https://readwise.io/api${t}?${as.default.stringify(r)}`,nf),o=await n.json();if(!n.ok){let i=new Error("An error occurred while fetching the data.");throw i.status=n.status,i}return o};var is=require("react"),jt=require("@raycast/api"),ss=t=>{(0,is.useEffect)(()=>{t&&(t.status===401||t.status===403?(0,jt.showToast)(jt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,jt.showToast)(jt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[t])};var{pageSize:af}=un(),of={page_size:af},ls=(t,r)=>{let n=r||of,[o,i]=(0,us.useState)(n),{data:u,error:f,isValidating:m}=vi([t,o],os);return ss(f),{currentParams:o,data:u,defaultParams:n,loading:!u&&!f||m,setParams:i}};var sf="/v2/books";function ds(){let{data:t,loading:r,setParams:n,defaultParams:o}=ls(sf);return{data:t,loading:r,refetch:async i=>{n(jn(jn({},o),fs.default.parse(i)))}}}var Ye=require("@raycast/api");var J=require("@raycast/api");var ma=require("@raycast/api"),cs=({tags:t})=>t.length===0?null:_jsx(ma.Detail.Metadata.TagList,{title:"Tag"},t.map(r=>_jsx(ma.Detail.Metadata.TagList.Item,{key:r.name,text:r.name})));var Pa=Ce(an());function M(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function ha(t){return M(1,arguments),t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function H(t){M(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function pa(t){if(M(1,arguments),!ha(t)&&typeof t!="number")return!1;var r=H(t);return!isNaN(Number(r))}var uf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lf=function(t,r,n){var o,i=uf[t];return typeof i=="string"?o=i:r===1?o=i.one:o=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},ms=lf;function Sr(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,o=t.formats[n]||t.formats[t.defaultWidth];return o}}var ff={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},df={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cf={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mf={date:Sr({formats:ff,defaultWidth:"full"}),time:Sr({formats:df,defaultWidth:"full"}),dateTime:Sr({formats:cf,defaultWidth:"full"})},hs=mf;var hf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pf=function(t,r,n,o){return hf[t]},ps=pf;function Tt(t){return function(r,n){var o=n||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&t.formattingValues){var f=t.defaultFormattingWidth||t.defaultWidth,m=o.width?String(o.width):f;u=t.formattingValues[m]||t.formattingValues[f]}else{var p=t.defaultWidth,c=o.width?String(o.width):t.defaultWidth;u=t.values[c]||t.values[p]}var _=t.argumentCallback?t.argumentCallback(r):r;return u[_]}}var bf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Sf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_f={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vf=function(t,r){var n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rf={ordinalNumber:vf,era:Tt({values:bf,defaultWidth:"wide"}),quarter:Tt({values:gf,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Tt({values:yf,defaultWidth:"wide"}),day:Tt({values:wf,defaultWidth:"wide"}),dayPeriod:Tt({values:Sf,defaultWidth:"wide",formattingValues:_f,defaultFormattingWidth:"wide"})},bs=Rf;function Ct(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,i=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=r.match(i);if(!u)return null;var f=u[0],m=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?Cf(m,function(v){return v.test(f)}):Tf(m,function(v){return v.test(f)}),c;c=t.valueCallback?t.valueCallback(p):p,c=n.valueCallback?n.valueCallback(c):c;var _=r.slice(f.length);return{value:c,rest:_}}}function Tf(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function Cf(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function ba(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(t.matchPattern);if(!o)return null;var i=o[0],u=r.match(t.parsePattern);if(!u)return null;var f=t.valueCallback?t.valueCallback(u[0]):u[0];f=n.valueCallback?n.valueCallback(f):f;var m=r.slice(i.length);return{value:f,rest:m}}}var Ef=/^(\d+)(th|st|nd|rd)?/i,Pf=/\d+/i,Af={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Df={any:[/^b/i,/^(a|c)/i]},Of={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kf={any:[/1/i,/2/i,/3/i,/4/i]},Wf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ff={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lf={ordinalNumber:ba({matchPattern:Ef,parsePattern:Pf,valueCallback:function(t){return parseInt(t,10)}}),era:Ct({matchPatterns:Af,defaultMatchWidth:"wide",parsePatterns:Df,defaultParseWidth:"any"}),quarter:Ct({matchPatterns:Of,defaultMatchWidth:"wide",parsePatterns:kf,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ct({matchPatterns:Wf,defaultMatchWidth:"wide",parsePatterns:Ff,defaultParseWidth:"any"}),day:Ct({matchPatterns:xf,defaultMatchWidth:"wide",parsePatterns:Bf,defaultParseWidth:"any"}),dayPeriod:Ct({matchPatterns:Mf,defaultMatchWidth:"any",parsePatterns:qf,defaultParseWidth:"any"})},gs=Lf;var If={code:"en-US",formatDistance:ms,formatLong:hs,formatRelative:ps,localize:bs,match:gs,options:{weekStartsOn:0,firstWeekContainsDate:1}},ys=If;function Q(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function ga(t,r){M(2,arguments);var n=H(t).getTime(),o=Q(r);return new Date(n+o)}function ya(t,r){M(2,arguments);var n=Q(r);return ga(t,-n)}var Uf=864e5;function wa(t){M(1,arguments);var r=H(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var o=r.getTime(),i=n-o;return Math.floor(i/Uf)+1}function ut(t){M(1,arguments);var r=1,n=H(t),o=n.getUTCDay(),i=(o<r?7:0)+o-r;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function _r(t){M(1,arguments);var r=H(t),n=r.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=ut(o),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var f=ut(u);return r.getTime()>=i.getTime()?n+1:r.getTime()>=f.getTime()?n:n-1}function Sa(t){M(1,arguments);var r=_r(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var o=ut(n);return o}var zf=6048e5;function _a(t){M(1,arguments);var r=H(t),n=ut(r).getTime()-Sa(r).getTime();return Math.round(n/zf)+1}function lt(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,u=i==null?0:Q(i),f=n.weekStartsOn==null?u:Q(n.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=H(t),p=m.getUTCDay(),c=(p<f?7:0)+p-f;return m.setUTCDate(m.getUTCDate()-c),m.setUTCHours(0,0,0,0),m}function vr(t,r){M(1,arguments);var n=H(t),o=n.getUTCFullYear(),i=r||{},u=i.locale,f=u&&u.options&&u.options.firstWeekContainsDate,m=f==null?1:Q(f),p=i.firstWeekContainsDate==null?m:Q(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(o+1,0,p),c.setUTCHours(0,0,0,0);var _=lt(c,r),v=new Date(0);v.setUTCFullYear(o,0,p),v.setUTCHours(0,0,0,0);var y=lt(v,r);return n.getTime()>=_.getTime()?o+1:n.getTime()>=y.getTime()?o:o-1}function va(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=i==null?1:Q(i),f=n.firstWeekContainsDate==null?u:Q(n.firstWeekContainsDate),m=vr(t,r),p=new Date(0);p.setUTCFullYear(m,0,f),p.setUTCHours(0,0,0,0);var c=lt(p,r);return c}var Nf=6048e5;function Ra(t,r){M(1,arguments);var n=H(t),o=lt(n,r).getTime()-va(n,r).getTime();return Math.round(o/Nf)+1}function B(t,r){for(var n=t<0?"-":"",o=Math.abs(t).toString();o.length<r;)o="0"+o;return n+o}var jf={y:function(t,r){var n=t.getUTCFullYear(),o=n>0?n:1-n;return B(r==="yy"?o%100:o,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):B(n+1,2)},d:function(t,r){return B(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return B(t.getUTCHours()%12||12,r.length)},H:function(t,r){return B(t.getUTCHours(),r.length)},m:function(t,r){return B(t.getUTCMinutes(),r.length)},s:function(t,r){return B(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,o=t.getUTCMilliseconds(),i=Math.floor(o*Math.pow(10,n-3));return B(i,r.length)}},He=jf;var $t={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$f={G:function(t,r,n){var o=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var o=t.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return He.y(t,r)},Y:function(t,r,n,o){var i=vr(t,o),u=i>0?i:1-i;if(r==="YY"){var f=u%100;return B(f,2)}return r==="Yo"?n.ordinalNumber(u,{unit:"year"}):B(u,r.length)},R:function(t,r){var n=_r(t);return B(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return B(n,r.length)},Q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return B(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return B(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){var o=t.getUTCMonth();switch(r){case"M":case"MM":return He.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){var o=t.getUTCMonth();switch(r){case"L":return String(o+1);case"LL":return B(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){var i=Ra(t,o);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):B(i,r.length)},I:function(t,r,n){var o=_a(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):B(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):He.d(t,r)},D:function(t,r,n){var o=wa(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):B(o,r.length)},E:function(t,r,n){var o=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(u);case"ee":return B(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(u);case"cc":return B(u,r.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var o=t.getUTCDay(),i=o===0?7:o;switch(r){case"i":return String(i);case"ii":return B(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){var o=t.getUTCHours(),i=o/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var o=t.getUTCHours(),i;switch(o===12?i=$t.noon:o===0?i=$t.midnight:i=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var o=t.getUTCHours(),i;switch(o>=17?i=$t.evening:o>=12?i=$t.afternoon:o>=4?i=$t.morning:i=$t.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var o=t.getUTCHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return He.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):He.H(t,r)},K:function(t,r,n){var o=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,r.length)},k:function(t,r,n){var o=t.getUTCHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):He.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):He.s(t,r)},S:function(t,r){return He.S(t,r)},X:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();if(u===0)return"Z";switch(r){case"X":return Ss(u);case"XXXX":case"XX":return Et(u);case"XXXXX":case"XXX":default:return Et(u,":")}},x:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"x":return Ss(u);case"xxxx":case"xx":return Et(u);case"xxxxx":case"xxx":default:return Et(u,":")}},O:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+ws(u,":");case"OOOO":default:return"GMT"+Et(u,":")}},z:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+ws(u,":");case"zzzz":default:return"GMT"+Et(u,":")}},t:function(t,r,n,o){var i=o._originalDate||t,u=Math.floor(i.getTime()/1e3);return B(u,r.length)},T:function(t,r,n,o){var i=o._originalDate||t,u=i.getTime();return B(u,r.length)}};function ws(t,r){var n=t>0?"-":"+",o=Math.abs(t),i=Math.floor(o/60),u=o%60;if(u===0)return n+String(i);var f=r||"";return n+String(i)+f+B(u,2)}function Ss(t,r){if(t%60===0){var n=t>0?"-":"+";return n+B(Math.abs(t)/60,2)}return Et(t,r)}function Et(t,r){var n=r||"",o=t>0?"-":"+",i=Math.abs(t),u=B(Math.floor(i/60),2),f=B(i%60,2);return o+u+n+f}var _s=$f;function vs(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}}function Rs(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}}function Hf(t,r){var n=t.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return vs(t,r);var u;switch(o){case"P":u=r.dateTime({width:"short"});break;case"PP":u=r.dateTime({width:"medium"});break;case"PPP":u=r.dateTime({width:"long"});break;case"PPPP":default:u=r.dateTime({width:"full"});break}return u.replace("{{date}}",vs(o,r)).replace("{{time}}",Rs(i,r))}var Yf={p:Rs,P:Hf},Ts=Yf;function Ta(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}var Vf=["D","DD"],Qf=["YY","YYYY"];function Cs(t){return Vf.indexOf(t)!==-1}function Es(t){return Qf.indexOf(t)!==-1}function Ca(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Gf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kf=/^'([^]*?)'?$/,Jf=/''/g,Zf=/[a-zA-Z]/;function Ea(t,r,n){M(2,arguments);var o=String(r),i=n||{},u=i.locale||ys,f=u.options&&u.options.firstWeekContainsDate,m=f==null?1:Q(f),p=i.firstWeekContainsDate==null?m:Q(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=u.options&&u.options.weekStartsOn,_=c==null?0:Q(c),v=i.weekStartsOn==null?_:Q(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var y=H(t);if(!pa(y))throw new RangeError("Invalid time value");var w=Ta(y),S=ya(y,w),E={firstWeekContainsDate:p,weekStartsOn:v,locale:u,_originalDate:y},T=o.match(Xf).map(function(g){var D=g[0];if(D==="p"||D==="P"){var I=Ts[D];return I(g,u.formatLong,E)}return g}).join("").match(Gf).map(function(g){if(g==="''")return"'";var D=g[0];if(D==="'")return ed(g);var I=_s[D];if(I)return!i.useAdditionalWeekYearTokens&&Es(g)&&Ca(g,r,t),!i.useAdditionalDayOfYearTokens&&Cs(g)&&Ca(g,r,t),I(S,g,u.localize,E);if(D.match(Zf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return g}).join("");return T}function ed(t){return t.match(Kf)[1].replace(Jf,"'")}var Aa=t=>Pa.default.stringify(Pa.default.parse(new URL(t).search)),Da=t=>Ea(new Date(t),"MMMM dd, yyyy hh:mm");var Ps=(t,r)=>t?"Loading...":r.toString();var As=({item:t})=>_jsx(J.Detail,{actions:_jsx(J.ActionPanel,null,t.source_url&&_jsx(J.Action.OpenInBrowser,{title:"Open Source",url:t.source_url}),_jsx(J.Action.OpenInBrowser,{title:"Browse Highlights",url:t.highlights_url})),navigationTitle:"Source Detail",metadata:_jsx(J.Detail.Metadata,null,_jsx(J.Detail.Metadata.Label,{title:"Author",text:t.author}),_jsx(J.Detail.Metadata.Label,{title:"Category",text:t.category}),_jsx(J.Detail.Metadata.Label,{title:"Source",text:t.source}),_jsx(J.Detail.Metadata.Label,{title:"Last Highlighted At",text:Da(t.last_highlight_at)}),_jsx(J.Detail.Metadata.Label,{title:"Updated At",text:Da(t.updated)}),_jsx(cs,{tags:t.tags}),_jsx(J.Detail.Metadata.Link,{title:"Highlights",target:t.highlights_url,text:"Link"}),_jsx(J.Detail.Metadata.Label,{title:"Source",text:t.source}),t.source_url&&_jsx(J.Detail.Metadata.Link,{title:"Source URL",target:t.source_url,text:"Link"}),_jsx(J.Detail.Metadata.Separator,null)),markdown:`
## ${t.title} - ${t.author}

![cover image](${t.cover_image_url})
`});var Ds=({actions:t,item:r})=>_jsx(Ye.List.Item,{title:r.title,subtitle:r.author,keywords:r.tags.map(n=>n.name),actions:_jsx(Ye.ActionPanel,null,_jsx(Ye.Action.Push,{icon:Ye.Icon.Document,title:"Show Details",target:_jsx(As,{item:r})}),_jsx(Ye.Action.OpenInBrowser,{title:"Open in Browser",url:r.highlights_url}),t)});var Oa=require("@raycast/api");var td=()=>_jsx(Oa.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}}),Os=({actions:t,data:r,loading:n,listView:o})=>{let i=r?.results.length||0,u=Ps(n,i);return _jsx(_jsxFragment,null,_jsx(td,null),_jsx(Oa.List.Section,{title:"Results",subtitle:u},r?.results.map(f=>_jsx(o,{key:f.id,item:f,actions:t}))))};var wn=require("@raycast/api"),ks=({onNextAction:t,onPreviousAction:r,onHomeAction:n})=>_jsx(_jsxFragment,null,t&&_jsx(wn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:t,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),r&&_jsx(_jsxFragment,null,_jsx(wn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),_jsx(wn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:n,shortcut:{modifiers:["cmd"],key:"0"}})));var rd=[{label:"Articles",category:"articles"},{label:"Book",category:"books"},{label:"Podcasts",category:"podcasts"},{label:"Supplementals",category:"supplementals"},{label:"Tweets",category:"tweets"}];function Ws(){let{data:t,loading:r,refetch:n}=ds(),{next:o,previous:i}=t||{};return _jsx(Rr.List,{isLoading:r,enableFiltering:!0,searchBarAccessory:_jsx(Rr.List.Dropdown,{tooltip:"Search Options",onChange:n},_jsx(Rr.List.Dropdown.Item,{title:"All Categories",value:""}),rd.map(({label:u,category:f})=>_jsx(Rr.List.Dropdown.Item,{key:f,title:u,value:`category=${f}&page=1`})))},_jsx(Os,{loading:r,data:t,actions:_jsx(ks,{onHomeAction:()=>n(""),onNextAction:o?()=>n(Aa(o)):void 0,onPreviousAction:i?()=>i&&n(Aa(i)):void 0}),listView:Ds}))}module.exports=nl(nd);0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
