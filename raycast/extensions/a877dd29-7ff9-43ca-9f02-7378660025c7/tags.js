var au=Object.create;var Gt=Object.defineProperty;var iu=Object.getOwnPropertyDescriptor;var su=Object.getOwnPropertyNames,aa=Object.getOwnPropertySymbols,uu=Object.getPrototypeOf,sa=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable;var ia=(n,r,o)=>r in n?Gt(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,An=(n,r)=>{for(var o in r||(r={}))sa.call(r,o)&&ia(n,o,r[o]);if(aa)for(var o of aa(r))lu.call(r,o)&&ia(n,o,r[o]);return n};var ua=n=>Gt(n,"__esModule",{value:!0});var Kt=(n,r)=>()=>(n&&(r=n(n=0)),r);var Ze=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),la=(n,r)=>{for(var o in r)Gt(n,o,{get:r[o],enumerable:!0})},fa=(n,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of su(r))!sa.call(n,s)&&(o||s!=="default")&&Gt(n,s,{get:()=>r[s],enumerable:!(i=iu(r,s))||i.enumerable});return n},_e=(n,r)=>fa(ua(Gt(n!=null?au(uu(n)):{},"default",!r&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n),fu=(n=>(r,o)=>n&&n.get(r)||(o=fa(ua({}),r,1),n&&n.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var da=Ze((yl,ca)=>{"use strict";ca.exports=n=>encodeURIComponent(n).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)});var ya=Ze((gl,pa)=>{"use strict";var ba="%[a-f0-9]{2}",ha=new RegExp(ba,"gi"),ma=new RegExp("("+ba+")+","gi");function Pn(n,r){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;r=r||1;var o=n.slice(0,r),i=n.slice(r);return Array.prototype.concat.call([],Pn(o),Pn(i))}function cu(n){try{return decodeURIComponent(n)}catch{for(var r=n.match(ha),o=1;o<r.length;o++)n=Pn(r,o).join(""),r=n.match(ha);return n}}function du(n){for(var r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},o=ma.exec(n);o;){try{r[o[0]]=decodeURIComponent(o[0])}catch{var i=cu(o[0]);i!==o[0]&&(r[o[0]]=i)}o=ma.exec(n)}r["%C2"]="\uFFFD";for(var s=Object.keys(r),l=0;l<s.length;l++){var f=s[l];n=n.replace(new RegExp(f,"g"),r[f])}return n}pa.exports=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return du(n)}}});var Sa=Ze((Sl,ga)=>{"use strict";ga.exports=(n,r)=>{if(!(typeof n=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r==="")return[n];let o=n.indexOf(r);return o===-1?[n]:[n.slice(0,o),n.slice(o+r.length)]}});var wa=Ze((_l,_a)=>{"use strict";_a.exports=function(n,r){for(var o={},i=Object.keys(n),s=Array.isArray(r),l=0;l<i.length;l++){var f=i[l],b=n[f];(s?r.indexOf(f)!==-1:r(f,b,n))&&(o[f]=b)}return o}});var Ur=Ze(oe=>{"use strict";var hu=da(),mu=ya(),Ta=Sa(),bu=wa(),pu=n=>n==null,On=Symbol("encodeFragmentIdentifier");function yu(n){switch(n.arrayFormat){case"index":return r=>(o,i)=>{let s=o.length;return i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[U(r,n),"[",s,"]"].join("")]:[...o,[U(r,n),"[",U(s,n),"]=",U(i,n)].join("")]};case"bracket":return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[U(r,n),"[]"].join("")]:[...o,[U(r,n),"[]=",U(i,n)].join("")];case"colon-list-separator":return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,[U(r,n),":list="].join("")]:[...o,[U(r,n),":list=",U(i,n)].join("")];case"comma":case"separator":case"bracket-separator":{let r=n.arrayFormat==="bracket-separator"?"[]=":"=";return o=>(i,s)=>s===void 0||n.skipNull&&s===null||n.skipEmptyString&&s===""?i:(s=s===null?"":s,i.length===0?[[U(o,n),r,U(s,n)].join("")]:[[i,U(s,n)].join(n.arrayFormatSeparator)])}default:return r=>(o,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?o:i===null?[...o,U(r,n)]:[...o,[U(r,n),"=",U(i,n)].join("")]}}function gu(n){let r;switch(n.arrayFormat){case"index":return(o,i,s)=>{if(r=/\[(\d*)\]$/.exec(o),o=o.replace(/\[\d*\]$/,""),!r){s[o]=i;return}s[o]===void 0&&(s[o]={}),s[o][r[1]]=i};case"bracket":return(o,i,s)=>{if(r=/(\[\])$/.exec(o),o=o.replace(/\[\]$/,""),!r){s[o]=i;return}if(s[o]===void 0){s[o]=[i];return}s[o]=[].concat(s[o],i)};case"colon-list-separator":return(o,i,s)=>{if(r=/(:list)$/.exec(o),o=o.replace(/:list$/,""),!r){s[o]=i;return}if(s[o]===void 0){s[o]=[i];return}s[o]=[].concat(s[o],i)};case"comma":case"separator":return(o,i,s)=>{let l=typeof i=="string"&&i.includes(n.arrayFormatSeparator),f=typeof i=="string"&&!l&&Le(i,n).includes(n.arrayFormatSeparator);i=f?Le(i,n):i;let b=l||f?i.split(n.arrayFormatSeparator).map(p=>Le(p,n)):i===null?i:Le(i,n);s[o]=b};case"bracket-separator":return(o,i,s)=>{let l=/(\[\])$/.test(o);if(o=o.replace(/\[\]$/,""),!l){s[o]=i&&Le(i,n);return}let f=i===null?[]:i.split(n.arrayFormatSeparator).map(b=>Le(b,n));if(s[o]===void 0){s[o]=f;return}s[o]=[].concat(s[o],f)};default:return(o,i,s)=>{if(s[o]===void 0){s[o]=i;return}s[o]=[].concat(s[o],i)}}}function Ea(n){if(typeof n!="string"||n.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function U(n,r){return r.encode?r.strict?hu(n):encodeURIComponent(n):n}function Le(n,r){return r.decode?mu(n):n}function va(n){return Array.isArray(n)?n.sort():typeof n=="object"?va(Object.keys(n)).sort((r,o)=>Number(r)-Number(o)).map(r=>n[r]):n}function Ca(n){let r=n.indexOf("#");return r!==-1&&(n=n.slice(0,r)),n}function Su(n){let r="",o=n.indexOf("#");return o!==-1&&(r=n.slice(o)),r}function Aa(n){n=Ca(n);let r=n.indexOf("?");return r===-1?"":n.slice(r+1)}function Ra(n,r){return r.parseNumbers&&!Number.isNaN(Number(n))&&typeof n=="string"&&n.trim()!==""?n=Number(n):r.parseBooleans&&n!==null&&(n.toLowerCase()==="true"||n.toLowerCase()==="false")&&(n=n.toLowerCase()==="true"),n}function Pa(n,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),Ea(r.arrayFormatSeparator);let o=gu(r),i=Object.create(null);if(typeof n!="string"||(n=n.trim().replace(/^[?#&]/,""),!n))return i;for(let s of n.split("&")){if(s==="")continue;let[l,f]=Ta(r.decode?s.replace(/\+/g," "):s,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?f:Le(f,r),o(Le(l,r),f,i)}for(let s of Object.keys(i)){let l=i[s];if(typeof l=="object"&&l!==null)for(let f of Object.keys(l))l[f]=Ra(l[f],r);else i[s]=Ra(l,r)}return r.sort===!1?i:(r.sort===!0?Object.keys(i).sort():Object.keys(i).sort(r.sort)).reduce((s,l)=>{let f=i[l];return Boolean(f)&&typeof f=="object"&&!Array.isArray(f)?s[l]=va(f):s[l]=f,s},Object.create(null))}oe.extract=Aa;oe.parse=Pa;oe.stringify=(n,r)=>{if(!n)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),Ea(r.arrayFormatSeparator);let o=f=>r.skipNull&&pu(n[f])||r.skipEmptyString&&n[f]==="",i=yu(r),s={};for(let f of Object.keys(n))o(f)||(s[f]=n[f]);let l=Object.keys(s);return r.sort!==!1&&l.sort(r.sort),l.map(f=>{let b=n[f];return b===void 0?"":b===null?U(f,r):Array.isArray(b)?b.length===0&&r.arrayFormat==="bracket-separator"?U(f,r)+"[]":b.reduce(i(f),[]).join("&"):U(f,r)+"="+U(b,r)}).filter(f=>f.length>0).join("&")};oe.parseUrl=(n,r)=>{r=Object.assign({decode:!0},r);let[o,i]=Ta(n,"#");return Object.assign({url:o.split("?")[0]||"",query:Pa(Aa(n),r)},r&&r.parseFragmentIdentifier&&i?{fragmentIdentifier:Le(i,r)}:{})};oe.stringifyUrl=(n,r)=>{r=Object.assign({encode:!0,strict:!0,[On]:!0},r);let o=Ca(n.url).split("?")[0]||"",i=oe.extract(n.url),s=oe.parse(i,{sort:!1}),l=Object.assign(s,n.query),f=oe.stringify(l,r);f&&(f=`?${f}`);let b=Su(n.url);return n.fragmentIdentifier&&(b=`#${r[On]?U(n.fragmentIdentifier,r):n.fragmentIdentifier}`),`${o}${f}${b}`};oe.pick=(n,r,o)=>{o=Object.assign({parseFragmentIdentifier:!0,[On]:!1},o);let{url:i,query:s,fragmentIdentifier:l}=oe.parseUrl(n,o);return oe.stringifyUrl({url:i,query:bu(s,r),fragmentIdentifier:l},o)};oe.exclude=(n,r,o)=>{let i=Array.isArray(r)?s=>!r.includes(s):(s,l)=>!r(s,l);return oe.pick(n,i,o)}});var Ga=Ze((Vr,Qa)=>{(function(n,r){typeof Vr=="object"&&typeof Qa<"u"?r(Vr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(Vr,function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,b=Promise,p=Promise.prototype.then,m=Promise.resolve.bind(b),w=Promise.reject.bind(b);function T(e){return new b(e)}function _(e){return m(e)}function y(e){return w(e)}function g(e,t,a){return p.call(e,t,a)}function A(e,t,a){g(g(e,t,a),void 0,f)}function v(e,t){A(e,t)}function S(e,t){A(e,void 0,t)}function k(e,t,a){return g(e,t,a)}function M(e){g(e,void 0,f)}let C=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=_(void 0);return a=>g(t,a)})();function L(e,t,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,a)}function O(e,t,a){try{return _(L(e,t,a))}catch(u){return y(u)}}let Q=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let a=this._back,u=a;a._elements.length===Q-1&&(u={_elements:[],_next:void 0}),a._elements.push(t),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let t=this._front,a=t,u=this._cursor,c=u+1,d=t._elements,h=d[u];return c===Q&&(a=t._next,c=0),--this._size,this._cursor=c,t!==a&&(this._front=a),d[u]=void 0,h}forEach(t){let a=this._cursor,u=this._front,c=u._elements;for(;(a!==c.length||u._next!==void 0)&&!(a===c.length&&(u=u._next,c=u._elements,a=0,c.length===0));)t(c[a]),++a}peek(){let t=this._front,a=this._cursor;return t._elements[a]}}function N(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Wt(e):t._state==="closed"?ur(e):de(e,t._storedError)}function rt(e,t){let a=e._ownerReadableStream;return ge(a,t)}function ee(e){e._ownerReadableStream._state==="readable"?Oe(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):lr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Pe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Wt(e){e._closedPromise=T((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a})}function de(e,t){Wt(e),Oe(e,t)}function ur(e){Wt(e),kt(e)}function Oe(e,t){e._closedPromise_reject!==void 0&&(M(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function lr(e,t){de(e,t)}function kt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let fr=r("[[AbortSteps]]"),pt=r("[[ErrorSteps]]"),nt=r("[[CancelSteps]]"),Re=r("[[PullSteps]]"),yt=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},gt=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Fe(e){return typeof e=="object"||typeof e=="function"}function be(e,t){if(e!==void 0&&!Fe(e))throw new TypeError(`${t} is not an object.`)}function x(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function te(e){return typeof e=="object"&&e!==null||typeof e=="function"}function K(e,t){if(!te(e))throw new TypeError(`${t} is not an object.`)}function j(e,t,a){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${a}'.`)}function Be(e,t,a){if(e===void 0)throw new TypeError(`${t} is required in '${a}'.`)}function De(e){return Number(e)}function ie(e){return e===0?0:e}function Y(e){return ie(gt(e))}function pe(e,t){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=ie(c),!yt(c))throw new TypeError(`${t} is not a finite number`);if(c=Y(c),c<0||c>u)throw new TypeError(`${t} is outside the accepted range of ${0} to ${u}, inclusive`);return!yt(c)||c===0?0:c}function re(e,t){if(!Qe(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Te(e){return new $e(e)}function Me(e,t){e._reader._readRequests.push(t)}function Ee(e,t,a){let c=e._reader._readRequests.shift();a?c._closeSteps():c._chunkSteps(t)}function je(e){return e._reader._readRequests.length}function Ue(e){let t=e._reader;return!(t===void 0||!Ne(t))}class $e{constructor(t){if(j(t,1,"ReadableStreamDefaultReader"),re(t,"First parameter"),Ge(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");N(this,t),this._readRequests=new V}get closed(){return Ne(this)?this._closedPromise:y(cr("closed"))}cancel(t=void 0){return Ne(this)?this._ownerReadableStream===void 0?y(Pe("cancel")):rt(this,t):y(cr("cancel"))}read(){if(!Ne(this))return y(cr("read"));if(this._ownerReadableStream===void 0)return y(Pe("read from"));let t,a,u=T((d,h)=>{t=d,a=h});return Lt(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>a(d)}),u}releaseLock(){if(!Ne(this))throw cr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ee(this)}}}Object.defineProperties($e.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($e.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ne(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof $e}function Lt(e,t){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?t._closeSteps():a._state==="errored"?t._errorSteps(a._storedError):a._readableStreamController[Re](t)}function cr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let eo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class to{constructor(t,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=a}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?k(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let a=()=>this._returnSteps(t);return this._ongoingPromise?k(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return y(Pe("iterate"));let a,u,c=T((h,R)=>{a=h,u=R});return Lt(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,C(()=>a({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ee(t),a({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,ee(t),u(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return y(Pe("finish iterating"));if(!this._preventCancel){let u=rt(a,t);return ee(a),k(u,()=>({value:t,done:!0}))}return ee(a),_({value:t,done:!0})}}let ro={next(){return no(this)?this._asyncIteratorImpl.next():y(oo("next"))},return(e){return no(this)?this._asyncIteratorImpl.return(e):y(oo("return"))}};eo!==void 0&&Object.setPrototypeOf(ro,eo);function Mi(e,t){let a=Te(e),u=new to(a,t),c=Object.create(ro);return c._asyncIteratorImpl=u,c}function no(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof to}catch{return!1}}function oo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let ao=Number.isNaN||function(e){return e!==e};function qt(e){return e.slice()}function io(e,t,a,u,c){new Uint8Array(e).set(new Uint8Array(a,u,c),t)}function bl(e){return e}function dr(e){return!1}function so(e,t,a){if(e.slice)return e.slice(t,a);let u=a-t,c=new ArrayBuffer(u);return io(c,0,e,t,u),c}function ji(e){return!(typeof e!="number"||ao(e)||e<0)}function uo(e){let t=so(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function nn(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function on(e,t,a){if(!ji(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:a}),e._queueTotalSize+=a}function Ui(e){return e._queue.peek().value}function He(e){e._queue=new V,e._queueTotalSize=0}class It{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!an(this))throw fn("view");return this._view}respond(t){if(!an(this))throw fn("respond");if(j(t,1,"respond"),t=pe(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(this._view.buffer),yr(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!an(this))throw fn("respondWithNewView");if(j(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");dr(t.buffer),gr(this._associatedReadableByteStreamController,t)}}Object.defineProperties(It.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(It.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class St{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ot(this))throw xt("byobRequest");return ln(this)}get desiredSize(){if(!ot(this))throw xt("desiredSize");return yo(this)}close(){if(!ot(this))throw xt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);zt(this)}enqueue(t){if(!ot(this))throw xt("enqueue");if(j(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);pr(this,t)}error(t=void 0){if(!ot(this))throw xt("error");ye(this,t)}[nt](t){lo(this),He(this);let a=this._cancelAlgorithm(t);return br(this),a}[Re](t){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,mo(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Me(a,t),at(this)}}Object.defineProperties(St.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(St.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ot(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof St}function an(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof It}function at(e){if(!Vi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();A(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,at(e))},u=>{ye(e,u)})}function lo(e){un(e),e._pendingPullIntos=new V}function sn(e,t){let a=!1;e._state==="closed"&&(a=!0);let u=fo(t);t.readerType==="default"?Ee(e,u,a):Gi(e,u,a)}function fo(e){let t=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/a)}function hr(e,t,a,u){e._queue.push({buffer:t,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function co(e,t){let a=t.elementSize,u=t.bytesFilled-t.bytesFilled%a,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%a,R=c,P=!1;h>u&&(R=h-t.bytesFilled,P=!0);let B=e._queue;for(;R>0;){let D=B.peek(),W=Math.min(R,D.byteLength),$=t.byteOffset+t.bytesFilled;io(t.buffer,$,D.buffer,D.byteOffset,W),D.byteLength===W?B.shift():(D.byteOffset+=W,D.byteLength-=W),e._queueTotalSize-=W,ho(e,W,t),R-=W}return P}function ho(e,t,a){a.bytesFilled+=t}function mo(e){e._queueTotalSize===0&&e._closeRequested?(br(e),Yt(e._controlledReadableByteStream)):at(e)}function un(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function bo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();co(e,t)&&(mr(e),sn(e._controlledReadableByteStream,t))}}function $i(e,t,a){let u=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=t.buffer,R={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),_o(u,a);return}if(u._state==="closed"){let P=new d(R.buffer,R.byteOffset,0);a._closeSteps(P);return}if(e._queueTotalSize>0){if(co(e,R)){let P=fo(R);mo(e),a._chunkSteps(P);return}if(e._closeRequested){let P=new TypeError("Insufficient bytes to fill elements in the given buffer");ye(e,P),a._errorSteps(P);return}}e._pendingPullIntos.push(R),_o(u,a),at(e)}function Ni(e,t){let a=e._controlledReadableByteStream;if(cn(a))for(;wo(a)>0;){let u=mr(e);sn(a,u)}}function Hi(e,t,a){if(ho(e,t,a),a.bytesFilled<a.elementSize)return;mr(e);let u=a.bytesFilled%a.elementSize;if(u>0){let c=a.byteOffset+a.bytesFilled,d=so(a.buffer,c-u,c);hr(e,d,0,d.byteLength)}a.bytesFilled-=u,sn(e._controlledReadableByteStream,a),bo(e)}function po(e,t){let a=e._pendingPullIntos.peek();un(e),e._controlledReadableByteStream._state==="closed"?Ni(e):Hi(e,t,a),at(e)}function mr(e){return e._pendingPullIntos.shift()}function Vi(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ue(t)&&je(t)>0||cn(t)&&wo(t)>0||yo(e)>0)}function br(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function zt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ye(e,u),u}br(e),Yt(t)}}function pr(e,t){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=t.buffer,c=t.byteOffset,d=t.byteLength,h=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();dr(R.buffer),R.buffer=R.buffer}if(un(e),Ue(a))if(je(a)===0)hr(e,h,c,d);else{e._pendingPullIntos.length>0&&mr(e);let R=new Uint8Array(h,c,d);Ee(a,R,!1)}else cn(a)?(hr(e,h,c,d),bo(e)):hr(e,h,c,d);at(e)}function ye(e,t){let a=e._controlledReadableByteStream;a._state==="readable"&&(lo(e),He(e),br(e),Ho(a,t))}function ln(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),a=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(It.prototype);Qi(u,e,a),e._byobRequest=u}return e._byobRequest}function yo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function yr(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+t>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,po(e,t)}function gr(e,t){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+t.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;a.buffer=t.buffer,po(e,c)}function go(e,t,a,u,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,He(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new V,e._readableStreamController=t;let R=a();A(_(R),()=>{t._started=!0,at(t)},P=>{ye(t,P)})}function Yi(e,t,a){let u=Object.create(St.prototype),c=()=>{},d=()=>_(void 0),h=()=>_(void 0);t.start!==void 0&&(c=()=>t.start(u)),t.pull!==void 0&&(d=()=>t.pull(u)),t.cancel!==void 0&&(h=P=>t.cancel(P));let R=t.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");go(e,u,c,d,h,a,R)}function Qi(e,t,a){e._associatedReadableByteStreamController=t,e._view=a}function fn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function xt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function So(e){return new Mt(e)}function _o(e,t){e._reader._readIntoRequests.push(t)}function Gi(e,t,a){let c=e._reader._readIntoRequests.shift();a?c._closeSteps(t):c._chunkSteps(t)}function wo(e){return e._reader._readIntoRequests.length}function cn(e){let t=e._reader;return!(t===void 0||!it(t))}class Mt{constructor(t){if(j(t,1,"ReadableStreamBYOBReader"),re(t,"First parameter"),Ge(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ot(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");N(this,t),this._readIntoRequests=new V}get closed(){return it(this)?this._closedPromise:y(Sr("closed"))}cancel(t=void 0){return it(this)?this._ownerReadableStream===void 0?y(Pe("cancel")):rt(this,t):y(Sr("cancel"))}read(t){if(!it(this))return y(Sr("read"));if(!ArrayBuffer.isView(t))return y(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return y(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return y(new TypeError("view's buffer must have non-zero byteLength"));if(dr(t.buffer),this._ownerReadableStream===void 0)return y(Pe("read from"));let a,u,c=T((h,R)=>{a=h,u=R});return Ro(this,t,{_chunkSteps:h=>a({value:h,done:!1}),_closeSteps:h=>a({value:h,done:!0}),_errorSteps:h=>u(h)}),c}releaseLock(){if(!it(this))throw Sr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ee(this)}}}Object.defineProperties(Mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function it(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Mt}function Ro(e,t,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):$i(u._readableStreamController,t,a)}function Sr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function jt(e,t){let{highWaterMark:a}=e;if(a===void 0)return t;if(ao(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function _r(e){let{size:t}=e;return t||(()=>1)}function wr(e,t){be(e,t);let a=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:a===void 0?void 0:De(a),size:u===void 0?void 0:Ki(u,`${t} has member 'size' that`)}}function Ki(e,t){return x(e,t),a=>De(e(a))}function Zi(e,t){be(e,t);let a=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,d=e==null?void 0:e.type,h=e==null?void 0:e.write;return{abort:a===void 0?void 0:Ji(a,e,`${t} has member 'abort' that`),close:u===void 0?void 0:Xi(u,e,`${t} has member 'close' that`),start:c===void 0?void 0:es(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:ts(h,e,`${t} has member 'write' that`),type:d}}function Ji(e,t,a){return x(e,a),u=>O(e,t,[u])}function Xi(e,t,a){return x(e,a),()=>O(e,t,[])}function es(e,t,a){return x(e,a),u=>L(e,t,[u])}function ts(e,t,a){return x(e,a),(u,c)=>O(e,t,[u,c])}function To(e,t){if(!_t(e))throw new TypeError(`${t} is not a WritableStream.`)}function rs(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let ns=typeof AbortController=="function";function os(){if(ns)return new AbortController}class Ut{constructor(t={},a={}){t===void 0?t=null:K(t,"First parameter");let u=wr(a,"Second parameter"),c=Zi(t,"First parameter");if(vo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=_r(u),R=jt(u,1);gs(this,c,R,h)}get locked(){if(!_t(this))throw Cr("locked");return wt(this)}abort(t=void 0){return _t(this)?wt(this)?y(new TypeError("Cannot abort a stream that already has a writer")):Rr(this,t):y(Cr("abort"))}close(){return _t(this)?wt(this)?y(new TypeError("Cannot close a stream that already has a writer")):ve(this)?y(new TypeError("Cannot close an already-closing stream")):Co(this):y(Cr("close"))}getWriter(){if(!_t(this))throw Cr("getWriter");return Eo(this)}}Object.defineProperties(Ut.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Eo(e){return new $t(e)}function as(e,t,a,u,c=1,d=()=>1){let h=Object.create(Ut.prototype);vo(h);let R=Object.create(Rt.prototype);return Do(h,R,e,t,a,u,c,d),h}function vo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function _t(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Ut}function wt(e){return e._writer!==void 0}function Rr(e,t){var a;if(e._state==="closed"||e._state==="errored")return _(void 0);e._writableStreamController._abortReason=t,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return _(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,t=void 0);let d=T((h,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:R,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||hn(e,t),d}function Co(e){let t=e._state;if(t==="closed"||t==="errored")return y(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let a=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&Rn(u),Ss(e._writableStreamController),a}function is(e){return T((a,u)=>{let c={_resolve:a,_reject:u};e._writeRequests.push(c)})}function dn(e,t){if(e._state==="writable"){hn(e,t);return}mn(e)}function hn(e,t){let a=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&Po(u,t),!cs(e)&&a._started&&mn(e)}function mn(e){e._state="errored",e._writableStreamController[pt]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){Tr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(t),Tr(e);return}let u=e._writableStreamController[fr](a._reason);A(u,()=>{a._resolve(),Tr(e)},c=>{a._reject(c),Tr(e)})}function ss(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function us(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,dn(e,t)}function ls(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&qo(a)}function fs(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),dn(e,t)}function ve(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function cs(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function ds(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function hs(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Tr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&_n(t,e._storedError)}function bn(e,t){let a=e._writer;a!==void 0&&t!==e._backpressure&&(t?Cs(a):Rn(a)),e._backpressure=t}class $t{constructor(t){if(j(t,1,"WritableStreamDefaultWriter"),To(t,"First parameter"),wt(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let a=t._state;if(a==="writable")!ve(t)&&t._backpressure?Pr(this):Io(this),Ar(this);else if(a==="erroring")wn(this,t._storedError),Ar(this);else if(a==="closed")Io(this),Es(this);else{let u=t._storedError;wn(this,u),Lo(this,u)}}get closed(){return st(this)?this._closedPromise:y(ut("closed"))}get desiredSize(){if(!st(this))throw ut("desiredSize");if(this._ownerWritableStream===void 0)throw Nt("desiredSize");return ys(this)}get ready(){return st(this)?this._readyPromise:y(ut("ready"))}abort(t=void 0){return st(this)?this._ownerWritableStream===void 0?y(Nt("abort")):ms(this,t):y(ut("abort"))}close(){if(!st(this))return y(ut("close"));let t=this._ownerWritableStream;return t===void 0?y(Nt("close")):ve(t)?y(new TypeError("Cannot close an already-closing stream")):Ao(this)}releaseLock(){if(!st(this))throw ut("releaseLock");this._ownerWritableStream!==void 0&&Oo(this)}write(t=void 0){return st(this)?this._ownerWritableStream===void 0?y(Nt("write to")):Fo(this,t):y(ut("write"))}}Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof $t}function ms(e,t){let a=e._ownerWritableStream;return Rr(a,t)}function Ao(e){let t=e._ownerWritableStream;return Co(t)}function bs(e){let t=e._ownerWritableStream,a=t._state;return ve(t)||a==="closed"?_(void 0):a==="errored"?y(t._storedError):Ao(e)}function ps(e,t){e._closedPromiseState==="pending"?_n(e,t):vs(e,t)}function Po(e,t){e._readyPromiseState==="pending"?zo(e,t):As(e,t)}function ys(e){let t=e._ownerWritableStream,a=t._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Wo(t._writableStreamController)}function Oo(e){let t=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Po(e,a),ps(e,a),t._writer=void 0,e._ownerWritableStream=void 0}function Fo(e,t){let a=e._ownerWritableStream,u=a._writableStreamController,c=_s(u,t);if(a!==e._ownerWritableStream)return y(Nt("write to"));let d=a._state;if(d==="errored")return y(a._storedError);if(ve(a)||d==="closed")return y(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return y(a._storedError);let h=is(a);return ws(u,t,c),h}let Bo={};class Rt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!pn(this))throw Sn("abortReason");return this._abortReason}get signal(){if(!pn(this))throw Sn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!pn(this))throw Sn("error");this._controlledWritableStream._state==="writable"&&ko(this,t)}[fr](t){let a=this._abortAlgorithm(t);return Er(this),a}[pt](){He(this)}}Object.defineProperties(Rt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function pn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Rt}function Do(e,t,a,u,c,d,h,R){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,He(t),t._abortReason=void 0,t._abortController=os(),t._started=!1,t._strategySizeAlgorithm=R,t._strategyHWM=h,t._writeAlgorithm=u,t._closeAlgorithm=c,t._abortAlgorithm=d;let P=gn(t);bn(e,P);let B=a(),D=_(B);A(D,()=>{t._started=!0,vr(t)},W=>{t._started=!0,dn(e,W)})}function gs(e,t,a,u){let c=Object.create(Rt.prototype),d=()=>{},h=()=>_(void 0),R=()=>_(void 0),P=()=>_(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=B=>t.write(B,c)),t.close!==void 0&&(R=()=>t.close()),t.abort!==void 0&&(P=B=>t.abort(B)),Do(e,c,d,h,R,P,a,u)}function Er(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ss(e){on(e,Bo,0),vr(e)}function _s(e,t){try{return e._strategySizeAlgorithm(t)}catch(a){return yn(e,a),1}}function Wo(e){return e._strategyHWM-e._queueTotalSize}function ws(e,t,a){try{on(e,t,a)}catch(c){yn(e,c);return}let u=e._controlledWritableStream;if(!ve(u)&&u._state==="writable"){let c=gn(e);bn(u,c)}vr(e)}function vr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){mn(t);return}if(e._queue.length===0)return;let u=Ui(e);u===Bo?Rs(e):Ts(e,u)}function yn(e,t){e._controlledWritableStream._state==="writable"&&ko(e,t)}function Rs(e){let t=e._controlledWritableStream;ds(t),nn(e);let a=e._closeAlgorithm();Er(e),A(a,()=>{ls(t)},u=>{fs(t,u)})}function Ts(e,t){let a=e._controlledWritableStream;hs(a);let u=e._writeAlgorithm(t);A(u,()=>{ss(a);let c=a._state;if(nn(e),!ve(a)&&c==="writable"){let d=gn(e);bn(a,d)}vr(e)},c=>{a._state==="writable"&&Er(e),us(a,c)})}function gn(e){return Wo(e)<=0}function ko(e,t){let a=e._controlledWritableStream;Er(e),hn(a,t)}function Cr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Sn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function ut(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Nt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Ar(e){e._closedPromise=T((t,a)=>{e._closedPromise_resolve=t,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function Lo(e,t){Ar(e),_n(e,t)}function Es(e){Ar(e),qo(e)}function _n(e,t){e._closedPromise_reject!==void 0&&(M(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function vs(e,t){Lo(e,t)}function qo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Pr(e){e._readyPromise=T((t,a)=>{e._readyPromise_resolve=t,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function wn(e,t){Pr(e),zo(e,t)}function Io(e){Pr(e),Rn(e)}function zo(e,t){e._readyPromise_reject!==void 0&&(M(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Cs(e){Pr(e)}function As(e,t){wn(e,t)}function Rn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let xo=typeof DOMException<"u"?DOMException:void 0;function Ps(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Os(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Fs=Ps(xo)?xo:Os();function Mo(e,t,a,u,c,d){let h=Te(e),R=Eo(t);e._disturbed=!0;let P=!1,B=_(void 0);return T((D,W)=>{let $;if(d!==void 0){if($=()=>{let E=new Fs("Aborted","AbortError"),F=[];u||F.push(()=>t._state==="writable"?Rr(t,E):_(void 0)),c||F.push(()=>e._state==="readable"?ge(e,E):_(void 0)),ne(()=>Promise.all(F.map(I=>I())),!0,E)},d.aborted){$();return}d.addEventListener("abort",$)}function Se(){return T((E,F)=>{function I(se){se?E():g(vt(),I,F)}I(!1)})}function vt(){return P?_(!0):g(R._readyPromise,()=>T((E,F)=>{Lt(h,{_chunkSteps:I=>{B=g(Fo(R,I),void 0,o),E(!1)},_closeSteps:()=>E(!0),_errorSteps:F})}))}if(We(e,h._closedPromise,E=>{u?he(!0,E):ne(()=>Rr(t,E),!0,E)}),We(t,R._closedPromise,E=>{c?he(!0,E):ne(()=>ge(e,E),!0,E)}),Z(e,h._closedPromise,()=>{a?he():ne(()=>bs(R))}),ve(t)||t._state==="closed"){let E=new TypeError("the destination writable stream closed before all data could be piped to it");c?he(!0,E):ne(()=>ge(e,E),!0,E)}M(Se());function Ke(){let E=B;return g(B,()=>E!==B?Ke():void 0)}function We(E,F,I){E._state==="errored"?I(E._storedError):S(F,I)}function Z(E,F,I){E._state==="closed"?I():v(F,I)}function ne(E,F,I){if(P)return;P=!0,t._state==="writable"&&!ve(t)?v(Ke(),se):se();function se(){A(E(),()=>ke(F,I),Ct=>ke(!0,Ct))}}function he(E,F){P||(P=!0,t._state==="writable"&&!ve(t)?v(Ke(),()=>ke(E,F)):ke(E,F))}function ke(E,F){Oo(R),ee(h),d!==void 0&&d.removeEventListener("abort",$),E?W(F):D(void 0)}})}class Tt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Or(this))throw Dr("desiredSize");return Tn(this)}close(){if(!Or(this))throw Dr("close");if(!Et(this))throw new TypeError("The stream is not in a state that permits close");Vt(this)}enqueue(t=void 0){if(!Or(this))throw Dr("enqueue");if(!Et(this))throw new TypeError("The stream is not in a state that permits enqueue");return Br(this,t)}error(t=void 0){if(!Or(this))throw Dr("error");Ve(this,t)}[nt](t){He(this);let a=this._cancelAlgorithm(t);return Fr(this),a}[Re](t){let a=this._controlledReadableStream;if(this._queue.length>0){let u=nn(this);this._closeRequested&&this._queue.length===0?(Fr(this),Yt(a)):Ht(this),t._chunkSteps(u)}else Me(a,t),Ht(this)}}Object.defineProperties(Tt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Or(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Tt}function Ht(e){if(!jo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();A(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ht(e))},u=>{Ve(e,u)})}function jo(e){let t=e._controlledReadableStream;return!Et(e)||!e._started?!1:!!(Ge(t)&&je(t)>0||Tn(e)>0)}function Fr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vt(e){if(!Et(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Fr(e),Yt(t))}function Br(e,t){if(!Et(e))return;let a=e._controlledReadableStream;if(Ge(a)&&je(a)>0)Ee(a,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(c){throw Ve(e,c),c}try{on(e,t,u)}catch(c){throw Ve(e,c),c}}Ht(e)}function Ve(e,t){let a=e._controlledReadableStream;a._state==="readable"&&(He(e),Fr(e),Ho(a,t))}function Tn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Bs(e){return!jo(e)}function Et(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Uo(e,t,a,u,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,He(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,e._readableStreamController=t;let R=a();A(_(R),()=>{t._started=!0,Ht(t)},P=>{Ve(t,P)})}function Ds(e,t,a,u){let c=Object.create(Tt.prototype),d=()=>{},h=()=>_(void 0),R=()=>_(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(R=P=>t.cancel(P)),Uo(e,c,d,h,R,a,u)}function Dr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ws(e,t){return ot(e._readableStreamController)?Ls(e):ks(e)}function ks(e,t){let a=Te(e),u=!1,c=!1,d=!1,h=!1,R,P,B,D,W,$=T(Z=>{W=Z});function Se(){return u?(c=!0,_(void 0)):(u=!0,Lt(a,{_chunkSteps:ne=>{C(()=>{c=!1;let he=ne,ke=ne;d||Br(B._readableStreamController,he),h||Br(D._readableStreamController,ke),u=!1,c&&Se()})},_closeSteps:()=>{u=!1,d||Vt(B._readableStreamController),h||Vt(D._readableStreamController),(!d||!h)&&W(void 0)},_errorSteps:()=>{u=!1}}),_(void 0))}function vt(Z){if(d=!0,R=Z,h){let ne=qt([R,P]),he=ge(e,ne);W(he)}return $}function Ke(Z){if(h=!0,P=Z,d){let ne=qt([R,P]),he=ge(e,ne);W(he)}return $}function We(){}return B=En(We,Se,vt),D=En(We,Se,Ke),S(a._closedPromise,Z=>{Ve(B._readableStreamController,Z),Ve(D._readableStreamController,Z),(!d||!h)&&W(void 0)}),[B,D]}function Ls(e){let t=Te(e),a=!1,u=!1,c=!1,d=!1,h=!1,R,P,B,D,W,$=T(E=>{W=E});function Se(E){S(E._closedPromise,F=>{E===t&&(ye(B._readableStreamController,F),ye(D._readableStreamController,F),(!d||!h)&&W(void 0))})}function vt(){it(t)&&(ee(t),t=Te(e),Se(t)),Lt(t,{_chunkSteps:F=>{C(()=>{u=!1,c=!1;let I=F,se=F;if(!d&&!h)try{se=uo(F)}catch(Ct){ye(B._readableStreamController,Ct),ye(D._readableStreamController,Ct),W(ge(e,Ct));return}d||pr(B._readableStreamController,I),h||pr(D._readableStreamController,se),a=!1,u?We():c&&Z()})},_closeSteps:()=>{a=!1,d||zt(B._readableStreamController),h||zt(D._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&yr(B._readableStreamController,0),D._readableStreamController._pendingPullIntos.length>0&&yr(D._readableStreamController,0),(!d||!h)&&W(void 0)},_errorSteps:()=>{a=!1}})}function Ke(E,F){Ne(t)&&(ee(t),t=So(e),Se(t));let I=F?D:B,se=F?B:D;Ro(t,E,{_chunkSteps:At=>{C(()=>{u=!1,c=!1;let Pt=F?h:d;if(F?d:h)Pt||gr(I._readableStreamController,At);else{let oa;try{oa=uo(At)}catch(Cn){ye(I._readableStreamController,Cn),ye(se._readableStreamController,Cn),W(ge(e,Cn));return}Pt||gr(I._readableStreamController,At),pr(se._readableStreamController,oa)}a=!1,u?We():c&&Z()})},_closeSteps:At=>{a=!1;let Pt=F?h:d,jr=F?d:h;Pt||zt(I._readableStreamController),jr||zt(se._readableStreamController),At!==void 0&&(Pt||gr(I._readableStreamController,At),!jr&&se._readableStreamController._pendingPullIntos.length>0&&yr(se._readableStreamController,0)),(!Pt||!jr)&&W(void 0)},_errorSteps:()=>{a=!1}})}function We(){if(a)return u=!0,_(void 0);a=!0;let E=ln(B._readableStreamController);return E===null?vt():Ke(E._view,!1),_(void 0)}function Z(){if(a)return c=!0,_(void 0);a=!0;let E=ln(D._readableStreamController);return E===null?vt():Ke(E._view,!0),_(void 0)}function ne(E){if(d=!0,R=E,h){let F=qt([R,P]),I=ge(e,F);W(I)}return $}function he(E){if(h=!0,P=E,d){let F=qt([R,P]),I=ge(e,F);W(I)}return $}function ke(){}return B=No(ke,We,ne),D=No(ke,Z,he),Se(t),[B,D]}function qs(e,t){be(e,t);let a=e,u=a==null?void 0:a.autoAllocateChunkSize,c=a==null?void 0:a.cancel,d=a==null?void 0:a.pull,h=a==null?void 0:a.start,R=a==null?void 0:a.type;return{autoAllocateChunkSize:u===void 0?void 0:pe(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Is(c,a,`${t} has member 'cancel' that`),pull:d===void 0?void 0:zs(d,a,`${t} has member 'pull' that`),start:h===void 0?void 0:xs(h,a,`${t} has member 'start' that`),type:R===void 0?void 0:Ms(R,`${t} has member 'type' that`)}}function Is(e,t,a){return x(e,a),u=>O(e,t,[u])}function zs(e,t,a){return x(e,a),u=>O(e,t,[u])}function xs(e,t,a){return x(e,a),u=>L(e,t,[u])}function Ms(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function js(e,t){be(e,t);let a=e==null?void 0:e.mode;return{mode:a===void 0?void 0:Us(a,`${t} has member 'mode' that`)}}function Us(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function $s(e,t){be(e,t);let a=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(a)}}function $o(e,t){be(e,t);let a=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,d=e==null?void 0:e.signal;return d!==void 0&&Ns(d,`${t} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(u),preventClose:Boolean(c),signal:d}}function Ns(e,t){if(!rs(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Hs(e,t){be(e,t);let a=e==null?void 0:e.readable;Be(a,"readable","ReadableWritablePair"),re(a,`${t} has member 'readable' that`);let u=e==null?void 0:e.writable;return Be(u,"writable","ReadableWritablePair"),To(u,`${t} has member 'writable' that`),{readable:a,writable:u}}class Ye{constructor(t={},a={}){t===void 0?t=null:K(t,"First parameter");let u=wr(a,"Second parameter"),c=qs(t,"First parameter");if(vn(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=jt(u,0);Yi(this,c,d)}else{let d=_r(u),h=jt(u,1);Ds(this,c,h,d)}}get locked(){if(!Qe(this))throw lt("locked");return Ge(this)}cancel(t=void 0){return Qe(this)?Ge(this)?y(new TypeError("Cannot cancel a stream that already has a reader")):ge(this,t):y(lt("cancel"))}getReader(t=void 0){if(!Qe(this))throw lt("getReader");return js(t,"First parameter").mode===void 0?Te(this):So(this)}pipeThrough(t,a={}){if(!Qe(this))throw lt("pipeThrough");j(t,1,"pipeThrough");let u=Hs(t,"First parameter"),c=$o(a,"Second parameter");if(Ge(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(wt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=Mo(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return M(d),u.readable}pipeTo(t,a={}){if(!Qe(this))return y(lt("pipeTo"));if(t===void 0)return y("Parameter 1 is required in 'pipeTo'.");if(!_t(t))return y(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=$o(a,"Second parameter")}catch(c){return y(c)}return Ge(this)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):wt(t)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Mo(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Qe(this))throw lt("tee");let t=Ws(this);return qt(t)}values(t=void 0){if(!Qe(this))throw lt("values");let a=$s(t,"First parameter");return Mi(this,a.preventCancel)}}Object.defineProperties(Ye.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ye.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ye.prototype,r.asyncIterator,{value:Ye.prototype.values,writable:!0,configurable:!0});function En(e,t,a,u=1,c=()=>1){let d=Object.create(Ye.prototype);vn(d);let h=Object.create(Tt.prototype);return Uo(d,h,e,t,a,u,c),d}function No(e,t,a){let u=Object.create(Ye.prototype);vn(u);let c=Object.create(St.prototype);return go(u,c,e,t,a,0,void 0),u}function vn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Qe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ye}function Ge(e){return e._reader!==void 0}function ge(e,t){if(e._disturbed=!0,e._state==="closed")return _(void 0);if(e._state==="errored")return y(e._storedError);Yt(e);let a=e._reader;a!==void 0&&it(a)&&(a._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),a._readIntoRequests=new V);let u=e._readableStreamController[nt](t);return k(u,o)}function Yt(e){e._state="closed";let t=e._reader;t!==void 0&&(kt(t),Ne(t)&&(t._readRequests.forEach(a=>{a._closeSteps()}),t._readRequests=new V))}function Ho(e,t){e._state="errored",e._storedError=t;let a=e._reader;a!==void 0&&(Oe(a,t),Ne(a)?(a._readRequests.forEach(u=>{u._errorSteps(t)}),a._readRequests=new V):(a._readIntoRequests.forEach(u=>{u._errorSteps(t)}),a._readIntoRequests=new V))}function lt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Vo(e,t){be(e,t);let a=e==null?void 0:e.highWaterMark;return Be(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:De(a)}}let Yo=e=>e.byteLength;Object.defineProperty(Yo,"name",{value:"size",configurable:!0});class Wr{constructor(t){j(t,1,"ByteLengthQueuingStrategy"),t=Vo(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Go(this))throw Qo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Go(this))throw Qo("size");return Yo}}Object.defineProperties(Wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Wr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Qo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Go(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Wr}let Ko=()=>1;Object.defineProperty(Ko,"name",{value:"size",configurable:!0});class kr{constructor(t){j(t,1,"CountQueuingStrategy"),t=Vo(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Jo(this))throw Zo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Jo(this))throw Zo("size");return Ko}}Object.defineProperties(kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(kr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Zo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Jo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof kr}function Vs(e,t){be(e,t);let a=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,d=e==null?void 0:e.transform,h=e==null?void 0:e.writableType;return{flush:a===void 0?void 0:Ys(a,e,`${t} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Qs(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:Gs(d,e,`${t} has member 'transform' that`),writableType:h}}function Ys(e,t,a){return x(e,a),u=>O(e,t,[u])}function Qs(e,t,a){return x(e,a),u=>L(e,t,[u])}function Gs(e,t,a){return x(e,a),(u,c)=>O(e,t,[u,c])}class Lr{constructor(t={},a={},u={}){t===void 0&&(t=null);let c=wr(a,"Second parameter"),d=wr(u,"Third parameter"),h=Vs(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=jt(d,0),P=_r(d),B=jt(c,1),D=_r(c),W,$=T(Se=>{W=Se});Ks(this,$,B,D,R,P),Js(this,h),h.start!==void 0?W(h.start(this._transformStreamController)):W(void 0)}get readable(){if(!Xo(this))throw na("readable");return this._readable}get writable(){if(!Xo(this))throw na("writable");return this._writable}}Object.defineProperties(Lr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Ks(e,t,a,u,c,d){function h(){return t}function R($){return tu(e,$)}function P($){return ru(e,$)}function B(){return nu(e)}e._writable=as(h,R,B,P,a,u);function D(){return ou(e)}function W($){return Ir(e,$),_(void 0)}e._readable=En(h,D,W,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,zr(e,!0),e._transformStreamController=void 0}function Xo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Lr}function qr(e,t){Ve(e._readable._readableStreamController,t),Ir(e,t)}function Ir(e,t){ea(e._transformStreamController),yn(e._writable._writableStreamController,t),e._backpressure&&zr(e,!1)}function zr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=t}class Qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!xr(this))throw Mr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return Tn(t)}enqueue(t=void 0){if(!xr(this))throw Mr("enqueue");ta(this,t)}error(t=void 0){if(!xr(this))throw Mr("error");Xs(this,t)}terminate(){if(!xr(this))throw Mr("terminate");eu(this)}}Object.defineProperties(Qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function xr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Qt}function Zs(e,t,a,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=a,t._flushAlgorithm=u}function Js(e,t){let a=Object.create(Qt.prototype),u=d=>{try{return ta(a,d),_(void 0)}catch(h){return y(h)}},c=()=>_(void 0);t.transform!==void 0&&(u=d=>t.transform(d,a)),t.flush!==void 0&&(c=()=>t.flush(a)),Zs(e,a,u,c)}function ea(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ta(e,t){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!Et(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Br(u,t)}catch(d){throw Ir(a,d),a._readable._storedError}Bs(u)!==a._backpressure&&zr(a,!0)}function Xs(e,t){qr(e._controlledTransformStream,t)}function ra(e,t){let a=e._transformAlgorithm(t);return k(a,void 0,u=>{throw qr(e._controlledTransformStream,u),u})}function eu(e){let t=e._controlledTransformStream,a=t._readable._readableStreamController;Vt(a);let u=new TypeError("TransformStream terminated");Ir(t,u)}function tu(e,t){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return k(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return ra(a,t)})}return ra(a,t)}function ru(e,t){return qr(e,t),_(void 0)}function nu(e){let t=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return ea(a),k(u,()=>{if(t._state==="errored")throw t._storedError;Vt(t._readableStreamController)},c=>{throw qr(e,c),t._storedError})}function ou(e){return zr(e,!1),e._backpressureChangePromise}function Mr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function na(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=Wr,n.CountQueuingStrategy=kr,n.ReadableByteStreamController=St,n.ReadableStream=Ye,n.ReadableStreamBYOBReader=Mt,n.ReadableStreamBYOBRequest=It,n.ReadableStreamDefaultController=Tt,n.ReadableStreamDefaultReader=$e,n.TransformStream=Lr,n.TransformStreamDefaultController=Qt,n.WritableStream=Ut,n.WritableStreamDefaultController=Rt,n.WritableStreamDefaultWriter=$t,Object.defineProperty(n,"__esModule",{value:!0})})});var Ka=Ze(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,Ga())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let b=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=b.byteLength,l.enqueue(new Uint8Array(b)),i===s.size&&l.close()}})})}catch{}});async function*Mn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,Za),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let f=await s.slice(i,Math.min(s.size,i+Za)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var Pl,Za,Ja,Uu,Ie,tr=Kt(()=>{Pl=_e(Ka(),1);Za=65536;Ja=class jn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of r){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof jn?f=l:f=i.encode(`${l}`);let b=ArrayBuffer.isView(f)?f.byteLength:f.size;b&&(this.#r+=b,this.#e.push(f))}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let i of Mn(this.#e,!1))o+=r.decode(i,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let i of Mn(this.#e,!1))r.set(i,o),o+=i.length;return r.buffer}stream(){let r=Mn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await r.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,i=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),f=o<0?Math.max(s+o,0):Math.min(o,s),b=Math.max(f-l,0),p=this.#e,m=[],w=0;for(let _ of p){if(w>=b)break;let y=ArrayBuffer.isView(_)?_.byteLength:_.size;if(l&&y<=l)l-=y,f-=y;else{let g;ArrayBuffer.isView(_)?(g=_.subarray(l,Math.min(y,f)),w+=g.byteLength):(g=_.slice(l,Math.min(y,f)),w+=g.size),f-=y,m.push(g),l=0}}let T=new jn([],{type:String(i).toLowerCase()});return T.#r=b,T.#e=m,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Ja.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Uu=Ja,Ie=Uu});var $u,Nu,Ot,Un=Kt(()=>{tr();$u=class extends Ie{#e=0;#t="";constructor(r,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i);i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Ie&&/^(File)$/.test(r[Symbol.toStringTag])}},Nu=$u,Ot=Nu});function ti(n,r=Ie){var o=`${Xa()}${Xa()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?i.push(s+$n(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+$n(f)+`"; filename="${$n(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new r(i,{type:"multipart/form-data; boundary="+o})}var rr,Hu,Vu,Xa,Yu,ei,$n,dt,ht,Yr=Kt(()=>{tr();Un();({toStringTag:rr,iterator:Hu,hasInstance:Vu}=Symbol),Xa=Math.random,Yu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ei=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[rr])?[(o=o!==void 0?o+"":r[rr]=="File"?r.name:"blob",n),r.name!==o||r[rr]=="blob"?new Ot([r],o,r):r]:[n,r+""]),$n=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),dt=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},ht=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[rr](){return"FormData"}[Hu](){return this.entries()}static[Vu](r){return r&&typeof r=="object"&&r[rr]==="FormData"&&!Yu.some(o=>typeof r[o]!="function")}append(...r){dt("append",arguments,2),this.#e.push(ei(...r))}delete(r){dt("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){dt("get",arguments,1),r+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return dt("getAll",arguments,1),o=[],r+="",this.#e.forEach(i=>i[0]===r&&o.push(i[1])),o}has(r){return dt("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){dt("forEach",arguments,1);for(var[i,s]of this)r.call(o,s,i,this)}set(...r){dt("set",arguments,2);var o=[],i=!0;r=ei(...r),this.#e.forEach(s=>{s[0]===r[0]?i&&(i=!o.push(r)):o.push(s)}),i&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var ai=Ze((jl,oi)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}oi.exports=globalThis.DOMException});var or,ii,Qu,Hn,Vn=Kt(()=>{or=require("node:fs"),ii=_e(ai(),1);Un();tr();({stat:Qu}=or.promises),Hn=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified,this.originalSize=r.originalSize===void 0?r.size:r.originalSize}slice(r,o){return new Hn({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:o-r,start:this.#t+r})}async*stream(){let{mtimeMs:r,size:o}=await Qu(this.#e);if(r>this.lastModified||this.originalSize!==o)throw new ii.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,or.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var li={};la(li,{toFormData:()=>tl});function el(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function tl(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new ui(o[1]||o[2]),s,l,f,b,p,m,w=[],T=new ht,_=S=>{f+=v.decode(S,{stream:!0})},y=S=>{w.push(S)},g=()=>{let S=new Ot(w,m,{type:p});T.append(b,S)},A=()=>{T.append(b,f)},v=new TextDecoder("utf-8");v.decode(),i.onPartBegin=function(){i.onPartData=_,i.onPartEnd=A,s="",l="",f="",b="",p="",m=null,w.length=0},i.onHeaderField=function(S){s+=v.decode(S,{stream:!0})},i.onHeaderValue=function(S){l+=v.decode(S,{stream:!0})},i.onHeaderEnd=function(){if(l+=v.decode(),s=s.toLowerCase(),s==="content-disposition"){let S=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(b=S[2]||S[3]||""),m=el(l),m&&(i.onPartData=y,i.onPartEnd=g)}else s==="content-type"&&(p=l);l="",s=""};for await(let S of n)i.write(S);return i.end(),T}var Ae,z,si,Xe,Gr,Kr,Gu,ar,Ku,Zu,Ju,Xu,mt,ui,fi=Kt(()=>{Vn();Yr();Ae=0,z={START_BOUNDARY:Ae++,HEADER_FIELD_START:Ae++,HEADER_FIELD:Ae++,HEADER_VALUE_START:Ae++,HEADER_VALUE:Ae++,HEADER_VALUE_ALMOST_DONE:Ae++,HEADERS_ALMOST_DONE:Ae++,PART_DATA_START:Ae++,PART_DATA:Ae++,END:Ae++},si=1,Xe={PART_BOUNDARY:si,LAST_BOUNDARY:si*=2},Gr=10,Kr=13,Gu=32,ar=45,Ku=58,Zu=97,Ju=122,Xu=n=>n|32,mt=()=>{},ui=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=mt,this.onHeaderField=mt,this.onHeadersEnd=mt,this.onHeaderValue=mt,this.onPartBegin=mt,this.onPartData=mt,this.onPartEnd=mt,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let o=0,i=r.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:b,index:p,state:m,flags:w}=this,T=this.boundary.length,_=T-1,y=r.length,g,A,v=C=>{this[C+"Mark"]=o},S=C=>{delete this[C+"Mark"]},k=(C,L,O,Q)=>{(L===void 0||L!==O)&&this[C](Q&&Q.subarray(L,O))},M=(C,L)=>{let O=C+"Mark";O in this&&(L?(k(C,this[O],o,r),delete this[O]):(k(C,this[O],r.length,r),this[O]=0))};for(o=0;o<i;o++)switch(g=r[o],m){case z.START_BOUNDARY:if(p===f.length-2){if(g===ar)w|=Xe.LAST_BOUNDARY;else if(g!==Kr)return;p++;break}else if(p-1===f.length-2){if(w&Xe.LAST_BOUNDARY&&g===ar)m=z.END,w=0;else if(!(w&Xe.LAST_BOUNDARY)&&g===Gr)p=0,k("onPartBegin"),m=z.HEADER_FIELD_START;else return;break}g!==f[p+2]&&(p=-2),g===f[p+2]&&p++;break;case z.HEADER_FIELD_START:m=z.HEADER_FIELD,v("onHeaderField"),p=0;case z.HEADER_FIELD:if(g===Kr){S("onHeaderField"),m=z.HEADERS_ALMOST_DONE;break}if(p++,g===ar)break;if(g===Ku){if(p===1)return;M("onHeaderField",!0),m=z.HEADER_VALUE_START;break}if(A=Xu(g),A<Zu||A>Ju)return;break;case z.HEADER_VALUE_START:if(g===Gu)break;v("onHeaderValue"),m=z.HEADER_VALUE;case z.HEADER_VALUE:g===Kr&&(M("onHeaderValue",!0),k("onHeaderEnd"),m=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(g!==Gr)return;m=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(g!==Gr)return;k("onHeadersEnd"),m=z.PART_DATA_START;break;case z.PART_DATA_START:m=z.PART_DATA,v("onPartData");case z.PART_DATA:if(s=p,p===0){for(o+=_;o<y&&!(r[o]in b);)o+=T;o-=_,g=r[o]}if(p<f.length)f[p]===g?(p===0&&M("onPartData",!0),p++):p=0;else if(p===f.length)p++,g===Kr?w|=Xe.PART_BOUNDARY:g===ar?w|=Xe.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(w&Xe.PART_BOUNDARY){if(p=0,g===Gr){w&=~Xe.PART_BOUNDARY,k("onPartEnd"),k("onPartBegin"),m=z.HEADER_FIELD_START;break}}else w&Xe.LAST_BOUNDARY&&g===ar?(k("onPartEnd"),m=z.END,w=0):p=0;if(p>0)l[p-1]=g;else if(s>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);k("onPartData",0,s,C),s=0,v("onPartData"),o--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}M("onHeaderField"),M("onHeaderValue"),M("onPartData"),this.index=p,this.state=m,this.flags=w}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var ml={};la(ml,{default:()=>xi});var Xn=require("@raycast/api");var Wi=_e(Ur());var Bi=require("react");var q=require("react");function Da(n,r,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function b(w){try{m(i.next(w))}catch(T){f(T)}}function p(w){try{m(i.throw(w))}catch(T){f(T)}}function m(w){w.done?l(w.value):s(w.value).then(b,p)}m((i=i.apply(n,r||[])).next())})}function Wa(n,r){var o={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,s,l,f;return f={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function b(m){return function(w){return p([m,w])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(l=m[0]&2?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return o.label++,{value:m[1],done:!1};case 5:o.label++,s=m[1],m=[0];continue;case 7:m=o.ops.pop(),o.trys.pop();continue;default:if(l=o.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){o=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){o.label=m[1];break}if(m[0]===6&&o.label<l[1]){o.label=l[1],l=m;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(m);break}l[2]&&o.ops.pop(),o.trys.pop();continue}m=r.call(n,o)}catch(w){m=[6,w],s=0}finally{i=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Ce=function(){},G=Ce(),Zt=Object,J=function(n){return n===G},ct=function(n){return typeof n=="function"},qe=function(n,r){return Zt.assign({},n,r)},In="undefined",zn=function(){return typeof window!=In},_u=function(){return typeof document!=In},wu=function(){return zn()&&typeof window.requestAnimationFrame!=In},$r=new WeakMap,Ru=0,er=function(n){var r=typeof n,o=n&&n.constructor,i=o==Date,s,l;if(Zt(n)===n&&!i&&o!=RegExp){if(s=$r.get(n),s)return s;if(s=++Ru+"~",$r.set(n,s),o==Array){for(s="@",l=0;l<n.length;l++)s+=er(n[l])+",";$r.set(n,s)}if(o==Zt){s="#";for(var f=Zt.keys(n).sort();!J(l=f.pop());)J(n[l])||(s+=l+":"+er(n[l])+",");$r.set(n,s)}}else s=i?n.toJSON():r=="symbol"?n.toString():r=="string"?JSON.stringify(n):""+n;return s},Dn=!0,Tu=function(){return Dn},ka=zn(),xn=_u(),Wn=ka&&window.addEventListener?window.addEventListener.bind(window):Ce,Eu=xn?document.addEventListener.bind(document):Ce,kn=ka&&window.removeEventListener?window.removeEventListener.bind(window):Ce,vu=xn?document.removeEventListener.bind(document):Ce,Cu=function(){var n=xn&&document.visibilityState;return J(n)||n!=="hidden"},Au=function(n){return Eu("visibilitychange",n),Wn("focus",n),function(){vu("visibilitychange",n),kn("focus",n)}},Pu=function(n){var r=function(){Dn=!0,n()},o=function(){Dn=!1};return Wn("online",r),Wn("offline",o),function(){kn("online",r),kn("offline",o)}},Ou={isOnline:Tu,isVisible:Cu},Fu={initFocus:Au,initReconnect:Pu},Nr=!zn()||"Deno"in window,Bu=function(n){return wu()?window.requestAnimationFrame(n):setTimeout(n,1)},Jt=Nr?q.useEffect:q.useLayoutEffect,Fn=typeof navigator<"u"&&navigator.connection,Oa=!Nr&&Fn&&(["slow-2g","2g"].includes(Fn.effectiveType)||Fn.saveData),La=function(n){if(ct(n))try{n=n()}catch{n=""}var r=[].concat(n);n=typeof n=="string"?n:(Array.isArray(n)?n.length:n)?er(n):"";var o=n?"$swr$"+n:"";return[n,r,o]},ft=new WeakMap,qa=0,Ia=1,za=2,Xt=function(n,r,o,i,s,l,f){f===void 0&&(f=!0);var b=ft.get(n),p=b[0],m=b[1],w=b[3],T=p[r],_=m[r];if(f&&_)for(var y=0;y<_.length;++y)_[y](o,i,s);return l&&(delete w[r],T&&T[0])?T[0](za).then(function(){return n.get(r)}):n.get(r)},Du=0,Ln=function(){return++Du},xa=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Da(void 0,void 0,void 0,function(){var o,i,s,l,f,b,p,m,w,T,_,y,g,A,v,S,k,M,C,L;return Wa(this,function(O){switch(O.label){case 0:if(o=n[0],i=n[1],s=n[2],l=n[3],f=typeof l=="boolean"?{revalidate:l}:l||{},b=J(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,m=f.rollbackOnError!==!1,w=f.optimisticData,T=La(i),_=T[0],y=T[2],!_)return[2];if(g=ft.get(o),A=g[2],n.length<3)return[2,Xt(o,_,o.get(_),G,G,p,!0)];if(v=s,k=Ln(),A[_]=[k,0],M=!J(w),C=o.get(_),M&&(o.set(_,w),Xt(o,_,w)),ct(v))try{v=v(o.get(_))}catch(Q){S=Q}return v&&ct(v.then)?[4,v.catch(function(Q){S=Q})]:[3,2];case 1:if(v=O.sent(),k!==A[_][0]){if(S)throw S;return[2,v]}else S&&M&&m&&(b=!0,v=C,o.set(_,C));O.label=2;case 2:return b&&(S||(ct(b)&&(v=b(v,C)),o.set(_,v)),o.set(y,qe(o.get(y),{error:S}))),A[_][1]=Ln(),[4,Xt(o,_,v,S,G,p,!!b)];case 3:if(L=O.sent(),S)throw S;return[2,b?L:v]}})})},Fa=function(n,r){for(var o in n)n[o][0]&&n[o][0](r)},Ma=function(n,r){if(!ft.has(n)){var o=qe(Fu,r),i={},s=xa.bind(G,n),l=Ce;if(ft.set(n,[i,{},{},{},s]),!Nr){var f=o.initFocus(setTimeout.bind(G,Fa.bind(G,i,qa))),b=o.initReconnect(setTimeout.bind(G,Fa.bind(G,i,Ia)));l=function(){f&&f(),b&&b(),ft.delete(n)}}return[n,s,l]}return[n,ft.get(n)[4]]},Wu=function(n,r,o,i,s){var l=o.errorRetryCount,f=s.retryCount,b=~~((Math.random()+.5)*(1<<(f<8?f:8)))*o.errorRetryInterval;!J(l)&&f>l||setTimeout(i,b,s)},ja=Ma(new Map),Ua=ja[0],ku=ja[1],$a=qe({onLoadingSlow:Ce,onSuccess:Ce,onError:Ce,onErrorRetry:Wu,onDiscarded:Ce,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Oa?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Oa?5e3:3e3,compare:function(n,r){return er(n)==er(r)},isPaused:function(){return!1},cache:Ua,mutate:ku,fallback:{}},Ou),Na=function(n,r){var o=qe(n,r);if(r){var i=n.use,s=n.fallback,l=r.use,f=r.fallback;i&&l&&(o.use=i.concat(l)),s&&f&&(o.fallback=qe(s,f))}return o},qn=(0,q.createContext)({}),Lu=function(n){var r=n.value,o=Na((0,q.useContext)(qn),r),i=r&&r.provider,s=(0,q.useState)(function(){return i?Ma(i(o.cache||Ua),r):G})[0];return s&&(o.cache=s[0],o.mutate=s[1]),Jt(function(){return s?s[2]:G},[]),(0,q.createElement)(qn.Provider,qe(n,{value:o}))},qu=function(n,r){var o=(0,q.useState)({})[1],i=(0,q.useRef)(n),s=(0,q.useRef)({data:!1,error:!1,isValidating:!1}),l=(0,q.useCallback)(function(f){var b=!1,p=i.current;for(var m in f){var w=m;p[w]!==f[w]&&(p[w]=f[w],s.current[w]&&(b=!0))}b&&!r.current&&o({})},[]);return Jt(function(){i.current=n}),[i,s.current,l]},Iu=function(n){return ct(n[1])?[n[0],n[1],n[2]||{}]:[n[0],null,(n[1]===null?n[2]:n[1])||{}]},zu=function(){return qe($a,(0,q.useContext)(qn))},xu=function(n){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=zu(),l=Iu(o),f=l[0],b=l[1],p=l[2],m=Na(s,p),w=n,T=m.use;if(T)for(var _=T.length;_-- >0;)w=T[_](w);return w(f,b||m.fetcher,m)}},Ba=function(n,r,o){var i=r[n]||(r[n]=[]);return i.push(o),function(){var s=i.indexOf(o);s>=0&&(i[s]=i[i.length-1],i.pop())}},Bn={dedupe:!0},Mu=function(n,r,o){var i=o.cache,s=o.compare,l=o.fallbackData,f=o.suspense,b=o.revalidateOnMount,p=o.refreshInterval,m=o.refreshWhenHidden,w=o.refreshWhenOffline,T=ft.get(i),_=T[0],y=T[1],g=T[2],A=T[3],v=La(n),S=v[0],k=v[1],M=v[2],C=(0,q.useRef)(!1),L=(0,q.useRef)(!1),O=(0,q.useRef)(S),Q=(0,q.useRef)(r),V=(0,q.useRef)(o),N=function(){return V.current},rt=function(){return N().isVisible()&&N().isOnline()},ee=function(x){return i.set(M,qe(i.get(M),x))},Pe=i.get(S),Wt=J(l)?o.fallback[S]:l,de=J(Pe)?Wt:Pe,ur=i.get(M)||{},Oe=ur.error,lr=!C.current,kt=function(){return lr&&!J(b)?b:N().isPaused()?!1:f?!J(de):J(de)||o.revalidateIfStale},fr=function(){return!S||!r?!1:ur.isValidating?!0:lr&&kt()},pt=fr(),nt=qu({data:de,error:Oe,isValidating:pt},L),Re=nt[0],yt=nt[1],gt=nt[2],Fe=(0,q.useCallback)(function(x){return Da(void 0,void 0,void 0,function(){var te,K,j,Be,De,ie,Y,pe,re,Te,Me,Ee,je;return Wa(this,function(Ue){switch(Ue.label){case 0:if(te=Q.current,!S||!te||L.current||N().isPaused())return[2,!1];Be=!0,De=x||{},ie=!A[S]||!De.dedupe,Y=function(){return!L.current&&S===O.current&&C.current},pe=function(){var $e=A[S];$e&&$e[1]===j&&delete A[S]},re={isValidating:!1},Te=function(){ee({isValidating:!1}),Y()&&gt(re)},ee({isValidating:!0}),gt({isValidating:!0}),Ue.label=1;case 1:return Ue.trys.push([1,3,,4]),ie&&(Xt(i,S,Re.current.data,Re.current.error,!0),o.loadingTimeout&&!i.get(S)&&setTimeout(function(){Be&&Y()&&N().onLoadingSlow(S,o)},o.loadingTimeout),A[S]=[te.apply(void 0,k),Ln()]),je=A[S],K=je[0],j=je[1],[4,K];case 2:return K=Ue.sent(),ie&&setTimeout(pe,o.dedupingInterval),!A[S]||A[S][1]!==j?(ie&&Y()&&N().onDiscarded(S),[2,!1]):(ee({error:G}),re.error=G,Me=g[S],!J(Me)&&(j<=Me[0]||j<=Me[1]||Me[1]===0)?(Te(),ie&&Y()&&N().onDiscarded(S),[2,!1]):(s(Re.current.data,K)?re.data=Re.current.data:re.data=K,s(i.get(S),K)||i.set(S,K),ie&&Y()&&N().onSuccess(K,S,o),[3,4]));case 3:return Ee=Ue.sent(),pe(),N().isPaused()||(ee({error:Ee}),re.error=Ee,ie&&Y()&&(N().onError(Ee,S,o),(typeof o.shouldRetryOnError=="boolean"&&o.shouldRetryOnError||ct(o.shouldRetryOnError)&&o.shouldRetryOnError(Ee))&&rt()&&N().onErrorRetry(Ee,S,o,Fe,{retryCount:(De.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Be=!1,Te(),Y()&&ie&&Xt(i,S,re.data,re.error,!1),[2,!0]}})})},[S]),be=(0,q.useCallback)(xa.bind(G,i,function(){return O.current}),[]);if(Jt(function(){Q.current=r,V.current=o}),Jt(function(){if(!!S){var x=S!==O.current,te=Fe.bind(G,Bn),K=function(Y,pe,re){gt(qe({error:pe,isValidating:re},s(Re.current.data,Y)?G:{data:Y}))},j=0,Be=function(Y){if(Y==qa){var pe=Date.now();N().revalidateOnFocus&&pe>j&&rt()&&(j=pe+N().focusThrottleInterval,te())}else if(Y==Ia)N().revalidateOnReconnect&&rt()&&te();else if(Y==za)return Fe()},De=Ba(S,y,K),ie=Ba(S,_,Be);return L.current=!1,O.current=S,C.current=!0,x&&gt({data:de,error:Oe,isValidating:pt}),kt()&&(J(de)||Nr?te():Bu(te)),function(){L.current=!0,De(),ie()}}},[S,Fe]),Jt(function(){var x;function te(){var j=ct(p)?p(de):p;j&&x!==-1&&(x=setTimeout(K,j))}function K(){!Re.current.error&&(m||N().isVisible())&&(w||N().isOnline())?Fe(Bn).then(te):te()}return te(),function(){x&&(clearTimeout(x),x=-1)}},[p,m,w,Fe]),(0,q.useDebugValue)(de),f&&J(de)&&S)throw Q.current=r,V.current=o,L.current=!1,J(Oe)?Fe(Bn):Oe;return{mutate:be,get data(){return yt.data=!0,de},get error(){return yt.error=!0,Oe},get isValidating(){return yt.isValidating=!0,pt}}},Rl=Zt.defineProperty(Lu,"default",{value:$a});var Ha=xu(Mu);var Va=require("@raycast/api"),Hr=()=>(0,Va.getPreferenceValues)();var vi=_e(require("node:http"),1),Ci=_e(require("node:https"),1),bt=_e(require("node:zlib"),1),ce=_e(require("node:stream"),1),sr=require("node:buffer");function ju(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),i="",s=!1,l=o[0]||"text/plain",f=l;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(f+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let b=s?"base64":"ascii",p=unescape(n.substring(r+1)),m=Buffer.from(p,b);return m.type=l,m.typeFull=f,m.charset=i,m}var Ya=ju;var me=_e(require("node:stream"),1),xe=require("node:util"),le=require("node:buffer");tr();Yr();var Je=class extends Error{constructor(r,o){super(r);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ue=class extends Je{constructor(r,o,i){super(r,o);i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Qr=Symbol.toStringTag,Nn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Qr]==="URLSearchParams",nr=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Qr]),ri=n=>typeof n=="object"&&(n[Qr]==="AbortSignal"||n[Qr]==="EventTarget"),ni=(n,r)=>{let o=new URL(r).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)};var rl=(0,xe.promisify)(me.default.pipeline),ae=Symbol("Body internals"),ze=class{constructor(r,{size:o=0}={}){let i=null;r===null?r=null:Nn(r)?r=le.Buffer.from(r.toString()):nr(r)||le.Buffer.isBuffer(r)||(xe.types.isAnyArrayBuffer(r)?r=le.Buffer.from(r):ArrayBuffer.isView(r)?r=le.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof me.default||(r instanceof ht?(r=ti(r),i=r.type.split("=")[1]):r=le.Buffer.from(String(r))));let s=r;le.Buffer.isBuffer(r)?s=me.default.Readable.from(r):nr(r)&&(s=me.default.Readable.from(r.stream())),this[ae]={body:r,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,r instanceof me.default&&r.on("error",l=>{let f=l instanceof Je?l:new ue(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ae].error=f})}get body(){return this[ae].stream}get bodyUsed(){return this[ae].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:i}=await Yn(this);return r.slice(o,o+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new ht,s=new URLSearchParams(await this.text());for(let[l,f]of s)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(fi(),li));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[ae].body&&this[ae].body.type||"",o=await this.arrayBuffer();return new Ie([o],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Yn(this);return new TextDecoder().decode(r)}buffer(){return Yn(this)}};ze.prototype.buffer=(0,xe.deprecate)(ze.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ze.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,xe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Yn(n){if(n[ae].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[ae].disturbed=!0,n[ae].error)throw n[ae].error;let{body:r}=n;if(r===null)return le.Buffer.alloc(0);if(!(r instanceof me.default))return le.Buffer.alloc(0);let o=[],i=0;try{for await(let s of r){if(n.size>0&&i+s.length>n.size){let l=new ue(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof Je?s:new ue(`Invalid response body while trying to fetch ${n.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?le.Buffer.from(o.join("")):le.Buffer.concat(o,i)}catch(s){throw new ue(`Could not create Buffer from response body for ${n.url}: ${s.message}`,"system",s)}else throw new ue(`Premature close of server response while trying to fetch ${n.url}`)}var Ft=(n,r)=>{let o,i,{body:s}=n[ae];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof me.default&&typeof s.getBoundary!="function"&&(o=new me.PassThrough({highWaterMark:r}),i=new me.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(i),n[ae].stream=o,s=i),s},nl=(0,xe.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Zr=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":Nn(n)?"application/x-www-form-urlencoded;charset=UTF-8":nr(n)?n.type||null:le.Buffer.isBuffer(n)||xe.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof ht?`multipart/form-data; boundary=${r[ae].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${nl(n)}`:n instanceof me.default?null:"text/plain;charset=UTF-8",ci=n=>{let{body:r}=n[ae];return r===null?0:nr(r)?r.size:le.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},di=async(n,{body:r})=>{r===null?n.end():await rl(r,n)};var Qn=require("node:util"),ir=_e(require("node:http"),1),Jr=typeof ir.default.validateHeaderName=="function"?ir.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Gn=typeof ir.default.validateHeaderValue=="function"?ir.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},fe=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof fe){let i=r.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!Qn.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)o.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||Qn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([i,s])=>(Jr(i),Gn(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0;super(o);return new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(f,b)=>(Jr(f),Gn(f,String(b)),URLSearchParams.prototype[s].call(i,String(f).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return f=>(Jr(f),URLSearchParams.prototype[s].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,o=void 0){for(let i of this.keys())Reflect.apply(r,o,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let i=this.getAll(o);return o==="host"?r[o]=i[0]:r[o]=i.length>1?i:i[0],r},{})}};Object.defineProperties(fe.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function hi(n=[]){return new fe(n.reduce((r,o,i,s)=>(i%2===0&&r.push(s.slice(i,i+2)),r),[]).filter(([r,o])=>{try{return Jr(r),Gn(r,String(o)),!0}catch{return!1}}))}var ol=new Set([301,302,303,307,308]),Xr=n=>ol.has(n);var we=Symbol("Response internals"),X=class extends ze{constructor(r=null,o={}){super(r,o);let i=o.status!=null?o.status:200,s=new fe(o.headers);if(r!==null&&!s.has("Content-Type")){let l=Zr(r,this);l&&s.append("Content-Type",l)}this[we]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[we].type}get url(){return this[we].url||""}get status(){return this[we].status}get ok(){return this[we].status>=200&&this[we].status<300}get redirected(){return this[we].counter>0}get statusText(){return this[we].statusText}get headers(){return this[we].headers}get highWaterMark(){return this[we].highWaterMark}clone(){return new X(Ft(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!Xr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new X(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new X(null,{status:0,statusText:""});return r[we].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(X.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ri=require("node:url"),Ti=require("node:util");var mi=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var pi=require("node:net");function bi(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var yi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),gi="strict-origin-when-cross-origin";function Si(n){if(!yi.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function al(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,pi.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(n.host)?!1:n.protocol==="file:"}function Bt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:al(n)}function _i(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let s=n.referrer,l=bi(s),f=bi(s,!0);l.toString().length>4096&&(l=f),r&&(l=r(l)),o&&(f=o(f));let b=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Bt(l)&&!Bt(b)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===b.origin?l:Bt(l)&&!Bt(b)?"no-referrer":f;case"same-origin":return l.origin===b.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===b.origin?l:f;case"no-referrer-when-downgrade":return Bt(l)&&!Bt(b)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function wi(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of r)i&&yi.has(i)&&(o=i);return o}var H=Symbol("Request internals"),en=n=>typeof n=="object"&&typeof n[H]=="object",il=(0,Ti.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),et=class extends ze{constructor(r,o={}){let i;if(en(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||r.method||"GET";if(s=s.toUpperCase(),"data"in o&&il(),(o.body!=null||en(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:en(r)&&r.body!==null?Ft(r):null;super(l,{size:o.size||r.size||0});let f=new fe(o.headers||r.headers||{});if(l!==null&&!f.has("Content-Type")){let m=Zr(l,this);m&&f.set("Content-Type",m)}let b=en(r)?r.signal:null;if("signal"in o&&(b=o.signal),b!=null&&!ri(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=o.referrer==null?r.referrer:o.referrer;if(p==="")p="no-referrer";else if(p){let m=new URL(p);p=/^about:(\/\/)?client$/.test(m)?"client":m}else p=void 0;this[H]={method:s,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:i,signal:b,referrer:p},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[H].method}get url(){return(0,Ri.format)(this[H].parsedURL)}get headers(){return this[H].headers}get redirect(){return this[H].redirect}get signal(){return this[H].signal}get referrer(){if(this[H].referrer==="no-referrer")return"";if(this[H].referrer==="client")return"about:client";if(this[H].referrer)return this[H].referrer.toString()}get referrerPolicy(){return this[H].referrerPolicy}set referrerPolicy(r){this[H].referrerPolicy=Si(r)}clone(){return new et(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(et.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ei=n=>{let{parsedURL:r}=n[H],o=new fe(n[H].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let b=ci(n);typeof b=="number"&&!Number.isNaN(b)&&(i=String(b))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=gi),n.referrer&&n.referrer!=="no-referrer"?n[H].referrer=_i(n):n[H].referrer="no-referrer",n[H].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=n;typeof s=="function"&&(s=s(r)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=mi(r),f={path:r.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var Kn=class extends Je{constructor(r,o="aborted"){super(r,o)}};Yr();Vn();var sl=new Set(["data:","http:","https:"]);async function tn(n,r){return new Promise((o,i)=>{let s=new et(n,r),{parsedURL:l,options:f}=Ei(s);if(!sl.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let g=Ya(s.url),A=new X(g,{headers:{"Content-Type":g.typeFull}});o(A);return}let b=(l.protocol==="https:"?Ci.default:vi.default).request,{signal:p}=s,m=null,w=()=>{let g=new Kn("The operation was aborted.");i(g),s.body&&s.body instanceof ce.default.Readable&&s.body.destroy(g),!(!m||!m.body)&&m.body.emit("error",g)};if(p&&p.aborted){w();return}let T=()=>{w(),y()},_=b(l.toString(),f);p&&p.addEventListener("abort",T);let y=()=>{_.abort(),p&&p.removeEventListener("abort",T)};_.on("error",g=>{i(new ue(`request to ${s.url} failed, reason: ${g.message}`,"system",g)),y()}),ul(_,g=>{m.body.destroy(g)}),process.version<"v14"&&_.on("socket",g=>{let A;g.prependListener("end",()=>{A=g._eventsCount}),g.prependListener("close",v=>{if(m&&A<g._eventsCount&&!v){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",S)}})}),_.on("response",g=>{_.setTimeout(0);let A=hi(g.rawHeaders);if(Xr(g.statusCode)){let C=A.get("Location"),L=null;try{L=C===null?null:new URL(C,s.url)}catch{if(s.redirect!=="manual"){i(new ue(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),y();return}}switch(s.redirect){case"error":i(new ue(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),y();return;case"manual":break;case"follow":{if(L===null)break;if(s.counter>=s.follow){i(new ue(`maximum redirect reached at: ${s.url}`,"max-redirect")),y();return}let O={headers:new fe(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Ft(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!ni(s.url,L))for(let V of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(V);if(g.statusCode!==303&&s.body&&r.body instanceof ce.default.Readable){i(new ue("Cannot follow redirect with body being a readable stream","unsupported-redirect")),y();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&s.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let Q=wi(A);Q&&(O.referrerPolicy=Q),o(tn(new et(L,O))),y();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}p&&g.once("end",()=>{p.removeEventListener("abort",T)});let v=(0,ce.pipeline)(g,new ce.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&g.on("aborted",T);let S={url:s.url,status:g.statusCode,statusText:g.statusMessage,headers:A,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},k=A.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||k===null||g.statusCode===204||g.statusCode===304){m=new X(v,S),o(m);return}let M={flush:bt.default.Z_SYNC_FLUSH,finishFlush:bt.default.Z_SYNC_FLUSH};if(k==="gzip"||k==="x-gzip"){v=(0,ce.pipeline)(v,bt.default.createGunzip(M),C=>{C&&i(C)}),m=new X(v,S),o(m);return}if(k==="deflate"||k==="x-deflate"){let C=(0,ce.pipeline)(g,new ce.PassThrough,L=>{L&&i(L)});C.once("data",L=>{(L[0]&15)===8?v=(0,ce.pipeline)(v,bt.default.createInflate(),O=>{O&&i(O)}):v=(0,ce.pipeline)(v,bt.default.createInflateRaw(),O=>{O&&i(O)}),m=new X(v,S),o(m)}),C.once("end",()=>{m||(m=new X(v,S),o(m))});return}if(k==="br"){v=(0,ce.pipeline)(v,bt.default.createBrotliDecompress(),C=>{C&&i(C)}),m=new X(v,S),o(m);return}m=new X(v,S),o(m)}),di(_,s).catch(i)})}function ul(n,r){let o=sr.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;n.on("response",f=>{let{headers:b}=f;i=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),n.on("socket",f=>{let b=()=>{if(i&&!s){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};f.prependListener("close",b),n.on("abort",()=>{f.removeListener("close",b)}),f.on("data",p=>{s=sr.Buffer.compare(p.slice(-5),o)===0,!s&&l&&(s=sr.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&sr.Buffer.compare(p.slice(-2),o.slice(3))===0),l=p})})}var Ai=_e(Ur());var{token:ll}=Hr(),fl={method:"get",headers:{Authorization:`Token ${ll}`}},Pi=async(n,r)=>{let o=await tn(`https://readwise.io/api${n}?${Ai.default.stringify(r)}`,fl),i=await o.json();if(!o.ok){let s=new Error("An error occurred while fetching the data.");throw s.status=o.status,s}return i};var Oi=require("react"),Dt=require("@raycast/api"),Fi=n=>{(0,Oi.useEffect)(()=>{n&&(n.status===401||n.status===403?(0,Dt.showToast)(Dt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,Dt.showToast)(Dt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[n])};var{pageSize:cl}=Hr(),dl={page_size:cl},Di=(n,r)=>{let o=r||dl,[i,s]=(0,Bi.useState)(o),{data:l,error:f,isValidating:b}=Ha([n,i],Pi);return Fi(f),{currentParams:i,data:l,defaultParams:o,loading:!l&&!f||b,setParams:s}};var Zn="/v2/all_highlight_tags";function ki(){let{data:n,loading:r,setParams:o,defaultParams:i}=Di(Zn);return{data:n,loading:r,refetch:async s=>{o(An(An({},i),Wi.default.parse(new URL(s,"https://readwise.io").search)))}}}var tt=require("@raycast/api"),Li=({actions:n,item:r})=>{let o=`https://readwise.io/tags/${encodeURIComponent(r.name)}`;return _jsx(tt.List.Item,{title:r.name,accessories:o&&[{text:o,icon:tt.Icon.Link}]||void 0,actions:_jsx(tt.ActionPanel,null,o&&_jsx(tt.Action.OpenInBrowser,{title:"Open in Browser",url:o}),n)})};var hl=_e(Ur());var Jn=(n,r)=>n?"Loading...":r.toString();var rn=require("@raycast/api"),qi=({onNextAction:n,onPreviousAction:r,onHomeAction:o})=>_jsx(_jsxFragment,null,n&&_jsx(rn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:n,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),r&&_jsx(_jsxFragment,null,_jsx(rn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),_jsx(rn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:o,shortcut:{modifiers:["cmd"],key:"0"}})));var Ii=require("@raycast/api");var zi=()=>_jsx(Ii.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}});function xi(){let{data:n,loading:r,refetch:o}=ki(),{next:i,previous:s}=n||{},l=n?.results.length||0,f=Jn(r,l);return _jsx(Xn.List,{isLoading:r,enableFiltering:!0},_jsx(zi,null),_jsx(Xn.List.Section,{title:"Results",subtitle:f},n?.results.map(b=>_jsx(Li,{key:b.name,item:b,actions:_jsx(qi,{onHomeAction:()=>o(Zn),onNextAction:i?()=>o(i):void 0,onPreviousAction:s?()=>s&&o(s):void 0})}))))}module.exports=fu(ml);0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
