var el=Object.create;var sr=Object.defineProperty;var tl=Object.getOwnPropertyDescriptor;var rl=Object.getOwnPropertyNames,qo=Object.getOwnPropertySymbols,nl=Object.getPrototypeOf,Io=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable;var Lo=(r,t,n)=>t in r?sr(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,Nn=(r,t)=>{for(var n in t||(t={}))Io.call(t,n)&&Lo(r,n,t[n]);if(qo)for(var n of qo(t))al.call(t,n)&&Lo(r,n,t[n]);return r};var Uo=r=>sr(r,"__esModule",{value:!0});var ur=(r,t)=>()=>(r&&(t=r(r=0)),t);var at=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),zo=(r,t)=>{for(var n in t)sr(r,n,{get:t[n],enumerable:!0})},No=(r,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of rl(t))!Io.call(r,i)&&(n||i!=="default")&&sr(r,i,{get:()=>t[i],enumerable:!(o=tl(t,i))||o.enumerable});return r},Ce=(r,t)=>No(Uo(sr(r!=null?el(nl(r)):{},"default",!t&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),ol=(r=>(t,n)=>r&&r.get(t)||(n=No(Uo({}),t,1),r&&r.set(t,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var Ho=at((sd,jo)=>{"use strict";jo.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var Go=at((ud,Qo)=>{"use strict";var Vo="%[a-f0-9]{2}",$o=new RegExp(Vo,"gi"),Yo=new RegExp("("+Vo+")+","gi");function jn(r,t){try{return decodeURIComponent(r.join(""))}catch{}if(r.length===1)return r;t=t||1;var n=r.slice(0,t),o=r.slice(t);return Array.prototype.concat.call([],jn(n),jn(o))}function il(r){try{return decodeURIComponent(r)}catch{for(var t=r.match($o),n=1;n<t.length;n++)r=jn(t,n).join(""),t=r.match($o);return r}}function sl(r){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Yo.exec(r);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var o=il(n[0]);o!==n[0]&&(t[n[0]]=o)}n=Yo.exec(r)}t["%C2"]="\uFFFD";for(var i=Object.keys(t),u=0;u<i.length;u++){var f=i[u];r=r.replace(new RegExp(f,"g"),t[f])}return r}Qo.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return sl(r)}}});var Ko=at((ld,Xo)=>{"use strict";Xo.exports=(r,t)=>{if(!(typeof r=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[r];let n=r.indexOf(t);return n===-1?[r]:[r.slice(0,n),r.slice(n+t.length)]}});var Zo=at((fd,Jo)=>{"use strict";Jo.exports=function(r,t){for(var n={},o=Object.keys(r),i=Array.isArray(t),u=0;u<o.length;u++){var f=o[u],h=r[f];(i?t.indexOf(f)!==-1:t(f,h,r))&&(n[f]=h)}return n}});var nn=at(le=>{"use strict";var ul=Ho(),ll=Go(),ti=Ko(),fl=Zo(),dl=r=>r==null,Hn=Symbol("encodeFragmentIdentifier");function cl(r){switch(r.arrayFormat){case"index":return t=>(n,o)=>{let i=n.length;return o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),"[",i,"]"].join("")]:[...n,[H(t,r),"[",H(i,r),"]=",H(o,r)].join("")]};case"bracket":return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),"[]"].join("")]:[...n,[H(t,r),"[]=",H(o,r)].join("")];case"colon-list-separator":return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,[H(t,r),":list="].join("")]:[...n,[H(t,r),":list=",H(o,r)].join("")];case"comma":case"separator":case"bracket-separator":{let t=r.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(o,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?o:(i=i===null?"":i,o.length===0?[[H(n,r),t,H(i,r)].join("")]:[[o,H(i,r)].join(r.arrayFormatSeparator)])}default:return t=>(n,o)=>o===void 0||r.skipNull&&o===null||r.skipEmptyString&&o===""?n:o===null?[...n,H(t,r)]:[...n,[H(t,r),"=",H(o,r)].join("")]}}function hl(r){let t;switch(r.arrayFormat){case"index":return(n,o,i)=>{if(t=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!t){i[n]=o;return}i[n]===void 0&&(i[n]={}),i[n][t[1]]=o};case"bracket":return(n,o,i)=>{if(t=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!t){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"colon-list-separator":return(n,o,i)=>{if(t=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!t){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"comma":case"separator":return(n,o,i)=>{let u=typeof o=="string"&&o.includes(r.arrayFormatSeparator),f=typeof o=="string"&&!u&&ze(o,r).includes(r.arrayFormatSeparator);o=f?ze(o,r):o;let h=u||f?o.split(r.arrayFormatSeparator).map(p=>ze(p,r)):o===null?o:ze(o,r);i[n]=h};case"bracket-separator":return(n,o,i)=>{let u=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!u){i[n]=o&&ze(o,r);return}let f=o===null?[]:o.split(r.arrayFormatSeparator).map(h=>ze(h,r));if(i[n]===void 0){i[n]=f;return}i[n]=[].concat(i[n],f)};default:return(n,o,i)=>{if(i[n]===void 0){i[n]=o;return}i[n]=[].concat(i[n],o)}}}function ri(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function H(r,t){return t.encode?t.strict?ul(r):encodeURIComponent(r):r}function ze(r,t){return t.decode?ll(r):r}function ni(r){return Array.isArray(r)?r.sort():typeof r=="object"?ni(Object.keys(r)).sort((t,n)=>Number(t)-Number(n)).map(t=>r[t]):r}function ai(r){let t=r.indexOf("#");return t!==-1&&(r=r.slice(0,t)),r}function ml(r){let t="",n=r.indexOf("#");return n!==-1&&(t=r.slice(n)),t}function oi(r){r=ai(r);let t=r.indexOf("?");return t===-1?"":r.slice(t+1)}function ei(r,t){return t.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):t.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function ii(r,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),ri(t.arrayFormatSeparator);let n=hl(t),o=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return o;for(let i of r.split("&")){if(i==="")continue;let[u,f]=ti(t.decode?i.replace(/\+/g," "):i,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?f:ze(f,t),n(ze(u,t),f,o)}for(let i of Object.keys(o)){let u=o[i];if(typeof u=="object"&&u!==null)for(let f of Object.keys(u))u[f]=ei(u[f],t);else o[i]=ei(u,t)}return t.sort===!1?o:(t.sort===!0?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((i,u)=>{let f=o[u];return Boolean(f)&&typeof f=="object"&&!Array.isArray(f)?i[u]=ni(f):i[u]=f,i},Object.create(null))}le.extract=oi;le.parse=ii;le.stringify=(r,t)=>{if(!r)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),ri(t.arrayFormatSeparator);let n=f=>t.skipNull&&dl(r[f])||t.skipEmptyString&&r[f]==="",o=cl(t),i={};for(let f of Object.keys(r))n(f)||(i[f]=r[f]);let u=Object.keys(i);return t.sort!==!1&&u.sort(t.sort),u.map(f=>{let h=r[f];return h===void 0?"":h===null?H(f,t):Array.isArray(h)?h.length===0&&t.arrayFormat==="bracket-separator"?H(f,t)+"[]":h.reduce(o(f),[]).join("&"):H(f,t)+"="+H(h,t)}).filter(f=>f.length>0).join("&")};le.parseUrl=(r,t)=>{t=Object.assign({decode:!0},t);let[n,o]=ti(r,"#");return Object.assign({url:n.split("?")[0]||"",query:ii(oi(r),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:ze(o,t)}:{})};le.stringifyUrl=(r,t)=>{t=Object.assign({encode:!0,strict:!0,[Hn]:!0},t);let n=ai(r.url).split("?")[0]||"",o=le.extract(r.url),i=le.parse(o,{sort:!1}),u=Object.assign(i,r.query),f=le.stringify(u,t);f&&(f=`?${f}`);let h=ml(r.url);return r.fragmentIdentifier&&(h=`#${t[Hn]?H(r.fragmentIdentifier,t):r.fragmentIdentifier}`),`${n}${f}${h}`};le.pick=(r,t,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[Hn]:!1},n);let{url:o,query:i,fragmentIdentifier:u}=le.parseUrl(r,n);return le.stringifyUrl({url:o,query:fl(i,t),fragmentIdentifier:u},n)};le.exclude=(r,t,n)=>{let o=Array.isArray(t)?i=>!t.includes(i):(i,u)=>!t(i,u);return le.pick(r,o,n)}});var Ei=at((un,Ci)=>{(function(r,t){typeof un=="object"&&typeof Ci<"u"?t(un):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(un,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=n,h=Promise,p=Promise.prototype.then,c=Promise.resolve.bind(h),_=Promise.reject.bind(h);function v(e){return new h(e)}function y(e){return c(e)}function w(e){return _(e)}function S(e,a,s){return p.call(e,a,s)}function E(e,a,s){S(S(e,a,s),void 0,f)}function T(e,a){E(e,a)}function g(e,a){E(e,void 0,a)}function O(e,a,s){return S(e,a,s)}function I(e){S(e,void 0,f)}let P=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=y(void 0);return s=>S(a,s)})();function q(e,a,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,s)}function D(e,a,s){try{return y(q(e,a,s))}catch(l){return w(l)}}let Z=16384;class K{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let s=this._back,l=s;s._elements.length===Z-1&&(l={_elements:[],_next:void 0}),s._elements.push(a),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let a=this._front,s=a,l=this._cursor,d=l+1,m=a._elements,b=m[l];return d===Z&&(s=a._next,d=0),--this._size,this._cursor=d,a!==s&&(this._front=s),m[l]=void 0,b}forEach(a){let s=this._cursor,l=this._front,d=l._elements;for(;(s!==d.length||l._next!==void 0)&&!(s===d.length&&(l=l._next,d=l._elements,s=0,d.length===0));)a(d[s]),++s}peek(){let a=this._front,s=this._cursor;return a._elements[s]}}function Q(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?$t(e):a._state==="closed"?Rr(e):ge(e,a._storedError)}function ft(e,a){let s=e._ownerReadableStream;return Re(s,a)}function oe(e){e._ownerReadableStream._state==="readable"?Be(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Tr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function xe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function $t(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s})}function ge(e,a){$t(e),Be(e,a)}function Rr(e){$t(e),Yt(e)}function Be(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Tr(e,a){ge(e,a)}function Yt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Cr=t("[[AbortSteps]]"),Pt=t("[[ErrorSteps]]"),dt=t("[[CancelSteps]]"),Ae=t("[[PullSteps]]"),At=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Ot=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Me(e){return typeof e=="object"||typeof e=="function"}function Se(e,a){if(e!==void 0&&!Me(e))throw new TypeError(`${a} is not an object.`)}function N(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function ie(e){return typeof e=="object"&&e!==null||typeof e=="function"}function te(e,a){if(!ie(e))throw new TypeError(`${a} is not an object.`)}function j(e,a,s){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${s}'.`)}function qe(e,a,s){if(e===void 0)throw new TypeError(`${a} is required in '${s}'.`)}function Le(e){return Number(e)}function de(e){return e===0?0:e}function J(e){return de(Ot(e))}function _e(e,a){let l=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=de(d),!At(d))throw new TypeError(`${a} is not a finite number`);if(d=J(d),d<0||d>l)throw new TypeError(`${a} is outside the accepted range of ${0} to ${l}, inclusive`);return!At(d)||d===0?0:d}function se(e,a){if(!tt(e))throw new TypeError(`${a} is not a ReadableStream.`)}function Oe(e){return new Xe(e)}function Ve(e,a){e._reader._readRequests.push(a)}function De(e,a,s){let d=e._reader._readRequests.shift();s?d._closeSteps():d._chunkSteps(a)}function Qe(e){return e._reader._readRequests.length}function Ge(e){let a=e._reader;return!(a===void 0||!Ke(a))}class Xe{constructor(a){if(j(a,1,"ReadableStreamDefaultReader"),se(a,"First parameter"),rt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Q(this,a),this._readRequests=new K}get closed(){return Ke(this)?this._closedPromise:w(Er("closed"))}cancel(a=void 0){return Ke(this)?this._ownerReadableStream===void 0?w(xe("cancel")):ft(this,a):w(Er("cancel"))}read(){if(!Ke(this))return w(Er("read"));if(this._ownerReadableStream===void 0)return w(xe("read from"));let a,s,l=v((m,b)=>{a=m,s=b});return Vt(this,{_chunkSteps:m=>a({value:m,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:m=>s(m)}),l}releaseLock(){if(!Ke(this))throw Er("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(Xe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Xe}function Vt(e,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?a._closeSteps():s._state==="errored"?a._errorSteps(s._storedError):s._readableStreamController[Ae](a)}function Er(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ka=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Fa{constructor(a,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=s}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?O(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let s=()=>this._returnSteps(a);return this._ongoingPromise?O(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return w(xe("iterate"));let s,l,d=v((b,R)=>{s=b,l=R});return Vt(a,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),l(b)}}),d}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(xe("finish iterating"));if(!this._preventCancel){let l=ft(s,a);return oe(s),O(l,()=>({value:a,done:!0}))}return oe(s),y({value:a,done:!0})}}let xa={next(){return Ba(this)?this._asyncIteratorImpl.next():w(Ma("next"))},return(e){return Ba(this)?this._asyncIteratorImpl.return(e):w(Ma("return"))}};ka!==void 0&&Object.setPrototypeOf(xa,ka);function Bs(e,a){let s=Oe(e),l=new Fa(s,a),d=Object.create(xa);return d._asyncIteratorImpl=l,d}function Ba(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Fa}catch{return!1}}function Ma(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let qa=Number.isNaN||function(e){return e!==e};function Qt(e){return e.slice()}function La(e,a,s,l,d){new Uint8Array(e).set(new Uint8Array(s,l,d),a)}function od(e){return e}function Pr(e){return!1}function Ia(e,a,s){if(e.slice)return e.slice(a,s);let l=s-a,d=new ArrayBuffer(l);return La(d,0,e,a,l),d}function Ms(e){return!(typeof e!="number"||qa(e)||e<0)}function Ua(e){let a=Ia(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function wn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function Sn(e,a,s){if(!Ms(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:s}),e._queueTotalSize+=s}function qs(e){return e._queue.peek().value}function Je(e){e._queue=new K,e._queueTotalSize=0}class Gt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!_n(this))throw Cn("view");return this._view}respond(a){if(!_n(this))throw Cn("respond");if(j(a,1,"respond"),a=_e(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Pr(this._view.buffer),kr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!_n(this))throw Cn("respondWithNewView");if(j(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Pr(a.buffer),Fr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Gt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Gt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Dt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ct(this))throw Kt("byobRequest");return Tn(this)}get desiredSize(){if(!ct(this))throw Kt("desiredSize");return Qa(this)}close(){if(!ct(this))throw Kt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);Xt(this)}enqueue(a){if(!ct(this))throw Kt("enqueue");if(j(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);Wr(this,a)}error(a=void 0){if(!ct(this))throw Kt("error");ve(this,a)}[dt](a){za(this),Je(this);let s=this._cancelAlgorithm(a);return Dr(this),s}[Ae](a){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,$a(this);let m=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);a._chunkSteps(m);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let d;try{d=new ArrayBuffer(l)}catch(b){a._errorSteps(b);return}let m={buffer:d,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(m)}Ve(s,a),ht(this)}}Object.defineProperties(Dt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ct(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Dt}function _n(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Gt}function ht(e){if(!zs(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ht(e))},l=>{ve(e,l)})}function za(e){Rn(e),e._pendingPullIntos=new K}function vn(e,a){let s=!1;e._state==="closed"&&(s=!0);let l=Na(a);a.readerType==="default"?De(e,l,s):Hs(e,l,s)}function Na(e){let a=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/s)}function Ar(e,a,s,l){e._queue.push({buffer:a,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function ja(e,a){let s=a.elementSize,l=a.bytesFilled-a.bytesFilled%s,d=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),m=a.bytesFilled+d,b=m-m%s,R=d,A=!1;b>l&&(R=b-a.bytesFilled,A=!0);let k=e._queue;for(;R>0;){let F=k.peek(),x=Math.min(R,F.byteLength),V=a.byteOffset+a.bytesFilled;La(a.buffer,V,F.buffer,F.byteOffset,x),F.byteLength===x?k.shift():(F.byteOffset+=x,F.byteLength-=x),e._queueTotalSize-=x,Ha(e,x,a),R-=x}return A}function Ha(e,a,s){s.bytesFilled+=a}function $a(e){e._queueTotalSize===0&&e._closeRequested?(Dr(e),or(e._controlledReadableByteStream)):ht(e)}function Rn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ya(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();ja(e,a)&&(Or(e),vn(e._controlledReadableByteStream,a))}}function Ls(e,a,s){let l=e._controlledReadableByteStream,d=1;a.constructor!==DataView&&(d=a.constructor.BYTES_PER_ELEMENT);let m=a.constructor,b=a.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:d,viewConstructor:m,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Ka(l,s);return}if(l._state==="closed"){let A=new m(R.buffer,R.byteOffset,0);s._closeSteps(A);return}if(e._queueTotalSize>0){if(ja(e,R)){let A=Na(R);$a(e),s._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");ve(e,A),s._errorSteps(A);return}}e._pendingPullIntos.push(R),Ka(l,s),ht(e)}function Is(e,a){let s=e._controlledReadableByteStream;if(En(s))for(;Ja(s)>0;){let l=Or(e);vn(s,l)}}function Us(e,a,s){if(Ha(e,a,s),s.bytesFilled<s.elementSize)return;Or(e);let l=s.bytesFilled%s.elementSize;if(l>0){let d=s.byteOffset+s.bytesFilled,m=Ia(s.buffer,d-l,d);Ar(e,m,0,m.byteLength)}s.bytesFilled-=l,vn(e._controlledReadableByteStream,s),Ya(e)}function Va(e,a){let s=e._pendingPullIntos.peek();Rn(e),e._controlledReadableByteStream._state==="closed"?Is(e):Us(e,a,s),ht(e)}function Or(e){return e._pendingPullIntos.shift()}function zs(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ge(a)&&Qe(a)>0||En(a)&&Ja(a)>0||Qa(e)>0)}function Dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Xt(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ve(e,l),l}Dr(e),or(a)}}function Wr(e,a){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=a.buffer,d=a.byteOffset,m=a.byteLength,b=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Pr(R.buffer),R.buffer=R.buffer}if(Rn(e),Ge(s))if(Qe(s)===0)Ar(e,b,d,m);else{e._pendingPullIntos.length>0&&Or(e);let R=new Uint8Array(b,d,m);De(s,R,!1)}else En(s)?(Ar(e,b,d,m),Ya(e)):Ar(e,b,d,m);ht(e)}function ve(e,a){let s=e._controlledReadableByteStream;s._state==="readable"&&(za(e),Je(e),Dr(e),Ro(s,a))}function Tn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),s=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),l=Object.create(Gt.prototype);js(l,e,s),e._byobRequest=l}return e._byobRequest}function Qa(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function kr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+a>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Va(e,a)}function Fr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+a.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=a.byteLength;s.buffer=a.buffer,Va(e,d)}function Ga(e,a,s,l,d,m,b){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Je(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,a._autoAllocateChunkSize=b,a._pendingPullIntos=new K,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,ht(a)},A=>{ve(a,A)})}function Ns(e,a,s){let l=Object.create(Dt.prototype),d=()=>{},m=()=>y(void 0),b=()=>y(void 0);a.start!==void 0&&(d=()=>a.start(l)),a.pull!==void 0&&(m=()=>a.pull(l)),a.cancel!==void 0&&(b=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ga(e,l,d,m,b,s,R)}function js(e,a,s){e._associatedReadableByteStreamController=a,e._view=s}function Cn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Kt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Xa(e){return new Jt(e)}function Ka(e,a){e._reader._readIntoRequests.push(a)}function Hs(e,a,s){let d=e._reader._readIntoRequests.shift();s?d._closeSteps(a):d._chunkSteps(a)}function Ja(e){return e._reader._readIntoRequests.length}function En(e){let a=e._reader;return!(a===void 0||!mt(a))}class Jt{constructor(a){if(j(a,1,"ReadableStreamBYOBReader"),se(a,"First parameter"),rt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ct(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Q(this,a),this._readIntoRequests=new K}get closed(){return mt(this)?this._closedPromise:w(xr("closed"))}cancel(a=void 0){return mt(this)?this._ownerReadableStream===void 0?w(xe("cancel")):ft(this,a):w(xr("cancel"))}read(a){if(!mt(this))return w(xr("read"));if(!ArrayBuffer.isView(a))return w(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Pr(a.buffer),this._ownerReadableStream===void 0)return w(xe("read from"));let s,l,d=v((b,R)=>{s=b,l=R});return Za(this,a,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>l(b)}),d}releaseLock(){if(!mt(this))throw xr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(Jt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function mt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Jt}function Za(e,a,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):Ls(l._readableStreamController,a,s)}function xr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Zt(e,a){let{highWaterMark:s}=e;if(s===void 0)return a;if(qa(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function Br(e){let{size:a}=e;return a||(()=>1)}function Mr(e,a){Se(e,a);let s=e==null?void 0:e.highWaterMark,l=e==null?void 0:e.size;return{highWaterMark:s===void 0?void 0:Le(s),size:l===void 0?void 0:$s(l,`${a} has member 'size' that`)}}function $s(e,a){return N(e,a),s=>Le(e(s))}function Ys(e,a){Se(e,a);let s=e==null?void 0:e.abort,l=e==null?void 0:e.close,d=e==null?void 0:e.start,m=e==null?void 0:e.type,b=e==null?void 0:e.write;return{abort:s===void 0?void 0:Vs(s,e,`${a} has member 'abort' that`),close:l===void 0?void 0:Qs(l,e,`${a} has member 'close' that`),start:d===void 0?void 0:Gs(d,e,`${a} has member 'start' that`),write:b===void 0?void 0:Xs(b,e,`${a} has member 'write' that`),type:m}}function Vs(e,a,s){return N(e,s),l=>D(e,a,[l])}function Qs(e,a,s){return N(e,s),()=>D(e,a,[])}function Gs(e,a,s){return N(e,s),l=>q(e,a,[l])}function Xs(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}function eo(e,a){if(!Wt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Ks(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Js=typeof AbortController=="function";function Zs(){if(Js)return new AbortController}class er{constructor(a={},s={}){a===void 0?a=null:te(a,"First parameter");let l=Mr(s,"Second parameter"),d=Ys(a,"First parameter");if(ro(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let b=Br(l),R=Zt(l,1);hu(this,d,R,b)}get locked(){if(!Wt(this))throw zr("locked");return kt(this)}abort(a=void 0){return Wt(this)?kt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):qr(this,a):w(zr("abort"))}close(){return Wt(this)?kt(this)?w(new TypeError("Cannot close a stream that already has a writer")):We(this)?w(new TypeError("Cannot close an already-closing stream")):no(this):w(zr("close"))}getWriter(){if(!Wt(this))throw zr("getWriter");return to(this)}}Object.defineProperties(er.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(er.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function to(e){return new tr(e)}function eu(e,a,s,l,d=1,m=()=>1){let b=Object.create(er.prototype);ro(b);let R=Object.create(Ft.prototype);return lo(b,R,e,a,s,l,d,m),b}function ro(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new K,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Wt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof er}function kt(e){return e._writer!==void 0}function qr(e,a){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=a,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;l==="erroring"&&(d=!0,a=void 0);let m=v((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:a,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=m,d||An(e,a),m}function no(e){let a=e._state;if(a==="closed"||a==="errored")return w(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let s=v((d,m)=>{let b={_resolve:d,_reject:m};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&a==="writable"&&qn(l),mu(e._writableStreamController),s}function tu(e){return v((s,l)=>{let d={_resolve:s,_reject:l};e._writeRequests.push(d)})}function Pn(e,a){if(e._state==="writable"){An(e,a);return}On(e)}function An(e,a){let s=e._writableStreamController;e._state="erroring",e._storedError=a;let l=e._writer;l!==void 0&&oo(l,a),!iu(e)&&s._started&&On(e)}function On(e){e._state="errored",e._writableStreamController[Pt]();let a=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(a)}),e._writeRequests=new K,e._pendingAbortRequest===void 0){Lr(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(a),Lr(e);return}let l=e._writableStreamController[Cr](s._reason);E(l,()=>{s._resolve(),Lr(e)},d=>{s._reject(d),Lr(e)})}function ru(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function nu(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,Pn(e,a)}function au(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&mo(s)}function ou(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),Pn(e,a)}function We(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function iu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function su(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function uu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Lr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Bn(a,e._storedError)}function Dn(e,a){let s=e._writer;s!==void 0&&a!==e._backpressure&&(a?_u(s):qn(s)),e._backpressure=a}class tr{constructor(a){if(j(a,1,"WritableStreamDefaultWriter"),eo(a,"First parameter"),kt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let s=a._state;if(s==="writable")!We(a)&&a._backpressure?jr(this):po(this),Nr(this);else if(s==="erroring")Mn(this,a._storedError),Nr(this);else if(s==="closed")po(this),wu(this);else{let l=a._storedError;Mn(this,l),ho(this,l)}}get closed(){return pt(this)?this._closedPromise:w(bt("closed"))}get desiredSize(){if(!pt(this))throw bt("desiredSize");if(this._ownerWritableStream===void 0)throw rr("desiredSize");return cu(this)}get ready(){return pt(this)?this._readyPromise:w(bt("ready"))}abort(a=void 0){return pt(this)?this._ownerWritableStream===void 0?w(rr("abort")):lu(this,a):w(bt("abort"))}close(){if(!pt(this))return w(bt("close"));let a=this._ownerWritableStream;return a===void 0?w(rr("close")):We(a)?w(new TypeError("Cannot close an already-closing stream")):ao(this)}releaseLock(){if(!pt(this))throw bt("releaseLock");this._ownerWritableStream!==void 0&&io(this)}write(a=void 0){return pt(this)?this._ownerWritableStream===void 0?w(rr("write to")):so(this,a):w(bt("write"))}}Object.defineProperties(tr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function pt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof tr}function lu(e,a){let s=e._ownerWritableStream;return qr(s,a)}function ao(e){let a=e._ownerWritableStream;return no(a)}function fu(e){let a=e._ownerWritableStream,s=a._state;return We(a)||s==="closed"?y(void 0):s==="errored"?w(a._storedError):ao(e)}function du(e,a){e._closedPromiseState==="pending"?Bn(e,a):Su(e,a)}function oo(e,a){e._readyPromiseState==="pending"?bo(e,a):vu(e,a)}function cu(e){let a=e._ownerWritableStream,s=a._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:fo(a._writableStreamController)}function io(e){let a=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");oo(e,s),du(e,s),a._writer=void 0,e._ownerWritableStream=void 0}function so(e,a){let s=e._ownerWritableStream,l=s._writableStreamController,d=pu(l,a);if(s!==e._ownerWritableStream)return w(rr("write to"));let m=s._state;if(m==="errored")return w(s._storedError);if(We(s)||m==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(m==="erroring")return w(s._storedError);let b=tu(s);return bu(l,a,d),b}let uo={};class Ft{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Wn(this))throw xn("abortReason");return this._abortReason}get signal(){if(!Wn(this))throw xn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!Wn(this))throw xn("error");this._controlledWritableStream._state==="writable"&&co(this,a)}[Cr](a){let s=this._abortAlgorithm(a);return Ir(this),s}[Pt](){Je(this)}}Object.defineProperties(Ft.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Wn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ft}function lo(e,a,s,l,d,m,b,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._abortReason=void 0,a._abortController=Zs(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=b,a._writeAlgorithm=l,a._closeAlgorithm=d,a._abortAlgorithm=m;let A=Fn(a);Dn(e,A);let k=s(),F=y(k);E(F,()=>{a._started=!0,Ur(a)},x=>{a._started=!0,Pn(e,x)})}function hu(e,a,s,l){let d=Object.create(Ft.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0),A=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.write!==void 0&&(b=k=>a.write(k,d)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=k=>a.abort(k)),lo(e,d,m,b,R,A,s,l)}function Ir(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function mu(e){Sn(e,uo,0),Ur(e)}function pu(e,a){try{return e._strategySizeAlgorithm(a)}catch(s){return kn(e,s),1}}function fo(e){return e._strategyHWM-e._queueTotalSize}function bu(e,a,s){try{Sn(e,a,s)}catch(d){kn(e,d);return}let l=e._controlledWritableStream;if(!We(l)&&l._state==="writable"){let d=Fn(e);Dn(l,d)}Ur(e)}function Ur(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){On(a);return}if(e._queue.length===0)return;let l=qs(e);l===uo?gu(e):yu(e,l)}function kn(e,a){e._controlledWritableStream._state==="writable"&&co(e,a)}function gu(e){let a=e._controlledWritableStream;su(a),wn(e);let s=e._closeAlgorithm();Ir(e),E(s,()=>{au(a)},l=>{ou(a,l)})}function yu(e,a){let s=e._controlledWritableStream;uu(s);let l=e._writeAlgorithm(a);E(l,()=>{ru(s);let d=s._state;if(wn(e),!We(s)&&d==="writable"){let m=Fn(e);Dn(s,m)}Ur(e)},d=>{s._state==="writable"&&Ir(e),nu(s,d)})}function Fn(e){return fo(e)<=0}function co(e,a){let s=e._controlledWritableStream;Ir(e),An(s,a)}function zr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function xn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function bt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function rr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Nr(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function ho(e,a){Nr(e),Bn(e,a)}function wu(e){Nr(e),mo(e)}function Bn(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Su(e,a){ho(e,a)}function mo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function jr(e){e._readyPromise=v((a,s)=>{e._readyPromise_resolve=a,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function Mn(e,a){jr(e),bo(e,a)}function po(e){jr(e),qn(e)}function bo(e,a){e._readyPromise_reject!==void 0&&(I(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function _u(e){jr(e)}function vu(e,a){Mn(e,a)}function qn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let go=typeof DOMException<"u"?DOMException:void 0;function Ru(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Tu(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Cu=Ru(go)?go:Tu();function yo(e,a,s,l,d,m){let b=Oe(e),R=to(a);e._disturbed=!0;let A=!1,k=y(void 0);return v((F,x)=>{let V;if(m!==void 0){if(V=()=>{let C=new Cu("Aborted","AbortError"),W=[];l||W.push(()=>a._state==="writable"?qr(a,C):y(void 0)),d||W.push(()=>e._state==="readable"?Re(e,C):y(void 0)),ue(()=>Promise.all(W.map(U=>U())),!0,C)},m.aborted){V();return}m.addEventListener("abort",V)}function Te(){return v((C,W)=>{function U(ce){ce?C():S(Mt(),U,W)}U(!1)})}function Mt(){return A?y(!0):S(R._readyPromise,()=>v((C,W)=>{Vt(b,{_chunkSteps:U=>{k=S(so(R,U),void 0,n),C(!1)},_closeSteps:()=>C(!0),_errorSteps:W})}))}if(Ie(e,b._closedPromise,C=>{l?ye(!0,C):ue(()=>qr(a,C),!0,C)}),Ie(a,R._closedPromise,C=>{d?ye(!0,C):ue(()=>Re(e,C),!0,C)}),re(e,b._closedPromise,()=>{s?ye():ue(()=>fu(R))}),We(a)||a._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?ye(!0,C):ue(()=>Re(e,C),!0,C)}I(Te());function nt(){let C=k;return S(k,()=>C!==k?nt():void 0)}function Ie(C,W,U){C._state==="errored"?U(C._storedError):g(W,U)}function re(C,W,U){C._state==="closed"?U():T(W,U)}function ue(C,W,U){if(A)return;A=!0,a._state==="writable"&&!We(a)?T(nt(),ce):ce();function ce(){E(C(),()=>Ue(W,U),qt=>Ue(!0,qt))}}function ye(C,W){A||(A=!0,a._state==="writable"&&!We(a)?T(nt(),()=>Ue(C,W)):Ue(C,W))}function Ue(C,W){io(R),oe(b),m!==void 0&&m.removeEventListener("abort",V),C?x(W):F(void 0)}})}class xt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Hr(this))throw Vr("desiredSize");return Ln(this)}close(){if(!Hr(this))throw Vr("close");if(!Bt(this))throw new TypeError("The stream is not in a state that permits close");ar(this)}enqueue(a=void 0){if(!Hr(this))throw Vr("enqueue");if(!Bt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Yr(this,a)}error(a=void 0){if(!Hr(this))throw Vr("error");Ze(this,a)}[dt](a){Je(this);let s=this._cancelAlgorithm(a);return $r(this),s}[Ae](a){let s=this._controlledReadableStream;if(this._queue.length>0){let l=wn(this);this._closeRequested&&this._queue.length===0?($r(this),or(s)):nr(this),a._chunkSteps(l)}else Ve(s,a),nr(this)}}Object.defineProperties(xt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Hr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof xt}function nr(e){if(!wo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,nr(e))},l=>{Ze(e,l)})}function wo(e){let a=e._controlledReadableStream;return!Bt(e)||!e._started?!1:!!(rt(a)&&Qe(a)>0||Ln(e)>0)}function $r(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ar(e){if(!Bt(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&($r(e),or(a))}function Yr(e,a){if(!Bt(e))return;let s=e._controlledReadableStream;if(rt(s)&&Qe(s)>0)De(s,a,!1);else{let l;try{l=e._strategySizeAlgorithm(a)}catch(d){throw Ze(e,d),d}try{Sn(e,a,l)}catch(d){throw Ze(e,d),d}}nr(e)}function Ze(e,a){let s=e._controlledReadableStream;s._state==="readable"&&(Je(e),$r(e),Ro(s,a))}function Ln(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Eu(e){return!wo(e)}function Bt(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function So(e,a,s,l,d,m,b){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,Je(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=b,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,nr(a)},A=>{Ze(a,A)})}function Pu(e,a,s,l){let d=Object.create(xt.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.pull!==void 0&&(b=()=>a.pull(d)),a.cancel!==void 0&&(R=A=>a.cancel(A)),So(e,d,m,b,R,s,l)}function Vr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Au(e,a){return ct(e._readableStreamController)?Du(e):Ou(e)}function Ou(e,a){let s=Oe(e),l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,V=v(re=>{x=re});function Te(){return l?(d=!0,y(void 0)):(l=!0,Vt(s,{_chunkSteps:ue=>{P(()=>{d=!1;let ye=ue,Ue=ue;m||Yr(k._readableStreamController,ye),b||Yr(F._readableStreamController,Ue),l=!1,d&&Te()})},_closeSteps:()=>{l=!1,m||ar(k._readableStreamController),b||ar(F._readableStreamController),(!m||!b)&&x(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function Mt(re){if(m=!0,R=re,b){let ue=Qt([R,A]),ye=Re(e,ue);x(ye)}return V}function nt(re){if(b=!0,A=re,m){let ue=Qt([R,A]),ye=Re(e,ue);x(ye)}return V}function Ie(){}return k=In(Ie,Te,Mt),F=In(Ie,Te,nt),g(s._closedPromise,re=>{Ze(k._readableStreamController,re),Ze(F._readableStreamController,re),(!m||!b)&&x(void 0)}),[k,F]}function Du(e){let a=Oe(e),s=!1,l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,V=v(C=>{x=C});function Te(C){g(C._closedPromise,W=>{C===a&&(ve(k._readableStreamController,W),ve(F._readableStreamController,W),(!m||!b)&&x(void 0))})}function Mt(){mt(a)&&(oe(a),a=Oe(e),Te(a)),Vt(a,{_chunkSteps:W=>{P(()=>{l=!1,d=!1;let U=W,ce=W;if(!m&&!b)try{ce=Ua(W)}catch(qt){ve(k._readableStreamController,qt),ve(F._readableStreamController,qt),x(Re(e,qt));return}m||Wr(k._readableStreamController,U),b||Wr(F._readableStreamController,ce),s=!1,l?Ie():d&&re()})},_closeSteps:()=>{s=!1,m||Xt(k._readableStreamController),b||Xt(F._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&kr(k._readableStreamController,0),F._readableStreamController._pendingPullIntos.length>0&&kr(F._readableStreamController,0),(!m||!b)&&x(void 0)},_errorSteps:()=>{s=!1}})}function nt(C,W){Ke(a)&&(oe(a),a=Xa(e),Te(a));let U=W?F:k,ce=W?k:F;Za(a,C,{_chunkSteps:Lt=>{P(()=>{l=!1,d=!1;let It=W?b:m;if(W?m:b)It||Fr(U._readableStreamController,Lt);else{let Mo;try{Mo=Ua(Lt)}catch(zn){ve(U._readableStreamController,zn),ve(ce._readableStreamController,zn),x(Re(e,zn));return}It||Fr(U._readableStreamController,Lt),Wr(ce._readableStreamController,Mo)}s=!1,l?Ie():d&&re()})},_closeSteps:Lt=>{s=!1;let It=W?b:m,rn=W?m:b;It||Xt(U._readableStreamController),rn||Xt(ce._readableStreamController),Lt!==void 0&&(It||Fr(U._readableStreamController,Lt),!rn&&ce._readableStreamController._pendingPullIntos.length>0&&kr(ce._readableStreamController,0)),(!It||!rn)&&x(void 0)},_errorSteps:()=>{s=!1}})}function Ie(){if(s)return l=!0,y(void 0);s=!0;let C=Tn(k._readableStreamController);return C===null?Mt():nt(C._view,!1),y(void 0)}function re(){if(s)return d=!0,y(void 0);s=!0;let C=Tn(F._readableStreamController);return C===null?Mt():nt(C._view,!0),y(void 0)}function ue(C){if(m=!0,R=C,b){let W=Qt([R,A]),U=Re(e,W);x(U)}return V}function ye(C){if(b=!0,A=C,m){let W=Qt([R,A]),U=Re(e,W);x(U)}return V}function Ue(){}return k=vo(Ue,Ie,ue),F=vo(Ue,re,ye),Te(a),[k,F]}function Wu(e,a){Se(e,a);let s=e,l=s==null?void 0:s.autoAllocateChunkSize,d=s==null?void 0:s.cancel,m=s==null?void 0:s.pull,b=s==null?void 0:s.start,R=s==null?void 0:s.type;return{autoAllocateChunkSize:l===void 0?void 0:_e(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:ku(d,s,`${a} has member 'cancel' that`),pull:m===void 0?void 0:Fu(m,s,`${a} has member 'pull' that`),start:b===void 0?void 0:xu(b,s,`${a} has member 'start' that`),type:R===void 0?void 0:Bu(R,`${a} has member 'type' that`)}}function ku(e,a,s){return N(e,s),l=>D(e,a,[l])}function Fu(e,a,s){return N(e,s),l=>D(e,a,[l])}function xu(e,a,s){return N(e,s),l=>q(e,a,[l])}function Bu(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Mu(e,a){Se(e,a);let s=e==null?void 0:e.mode;return{mode:s===void 0?void 0:qu(s,`${a} has member 'mode' that`)}}function qu(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Lu(e,a){Se(e,a);let s=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(s)}}function _o(e,a){Se(e,a);let s=e==null?void 0:e.preventAbort,l=e==null?void 0:e.preventCancel,d=e==null?void 0:e.preventClose,m=e==null?void 0:e.signal;return m!==void 0&&Iu(m,`${a} has member 'signal' that`),{preventAbort:Boolean(s),preventCancel:Boolean(l),preventClose:Boolean(d),signal:m}}function Iu(e,a){if(!Ks(e))throw new TypeError(`${a} is not an AbortSignal.`)}function Uu(e,a){Se(e,a);let s=e==null?void 0:e.readable;qe(s,"readable","ReadableWritablePair"),se(s,`${a} has member 'readable' that`);let l=e==null?void 0:e.writable;return qe(l,"writable","ReadableWritablePair"),eo(l,`${a} has member 'writable' that`),{readable:s,writable:l}}class et{constructor(a={},s={}){a===void 0?a=null:te(a,"First parameter");let l=Mr(s,"Second parameter"),d=Wu(a,"First parameter");if(Un(this),d.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let m=Zt(l,0);Ns(this,d,m)}else{let m=Br(l),b=Zt(l,1);Pu(this,d,b,m)}}get locked(){if(!tt(this))throw gt("locked");return rt(this)}cancel(a=void 0){return tt(this)?rt(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Re(this,a):w(gt("cancel"))}getReader(a=void 0){if(!tt(this))throw gt("getReader");return Mu(a,"First parameter").mode===void 0?Oe(this):Xa(this)}pipeThrough(a,s={}){if(!tt(this))throw gt("pipeThrough");j(a,1,"pipeThrough");let l=Uu(a,"First parameter"),d=_o(s,"Second parameter");if(rt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(kt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let m=yo(this,l.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return I(m),l.readable}pipeTo(a,s={}){if(!tt(this))return w(gt("pipeTo"));if(a===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Wt(a))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=_o(s,"Second parameter")}catch(d){return w(d)}return rt(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):kt(a)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):yo(this,a,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!tt(this))throw gt("tee");let a=Au(this);return Qt(a)}values(a=void 0){if(!tt(this))throw gt("values");let s=Lu(a,"First parameter");return Bs(this,s.preventCancel)}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(et.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(et.prototype,t.asyncIterator,{value:et.prototype.values,writable:!0,configurable:!0});function In(e,a,s,l=1,d=()=>1){let m=Object.create(et.prototype);Un(m);let b=Object.create(xt.prototype);return So(m,b,e,a,s,l,d),m}function vo(e,a,s){let l=Object.create(et.prototype);Un(l);let d=Object.create(Dt.prototype);return Ga(l,d,e,a,s,0,void 0),l}function Un(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof et}function rt(e){return e._reader!==void 0}function Re(e,a){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return w(e._storedError);or(e);let s=e._reader;s!==void 0&&mt(s)&&(s._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),s._readIntoRequests=new K);let l=e._readableStreamController[dt](a);return O(l,n)}function or(e){e._state="closed";let a=e._reader;a!==void 0&&(Yt(a),Ke(a)&&(a._readRequests.forEach(s=>{s._closeSteps()}),a._readRequests=new K))}function Ro(e,a){e._state="errored",e._storedError=a;let s=e._reader;s!==void 0&&(Be(s,a),Ke(s)?(s._readRequests.forEach(l=>{l._errorSteps(a)}),s._readRequests=new K):(s._readIntoRequests.forEach(l=>{l._errorSteps(a)}),s._readIntoRequests=new K))}function gt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function To(e,a){Se(e,a);let s=e==null?void 0:e.highWaterMark;return qe(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Le(s)}}let Co=e=>e.byteLength;Object.defineProperty(Co,"name",{value:"size",configurable:!0});class Qr{constructor(a){j(a,1,"ByteLengthQueuingStrategy"),a=To(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Po(this))throw Eo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Po(this))throw Eo("size");return Co}}Object.defineProperties(Qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Eo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Po(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Qr}let Ao=()=>1;Object.defineProperty(Ao,"name",{value:"size",configurable:!0});class Gr{constructor(a){j(a,1,"CountQueuingStrategy"),a=To(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Do(this))throw Oo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Do(this))throw Oo("size");return Ao}}Object.defineProperties(Gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Gr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Oo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Do(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Gr}function zu(e,a){Se(e,a);let s=e==null?void 0:e.flush,l=e==null?void 0:e.readableType,d=e==null?void 0:e.start,m=e==null?void 0:e.transform,b=e==null?void 0:e.writableType;return{flush:s===void 0?void 0:Nu(s,e,`${a} has member 'flush' that`),readableType:l,start:d===void 0?void 0:ju(d,e,`${a} has member 'start' that`),transform:m===void 0?void 0:Hu(m,e,`${a} has member 'transform' that`),writableType:b}}function Nu(e,a,s){return N(e,s),l=>D(e,a,[l])}function ju(e,a,s){return N(e,s),l=>q(e,a,[l])}function Hu(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}class Xr{constructor(a={},s={},l={}){a===void 0&&(a=null);let d=Mr(s,"Second parameter"),m=Mr(l,"Third parameter"),b=zu(a,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Zt(m,0),A=Br(m),k=Zt(d,1),F=Br(d),x,V=v(Te=>{x=Te});$u(this,V,k,F,R,A),Vu(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!Wo(this))throw Bo("readable");return this._readable}get writable(){if(!Wo(this))throw Bo("writable");return this._writable}}Object.defineProperties(Xr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function $u(e,a,s,l,d,m){function b(){return a}function R(V){return Xu(e,V)}function A(V){return Ku(e,V)}function k(){return Ju(e)}e._writable=eu(b,R,k,A,s,l);function F(){return Zu(e)}function x(V){return Jr(e,V),y(void 0)}e._readable=In(b,F,x,d,m),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Zr(e,!0),e._transformStreamController=void 0}function Wo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Xr}function Kr(e,a){Ze(e._readable._readableStreamController,a),Jr(e,a)}function Jr(e,a){ko(e._transformStreamController),kn(e._writable._writableStreamController,a),e._backpressure&&Zr(e,!1)}function Zr(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=v(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=a}class ir{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!en(this))throw tn("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return Ln(a)}enqueue(a=void 0){if(!en(this))throw tn("enqueue");Fo(this,a)}error(a=void 0){if(!en(this))throw tn("error");Qu(this,a)}terminate(){if(!en(this))throw tn("terminate");Gu(this)}}Object.defineProperties(ir.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function en(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof ir}function Yu(e,a,s,l){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=s,a._flushAlgorithm=l}function Vu(e,a){let s=Object.create(ir.prototype),l=m=>{try{return Fo(s,m),y(void 0)}catch(b){return w(b)}},d=()=>y(void 0);a.transform!==void 0&&(l=m=>a.transform(m,s)),a.flush!==void 0&&(d=()=>a.flush(s)),Yu(e,s,l,d)}function ko(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Fo(e,a){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!Bt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Yr(l,a)}catch(m){throw Jr(s,m),s._readable._storedError}Eu(l)!==s._backpressure&&Zr(s,!0)}function Qu(e,a){Kr(e._controlledTransformStream,a)}function xo(e,a){let s=e._transformAlgorithm(a);return O(s,void 0,l=>{throw Kr(e._controlledTransformStream,l),l})}function Gu(e){let a=e._controlledTransformStream,s=a._readable._readableStreamController;ar(s);let l=new TypeError("TransformStream terminated");Jr(a,l)}function Xu(e,a){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return O(l,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return xo(s,a)})}return xo(s,a)}function Ku(e,a){return Kr(e,a),y(void 0)}function Ju(e){let a=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return ko(s),O(l,()=>{if(a._state==="errored")throw a._storedError;ar(a._readableStreamController)},d=>{throw Kr(e,d),a._storedError})}function Zu(e){return Zr(e,!1),e._backpressureChangePromise}function tn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Bo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Qr,r.CountQueuingStrategy=Gr,r.ReadableByteStreamController=Dt,r.ReadableStream=et,r.ReadableStreamBYOBReader=Jt,r.ReadableStreamBYOBRequest=Gt,r.ReadableStreamDefaultController=xt,r.ReadableStreamDefaultReader=Xe,r.TransformStream=Xr,r.TransformStreamDefaultController=ir,r.WritableStream=er,r.WritableStreamDefaultController=Ft,r.WritableStreamDefaultWriter=tr,Object.defineProperty(r,"__esModule",{value:!0})})});var Pi=at(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(n){throw r.emitWarning=t,n}}catch{Object.assign(globalThis,Ei())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let h=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=h.byteLength,u.enqueue(new Uint8Array(h)),o===i.size&&u.close()}})})}catch{}});async function*ra(r,t=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let u=Math.min(i-o,Ai),f=n.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Ai)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var yd,Ai,Oi,ql,je,hr=ur(()=>{yd=Ce(Pi(),1);Ai=65536;Oi=class na{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],n={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof na?f=u:f=o.encode(`${u}`);let h=ArrayBuffer.isView(f)?f.byteLength:f.size;h&&(this.#r+=h,this.#e.push(f))}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,n="";for await(let o of ra(this.#e,!1))n+=t.decode(o,{stream:!0});return n+=t.decode(),n}async arrayBuffer(){let t=new Uint8Array(this.size),n=0;for await(let o of ra(this.#e,!1))t.set(o,n),n+=o.length;return t.buffer}stream(){let t=ra(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await t.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await t.return()}})}slice(t=0,n=this.size,o=""){let{size:i}=this,u=t<0?Math.max(i+t,0):Math.min(t,i),f=n<0?Math.max(i+n,0):Math.min(n,i),h=Math.max(f-u,0),p=this.#e,c=[],_=0;for(let y of p){if(_>=h)break;let w=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=y.slice(u,Math.min(w,f)),_+=S.size),f-=w,c.push(S),u=0}}let v=new na([],{type:String(o).toLowerCase()});return v.#r=h,v.#e=c,v}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Oi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});ql=Oi,je=ql});var Ll,Il,Ut,aa=ur(()=>{hr();Ll=class extends je{#e=0;#t="";constructor(t,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,o);o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof je&&/^(File)$/.test(t[Symbol.toStringTag])}},Il=Ll,Ut=Il});function ki(r,t=je){var n=`${Di()}${Di()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?o.push(i+oa(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+oa(f)+`"; filename="${oa(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new t(o,{type:"multipart/form-data; boundary="+n})}var mr,Ul,zl,Di,Nl,Wi,oa,St,_t,ln=ur(()=>{hr();aa();({toStringTag:mr,iterator:Ul,hasInstance:zl}=Symbol),Di=Math.random,Nl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Wi=(r,t,n)=>(r+="",/^(Blob|File)$/.test(t&&t[mr])?[(n=n!==void 0?n+"":t[mr]=="File"?t.name:"blob",r),t.name!==n||t[mr]=="blob"?new Ut([t],n,t):t]:[r,t+""]),oa=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),St=(r,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)},_t=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[mr](){return"FormData"}[Ul](){return this.entries()}static[zl](t){return t&&typeof t=="object"&&t[mr]==="FormData"&&!Nl.some(n=>typeof t[n]!="function")}append(...t){St("append",arguments,2),this.#e.push(Wi(...t))}delete(t){St("delete",arguments,1),t+="",this.#e=this.#e.filter(([n])=>n!==t)}get(t){St("get",arguments,1),t+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===t)return n[i][1];return null}getAll(t,n){return St("getAll",arguments,1),n=[],t+="",this.#e.forEach(o=>o[0]===t&&n.push(o[1])),n}has(t){return St("has",arguments,1),t+="",this.#e.some(n=>n[0]===t)}forEach(t,n){St("forEach",arguments,1);for(var[o,i]of this)t.call(n,i,o,this)}set(...t){St("set",arguments,2);var n=[],o=!0;t=Wi(...t),this.#e.forEach(i=>{i[0]===t[0]?o&&(o=!n.push(t)):n.push(i)}),o&&n.push(t),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Mi=at((Wd,Bi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Bi.exports=globalThis.DOMException});var br,qi,jl,sa,ua=ur(()=>{br=require("node:fs"),qi=Ce(Mi(),1);aa();hr();({stat:jl}=br.promises),sa=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified,this.originalSize=t.originalSize===void 0?t.size:t.originalSize}slice(t,n){return new sa({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:n-t,start:this.#t+t})}async*stream(){let{mtimeMs:t,size:n}=await jl(this.#e);if(t>this.lastModified||this.originalSize!==n)throw new qi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,br.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ui={};zo(Ui,{toFormData:()=>Xl});function Gl(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let n=t[2]||t[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),o}async function Xl(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new Ii(n[1]||n[2]),i,u,f,h,p,c,_=[],v=new _t,y=g=>{f+=T.decode(g,{stream:!0})},w=g=>{_.push(g)},S=()=>{let g=new Ut(_,c,{type:p});v.append(h,g)},E=()=>{v.append(h,f)},T=new TextDecoder("utf-8");T.decode(),o.onPartBegin=function(){o.onPartData=y,o.onPartEnd=E,i="",u="",f="",h="",p="",c=null,_.length=0},o.onHeaderField=function(g){i+=T.decode(g,{stream:!0})},o.onHeaderValue=function(g){u+=T.decode(g,{stream:!0})},o.onHeaderEnd=function(){if(u+=T.decode(),i=i.toLowerCase(),i==="content-disposition"){let g=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);g&&(h=g[2]||g[3]||""),c=Gl(u),c&&(o.onPartData=w,o.onPartEnd=S)}else i==="content-type"&&(p=u);u="",i=""};for await(let g of r)o.write(g);return o.end(),v}var Fe,z,Li,it,dn,cn,Hl,gr,$l,Yl,Vl,Ql,vt,Ii,zi=ur(()=>{ua();ln();Fe=0,z={START_BOUNDARY:Fe++,HEADER_FIELD_START:Fe++,HEADER_FIELD:Fe++,HEADER_VALUE_START:Fe++,HEADER_VALUE:Fe++,HEADER_VALUE_ALMOST_DONE:Fe++,HEADERS_ALMOST_DONE:Fe++,PART_DATA_START:Fe++,PART_DATA:Fe++,END:Fe++},Li=1,it={PART_BOUNDARY:Li,LAST_BOUNDARY:Li*=2},dn=10,cn=13,Hl=32,gr=45,$l=58,Yl=97,Vl=122,Ql=r=>r|32,vt=()=>{},Ii=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=vt,this.onHeaderField=vt,this.onHeadersEnd=vt,this.onHeaderValue=vt,this.onPartBegin=vt,this.onPartData=vt,this.onPartEnd=vt,this.boundaryChars={},t=`\r
--`+t;let n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(t){let n=0,o=t.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:h,index:p,state:c,flags:_}=this,v=this.boundary.length,y=v-1,w=t.length,S,E,T=P=>{this[P+"Mark"]=n},g=P=>{delete this[P+"Mark"]},O=(P,q,D,Z)=>{(q===void 0||q!==D)&&this[P](Z&&Z.subarray(q,D))},I=(P,q)=>{let D=P+"Mark";D in this&&(q?(O(P,this[D],n,t),delete this[D]):(O(P,this[D],t.length,t),this[D]=0))};for(n=0;n<o;n++)switch(S=t[n],c){case z.START_BOUNDARY:if(p===f.length-2){if(S===gr)_|=it.LAST_BOUNDARY;else if(S!==cn)return;p++;break}else if(p-1===f.length-2){if(_&it.LAST_BOUNDARY&&S===gr)c=z.END,_=0;else if(!(_&it.LAST_BOUNDARY)&&S===dn)p=0,O("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}S!==f[p+2]&&(p=-2),S===f[p+2]&&p++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,T("onHeaderField"),p=0;case z.HEADER_FIELD:if(S===cn){g("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(p++,S===gr)break;if(S===$l){if(p===1)return;I("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(E=Ql(S),E<Yl||E>Vl)return;break;case z.HEADER_VALUE_START:if(S===Hl)break;T("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:S===cn&&(I("onHeaderValue",!0),O("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==dn)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==dn)return;O("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,T("onPartData");case z.PART_DATA:if(i=p,p===0){for(n+=y;n<w&&!(t[n]in h);)n+=v;n-=y,S=t[n]}if(p<f.length)f[p]===S?(p===0&&I("onPartData",!0),p++):p=0;else if(p===f.length)p++,S===cn?_|=it.PART_BOUNDARY:S===gr?_|=it.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(_&it.PART_BOUNDARY){if(p=0,S===dn){_&=~it.PART_BOUNDARY,O("onPartEnd"),O("onPartBegin"),c=z.HEADER_FIELD_START;break}}else _&it.LAST_BOUNDARY&&S===gr?(O("onPartEnd"),c=z.END,_=0):p=0;if(p>0)u[p-1]=S;else if(i>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);O("onPartData",0,i,P),i=0,T("onPartData"),n--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}I("onHeaderField"),I("onHeaderValue"),I("onPartData"),this.index=p,this.state=c,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var ad={};zo(ad,{default:()=>xs});var Fs=require("@raycast/api");var ls=Ce(nn());var is=require("react");var L=require("react");function fi(r,t,n,o){function i(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function h(_){try{c(o.next(_))}catch(v){f(v)}}function p(_){try{c(o.throw(_))}catch(v){f(v)}}function c(_){_.done?u(_.value):i(_.value).then(h,p)}c((o=o.apply(r,t||[])).next())})}function di(r,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,i,u,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(c){return function(_){return p([c,_])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(u=c[0]&2?i.return:c[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,c[1])).done)return u;switch(i=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){n.label=c[1];break}if(c[0]===6&&n.label<u[1]){n.label=u[1],u=c;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(c);break}u[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(r,n)}catch(_){c=[6,_],i=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ke=function(){},ee=ke(),lr=Object,ne=function(r){return r===ee},wt=function(r){return typeof r=="function"},Ne=function(r,t){return lr.assign({},r,t)},Jn="undefined",Zn=function(){return typeof window!=Jn},pl=function(){return typeof document!=Jn},bl=function(){return Zn()&&typeof window.requestAnimationFrame!=Jn},an=new WeakMap,gl=0,cr=function(r){var t=typeof r,n=r&&r.constructor,o=n==Date,i,u;if(lr(r)===r&&!o&&n!=RegExp){if(i=an.get(r),i)return i;if(i=++gl+"~",an.set(r,i),n==Array){for(i="@",u=0;u<r.length;u++)i+=cr(r[u])+",";an.set(r,i)}if(n==lr){i="#";for(var f=lr.keys(r).sort();!ne(u=f.pop());)ne(r[u])||(i+=u+":"+cr(r[u])+",");an.set(r,i)}}else i=o?r.toJSON():t=="symbol"?r.toString():t=="string"?JSON.stringify(r):""+r;return i},Vn=!0,yl=function(){return Vn},ci=Zn(),ea=pl(),Qn=ci&&window.addEventListener?window.addEventListener.bind(window):ke,wl=ea?document.addEventListener.bind(document):ke,Gn=ci&&window.removeEventListener?window.removeEventListener.bind(window):ke,Sl=ea?document.removeEventListener.bind(document):ke,_l=function(){var r=ea&&document.visibilityState;return ne(r)||r!=="hidden"},vl=function(r){return wl("visibilitychange",r),Qn("focus",r),function(){Sl("visibilitychange",r),Gn("focus",r)}},Rl=function(r){var t=function(){Vn=!0,r()},n=function(){Vn=!1};return Qn("online",t),Qn("offline",n),function(){Gn("online",t),Gn("offline",n)}},Tl={isOnline:yl,isVisible:_l},Cl={initFocus:vl,initReconnect:Rl},on=!Zn()||"Deno"in window,El=function(r){return bl()?window.requestAnimationFrame(r):setTimeout(r,1)},fr=on?L.useEffect:L.useLayoutEffect,$n=typeof navigator<"u"&&navigator.connection,si=!on&&$n&&(["slow-2g","2g"].includes($n.effectiveType)||$n.saveData),hi=function(r){if(wt(r))try{r=r()}catch{r=""}var t=[].concat(r);r=typeof r=="string"?r:(Array.isArray(r)?r.length:r)?cr(r):"";var n=r?"$swr$"+r:"";return[r,t,n]},yt=new WeakMap,mi=0,pi=1,bi=2,dr=function(r,t,n,o,i,u,f){f===void 0&&(f=!0);var h=yt.get(r),p=h[0],c=h[1],_=h[3],v=p[t],y=c[t];if(f&&y)for(var w=0;w<y.length;++w)y[w](n,o,i);return u&&(delete _[t],v&&v[0])?v[0](bi).then(function(){return r.get(t)}):r.get(t)},Pl=0,Xn=function(){return++Pl},gi=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return fi(void 0,void 0,void 0,function(){var n,o,i,u,f,h,p,c,_,v,y,w,S,E,T,g,O,I,P,q;return di(this,function(D){switch(D.label){case 0:if(n=r[0],o=r[1],i=r[2],u=r[3],f=typeof u=="boolean"?{revalidate:u}:u||{},h=ne(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,c=f.rollbackOnError!==!1,_=f.optimisticData,v=hi(o),y=v[0],w=v[2],!y)return[2];if(S=yt.get(n),E=S[2],r.length<3)return[2,dr(n,y,n.get(y),ee,ee,p,!0)];if(T=i,O=Xn(),E[y]=[O,0],I=!ne(_),P=n.get(y),I&&(n.set(y,_),dr(n,y,_)),wt(T))try{T=T(n.get(y))}catch(Z){g=Z}return T&&wt(T.then)?[4,T.catch(function(Z){g=Z})]:[3,2];case 1:if(T=D.sent(),O!==E[y][0]){if(g)throw g;return[2,T]}else g&&I&&c&&(h=!0,T=P,n.set(y,P));D.label=2;case 2:return h&&(g||(wt(h)&&(T=h(T,P)),n.set(y,T)),n.set(w,Ne(n.get(w),{error:g}))),E[y][1]=Xn(),[4,dr(n,y,T,g,ee,p,!!h)];case 3:if(q=D.sent(),g)throw g;return[2,h?q:T]}})})},ui=function(r,t){for(var n in r)r[n][0]&&r[n][0](t)},yi=function(r,t){if(!yt.has(r)){var n=Ne(Cl,t),o={},i=gi.bind(ee,r),u=ke;if(yt.set(r,[o,{},{},{},i]),!on){var f=n.initFocus(setTimeout.bind(ee,ui.bind(ee,o,mi))),h=n.initReconnect(setTimeout.bind(ee,ui.bind(ee,o,pi)));u=function(){f&&f(),h&&h(),yt.delete(r)}}return[r,i,u]}return[r,yt.get(r)[4]]},Al=function(r,t,n,o,i){var u=n.errorRetryCount,f=i.retryCount,h=~~((Math.random()+.5)*(1<<(f<8?f:8)))*n.errorRetryInterval;!ne(u)&&f>u||setTimeout(o,h,i)},wi=yi(new Map),Si=wi[0],Ol=wi[1],_i=Ne({onLoadingSlow:ke,onSuccess:ke,onError:ke,onErrorRetry:Al,onDiscarded:ke,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:si?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:si?5e3:3e3,compare:function(r,t){return cr(r)==cr(t)},isPaused:function(){return!1},cache:Si,mutate:Ol,fallback:{}},Tl),vi=function(r,t){var n=Ne(r,t);if(t){var o=r.use,i=r.fallback,u=t.use,f=t.fallback;o&&u&&(n.use=o.concat(u)),i&&f&&(n.fallback=Ne(i,f))}return n},Kn=(0,L.createContext)({}),Dl=function(r){var t=r.value,n=vi((0,L.useContext)(Kn),t),o=t&&t.provider,i=(0,L.useState)(function(){return o?yi(o(n.cache||Si),t):ee})[0];return i&&(n.cache=i[0],n.mutate=i[1]),fr(function(){return i?i[2]:ee},[]),(0,L.createElement)(Kn.Provider,Ne(r,{value:n}))},Wl=function(r,t){var n=(0,L.useState)({})[1],o=(0,L.useRef)(r),i=(0,L.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,L.useCallback)(function(f){var h=!1,p=o.current;for(var c in f){var _=c;p[_]!==f[_]&&(p[_]=f[_],i.current[_]&&(h=!0))}h&&!t.current&&n({})},[]);return fr(function(){o.current=r}),[o,i.current,u]},kl=function(r){return wt(r[1])?[r[0],r[1],r[2]||{}]:[r[0],null,(r[1]===null?r[2]:r[1])||{}]},Fl=function(){return Ne(_i,(0,L.useContext)(Kn))},xl=function(r){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=Fl(),u=kl(n),f=u[0],h=u[1],p=u[2],c=vi(i,p),_=r,v=c.use;if(v)for(var y=v.length;y-- >0;)_=v[y](_);return _(f,h||c.fetcher,c)}},li=function(r,t,n){var o=t[r]||(t[r]=[]);return o.push(n),function(){var i=o.indexOf(n);i>=0&&(o[i]=o[o.length-1],o.pop())}},Yn={dedupe:!0},Bl=function(r,t,n){var o=n.cache,i=n.compare,u=n.fallbackData,f=n.suspense,h=n.revalidateOnMount,p=n.refreshInterval,c=n.refreshWhenHidden,_=n.refreshWhenOffline,v=yt.get(o),y=v[0],w=v[1],S=v[2],E=v[3],T=hi(r),g=T[0],O=T[1],I=T[2],P=(0,L.useRef)(!1),q=(0,L.useRef)(!1),D=(0,L.useRef)(g),Z=(0,L.useRef)(t),K=(0,L.useRef)(n),Q=function(){return K.current},ft=function(){return Q().isVisible()&&Q().isOnline()},oe=function(N){return o.set(I,Ne(o.get(I),N))},xe=o.get(g),$t=ne(u)?n.fallback[g]:u,ge=ne(xe)?$t:xe,Rr=o.get(I)||{},Be=Rr.error,Tr=!P.current,Yt=function(){return Tr&&!ne(h)?h:Q().isPaused()?!1:f?!ne(ge):ne(ge)||n.revalidateIfStale},Cr=function(){return!g||!t?!1:Rr.isValidating?!0:Tr&&Yt()},Pt=Cr(),dt=Wl({data:ge,error:Be,isValidating:Pt},q),Ae=dt[0],At=dt[1],Ot=dt[2],Me=(0,L.useCallback)(function(N){return fi(void 0,void 0,void 0,function(){var ie,te,j,qe,Le,de,J,_e,se,Oe,Ve,De,Qe;return di(this,function(Ge){switch(Ge.label){case 0:if(ie=Z.current,!g||!ie||q.current||Q().isPaused())return[2,!1];qe=!0,Le=N||{},de=!E[g]||!Le.dedupe,J=function(){return!q.current&&g===D.current&&P.current},_e=function(){var Xe=E[g];Xe&&Xe[1]===j&&delete E[g]},se={isValidating:!1},Oe=function(){oe({isValidating:!1}),J()&&Ot(se)},oe({isValidating:!0}),Ot({isValidating:!0}),Ge.label=1;case 1:return Ge.trys.push([1,3,,4]),de&&(dr(o,g,Ae.current.data,Ae.current.error,!0),n.loadingTimeout&&!o.get(g)&&setTimeout(function(){qe&&J()&&Q().onLoadingSlow(g,n)},n.loadingTimeout),E[g]=[ie.apply(void 0,O),Xn()]),Qe=E[g],te=Qe[0],j=Qe[1],[4,te];case 2:return te=Ge.sent(),de&&setTimeout(_e,n.dedupingInterval),!E[g]||E[g][1]!==j?(de&&J()&&Q().onDiscarded(g),[2,!1]):(oe({error:ee}),se.error=ee,Ve=S[g],!ne(Ve)&&(j<=Ve[0]||j<=Ve[1]||Ve[1]===0)?(Oe(),de&&J()&&Q().onDiscarded(g),[2,!1]):(i(Ae.current.data,te)?se.data=Ae.current.data:se.data=te,i(o.get(g),te)||o.set(g,te),de&&J()&&Q().onSuccess(te,g,n),[3,4]));case 3:return De=Ge.sent(),_e(),Q().isPaused()||(oe({error:De}),se.error=De,de&&J()&&(Q().onError(De,g,n),(typeof n.shouldRetryOnError=="boolean"&&n.shouldRetryOnError||wt(n.shouldRetryOnError)&&n.shouldRetryOnError(De))&&ft()&&Q().onErrorRetry(De,g,n,Me,{retryCount:(Le.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return qe=!1,Oe(),J()&&de&&dr(o,g,se.data,se.error,!1),[2,!0]}})})},[g]),Se=(0,L.useCallback)(gi.bind(ee,o,function(){return D.current}),[]);if(fr(function(){Z.current=t,K.current=n}),fr(function(){if(!!g){var N=g!==D.current,ie=Me.bind(ee,Yn),te=function(J,_e,se){Ot(Ne({error:_e,isValidating:se},i(Ae.current.data,J)?ee:{data:J}))},j=0,qe=function(J){if(J==mi){var _e=Date.now();Q().revalidateOnFocus&&_e>j&&ft()&&(j=_e+Q().focusThrottleInterval,ie())}else if(J==pi)Q().revalidateOnReconnect&&ft()&&ie();else if(J==bi)return Me()},Le=li(g,w,te),de=li(g,y,qe);return q.current=!1,D.current=g,P.current=!0,N&&Ot({data:ge,error:Be,isValidating:Pt}),Yt()&&(ne(ge)||on?ie():El(ie)),function(){q.current=!0,Le(),de()}}},[g,Me]),fr(function(){var N;function ie(){var j=wt(p)?p(ge):p;j&&N!==-1&&(N=setTimeout(te,j))}function te(){!Ae.current.error&&(c||Q().isVisible())&&(_||Q().isOnline())?Me(Yn).then(ie):ie()}return ie(),function(){N&&(clearTimeout(N),N=-1)}},[p,c,_,Me]),(0,L.useDebugValue)(ge),f&&ne(ge)&&g)throw Z.current=t,K.current=n,q.current=!1,ne(Be)?Me(Yn):Be;return{mutate:Se,get data(){return At.data=!0,ge},get error(){return At.error=!0,Be},get isValidating(){return At.isValidating=!0,Pt}}},cd=lr.defineProperty(Dl,"default",{value:_i});var ta=xl(Bl);var Ri=require("@raycast/api"),sn=()=>(0,Ri.getPreferenceValues)();var rs=Ce(require("node:http"),1),ns=Ce(require("node:https"),1),Rt=Ce(require("node:zlib"),1),be=Ce(require("node:stream"),1),wr=require("node:buffer");function Ml(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,t).split(";"),o="",i=!1,u=n[0]||"text/plain",f=u;for(let _=1;_<n.length;_++)n[_]==="base64"?i=!0:(f+=`;${n[_]}`,n[_].indexOf("charset=")===0&&(o=n[_].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let h=i?"base64":"ascii",p=unescape(r.substring(t+1)),c=Buffer.from(p,h);return c.type=u,c.typeFull=f,c.charset=o,c}var Ti=Ml;var we=Ce(require("node:stream"),1),$e=require("node:util"),me=require("node:buffer");hr();ln();var ot=class extends Error{constructor(t,n){super(t);Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var he=class extends ot{constructor(t,n,o){super(t,n);o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var fn=Symbol.toStringTag,ia=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[fn]==="URLSearchParams",pr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[fn]),Fi=r=>typeof r=="object"&&(r[fn]==="AbortSignal"||r[fn]==="EventTarget"),xi=(r,t)=>{let n=new URL(t).hostname,o=new URL(r).hostname;return n===o||n.endsWith(`.${o}`)};var Kl=(0,$e.promisify)(we.default.pipeline),fe=Symbol("Body internals"),He=class{constructor(t,{size:n=0}={}){let o=null;t===null?t=null:ia(t)?t=me.Buffer.from(t.toString()):pr(t)||me.Buffer.isBuffer(t)||($e.types.isAnyArrayBuffer(t)?t=me.Buffer.from(t):ArrayBuffer.isView(t)?t=me.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof we.default||(t instanceof _t?(t=ki(t),o=t.type.split("=")[1]):t=me.Buffer.from(String(t))));let i=t;me.Buffer.isBuffer(t)?i=we.default.Readable.from(t):pr(t)&&(i=we.default.Readable.from(t.stream())),this[fe]={body:t,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,t instanceof we.default&&t.on("error",u=>{let f=u instanceof ot?u:new he(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[fe].error=f})}get body(){return this[fe].stream}get bodyUsed(){return this[fe].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:n,byteLength:o}=await la(this);return t.slice(n,n+o)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let o=new _t,i=new URLSearchParams(await this.text());for(let[u,f]of i)o.append(u,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(zi(),Ui));return n(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[fe].body&&this[fe].body.type||"",n=await this.arrayBuffer();return new je([n],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await la(this);return new TextDecoder().decode(t)}buffer(){return la(this)}};He.prototype.buffer=(0,$e.deprecate)(He.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(He.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,$e.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function la(r){if(r[fe].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[fe].disturbed=!0,r[fe].error)throw r[fe].error;let{body:t}=r;if(t===null)return me.Buffer.alloc(0);if(!(t instanceof we.default))return me.Buffer.alloc(0);let n=[],o=0;try{for await(let i of t){if(r.size>0&&o+i.length>r.size){let u=new he(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}o+=i.length,n.push(i)}}catch(i){throw i instanceof ot?i:new he(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?me.Buffer.from(n.join("")):me.Buffer.concat(n,o)}catch(i){throw new he(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new he(`Premature close of server response while trying to fetch ${r.url}`)}var zt=(r,t)=>{let n,o,{body:i}=r[fe];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof we.default&&typeof i.getBoundary!="function"&&(n=new we.PassThrough({highWaterMark:t}),o=new we.PassThrough({highWaterMark:t}),i.pipe(n),i.pipe(o),r[fe].stream=n,i=o),i},Jl=(0,$e.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),hn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":ia(r)?"application/x-www-form-urlencoded;charset=UTF-8":pr(r)?r.type||null:me.Buffer.isBuffer(r)||$e.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof _t?`multipart/form-data; boundary=${t[fe].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Jl(r)}`:r instanceof we.default?null:"text/plain;charset=UTF-8",Ni=r=>{let{body:t}=r[fe];return t===null?0:pr(t)?t.size:me.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},ji=async(r,{body:t})=>{t===null?r.end():await Kl(t,r)};var fa=require("node:util"),yr=Ce(require("node:http"),1),mn=typeof yr.default.validateHeaderName=="function"?yr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},da=typeof yr.default.validateHeaderValue=="function"?yr.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},pe=class extends URLSearchParams{constructor(t){let n=[];if(t instanceof pe){let o=t.raw();for(let[i,u]of Object.entries(o))n.push(...u.map(f=>[i,f]))}else if(t!=null)if(typeof t=="object"&&!fa.types.isBoxedPrimitive(t)){let o=t[Symbol.iterator];if(o==null)n.push(...Object.entries(t));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...t].map(i=>{if(typeof i!="object"||fa.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");n=n.length>0?n.map(([o,i])=>(mn(o),da(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0;super(n);return new Proxy(this,{get(o,i,u){switch(i){case"append":case"set":return(f,h)=>(mn(f),da(f,String(h)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return f=>(mn(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let n=this.getAll(t);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(t)&&(o=o.toLowerCase()),o}forEach(t,n=void 0){for(let o of this.keys())Reflect.apply(t,n,[this.get(o),o,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,n)=>(t[n]=this.getAll(n),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,n)=>{let o=this.getAll(n);return n==="host"?t[n]=o[0]:t[n]=o.length>1?o:o[0],t},{})}};Object.defineProperties(pe.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Hi(r=[]){return new pe(r.reduce((t,n,o,i)=>(o%2===0&&t.push(i.slice(o,o+2)),t),[]).filter(([t,n])=>{try{return mn(t),da(t,String(n)),!0}catch{return!1}}))}var Zl=new Set([301,302,303,307,308]),pn=r=>Zl.has(r);var Ee=Symbol("Response internals"),ae=class extends He{constructor(t=null,n={}){super(t,n);let o=n.status!=null?n.status:200,i=new pe(n.headers);if(t!==null&&!i.has("Content-Type")){let u=hn(t,this);u&&i.append("Content-Type",u)}this[Ee]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Ee].type}get url(){return this[Ee].url||""}get status(){return this[Ee].status}get ok(){return this[Ee].status>=200&&this[Ee].status<300}get redirected(){return this[Ee].counter>0}get statusText(){return this[Ee].statusText}get headers(){return this[Ee].headers}get highWaterMark(){return this[Ee].highWaterMark}clone(){return new ae(zt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,n=302){if(!pn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new ae(null,{headers:{location:new URL(t).toString()},status:n})}static error(){let t=new ae(null,{status:0,statusText:""});return t[Ee].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(ae.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Zi=require("node:url"),es=require("node:util");var $i=r=>{if(r.search)return r.search;let t=r.href.length-1,n=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-n.length]==="?"?"?":""};var Vi=require("node:net");function Yi(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var Qi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Gi="strict-origin-when-cross-origin";function Xi(r){if(!Qi.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function ef(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),n=(0,Vi.isIP)(t);return n===4&&/^127\./.test(t)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function Nt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:ef(r)}function Ki(r,{referrerURLCallback:t,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let o=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=Yi(i),f=Yi(i,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),n&&(f=n(f));let h=new URL(r.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Nt(u)&&!Nt(h)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:Nt(u)&&!Nt(h)?"no-referrer":f;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:f;case"no-referrer-when-downgrade":return Nt(u)&&!Nt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Ji(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of t)o&&Qi.has(o)&&(n=o);return n}var X=Symbol("Request internals"),bn=r=>typeof r=="object"&&typeof r[X]=="object",tf=(0,es.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),st=class extends He{constructor(t,n={}){let o;if(bn(t)?o=new URL(t.url):(o=new URL(t),t={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||t.method||"GET";if(i=i.toUpperCase(),"data"in n&&tf(),(n.body!=null||bn(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:bn(t)&&t.body!==null?zt(t):null;super(u,{size:n.size||t.size||0});let f=new pe(n.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let c=hn(u,this);c&&f.set("Content-Type",c)}let h=bn(t)?t.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!Fi(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?t.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let c=new URL(p);p=/^about:(\/\/)?client$/.test(c)?"client":c}else p=void 0;this[X]={method:i,redirect:n.redirect||t.redirect||"follow",headers:f,parsedURL:o,signal:h,referrer:p},this.follow=n.follow===void 0?t.follow===void 0?20:t.follow:n.follow,this.compress=n.compress===void 0?t.compress===void 0?!0:t.compress:n.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent,this.highWaterMark=n.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||t.referrerPolicy||""}get method(){return this[X].method}get url(){return(0,Zi.format)(this[X].parsedURL)}get headers(){return this[X].headers}get redirect(){return this[X].redirect}get signal(){return this[X].signal}get referrer(){if(this[X].referrer==="no-referrer")return"";if(this[X].referrer==="client")return"about:client";if(this[X].referrer)return this[X].referrer.toString()}get referrerPolicy(){return this[X].referrerPolicy}set referrerPolicy(t){this[X].referrerPolicy=Xi(t)}clone(){return new st(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(st.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ts=r=>{let{parsedURL:t}=r[X],n=new pe(r[X].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(o="0"),r.body!==null){let h=Ni(r);typeof h=="number"&&!Number.isNaN(h)&&(o=String(h))}o&&n.set("Content-Length",o),r.referrerPolicy===""&&(r.referrerPolicy=Gi),r.referrer&&r.referrer!=="no-referrer"?r[X].referrer=Ki(r):r[X].referrer="no-referrer",r[X].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=r;typeof i=="function"&&(i=i(t)),!n.has("Connection")&&!i&&n.set("Connection","close");let u=$i(t),f={path:t.pathname+u,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:f}};var ca=class extends ot{constructor(t,n="aborted"){super(t,n)}};ln();ua();var rf=new Set(["data:","http:","https:"]);async function gn(r,t){return new Promise((n,o)=>{let i=new st(r,t),{parsedURL:u,options:f}=ts(i);if(!rf.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ti(i.url),E=new ae(S,{headers:{"Content-Type":S.typeFull}});n(E);return}let h=(u.protocol==="https:"?ns.default:rs.default).request,{signal:p}=i,c=null,_=()=>{let S=new ca("The operation was aborted.");o(S),i.body&&i.body instanceof be.default.Readable&&i.body.destroy(S),!(!c||!c.body)&&c.body.emit("error",S)};if(p&&p.aborted){_();return}let v=()=>{_(),w()},y=h(u.toString(),f);p&&p.addEventListener("abort",v);let w=()=>{y.abort(),p&&p.removeEventListener("abort",v)};y.on("error",S=>{o(new he(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),w()}),nf(y,S=>{c.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(c&&E<S._eventsCount&&!T){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",g)}})}),y.on("response",S=>{y.setTimeout(0);let E=Hi(S.rawHeaders);if(pn(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,i.url)}catch{if(i.redirect!=="manual"){o(new he(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),w();return}}switch(i.redirect){case"error":o(new he(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(q===null)break;if(i.counter>=i.follow){o(new he(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let D={headers:new pe(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:zt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!xi(i.url,q))for(let K of["authorization","www-authenticate","cookie","cookie2"])D.headers.delete(K);if(S.statusCode!==303&&i.body&&t.body instanceof be.default.Readable){o(new he("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(D.method="GET",D.body=void 0,D.headers.delete("content-length"));let Z=Ji(E);Z&&(D.referrerPolicy=Z),n(gn(new st(q,D))),w();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&S.once("end",()=>{p.removeEventListener("abort",v)});let T=(0,be.pipeline)(S,new be.PassThrough,P=>{P&&o(P)});process.version<"v12.10"&&S.on("aborted",v);let g={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},O=E.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||O===null||S.statusCode===204||S.statusCode===304){c=new ae(T,g),n(c);return}let I={flush:Rt.default.Z_SYNC_FLUSH,finishFlush:Rt.default.Z_SYNC_FLUSH};if(O==="gzip"||O==="x-gzip"){T=(0,be.pipeline)(T,Rt.default.createGunzip(I),P=>{P&&o(P)}),c=new ae(T,g),n(c);return}if(O==="deflate"||O==="x-deflate"){let P=(0,be.pipeline)(S,new be.PassThrough,q=>{q&&o(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,be.pipeline)(T,Rt.default.createInflate(),D=>{D&&o(D)}):T=(0,be.pipeline)(T,Rt.default.createInflateRaw(),D=>{D&&o(D)}),c=new ae(T,g),n(c)}),P.once("end",()=>{c||(c=new ae(T,g),n(c))});return}if(O==="br"){T=(0,be.pipeline)(T,Rt.default.createBrotliDecompress(),P=>{P&&o(P)}),c=new ae(T,g),n(c);return}c=new ae(T,g),n(c)}),ji(y,i).catch(o)})}function nf(r,t){let n=wr.Buffer.from(`0\r
\r
`),o=!1,i=!1,u;r.on("response",f=>{let{headers:h}=f;o=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",f=>{let h=()=>{if(o&&!i){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",t(p)}};f.prependListener("close",h),r.on("abort",()=>{f.removeListener("close",h)}),f.on("data",p=>{i=wr.Buffer.compare(p.slice(-5),n)===0,!i&&u&&(i=wr.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&wr.Buffer.compare(p.slice(-2),n.slice(3))===0),u=p})})}var as=Ce(nn());var{token:af}=sn(),of={method:"get",headers:{Authorization:`Token ${af}`}},ha=async(r,t)=>{let n=await gn(`https://readwise.io/api${r}?${as.default.stringify(t)}`,of),o=await n.json();if(!n.ok){let i=new Error("An error occurred while fetching the data.");throw i.status=n.status,i}return o};var os=require("react"),jt=require("@raycast/api"),ma=r=>{(0,os.useEffect)(()=>{r&&(r.status===401||r.status===403?(0,jt.showToast)(jt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,jt.showToast)(jt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[r])};var ss=r=>{let{data:t,error:n,isValidating:o}=ta(r,ha);return ma(n),{data:t,loading:!t&&!n||o}},{pageSize:sf}=sn(),uf={page_size:sf},us=(r,t)=>{let n=t||uf,[o,i]=(0,is.useState)(n),{data:u,error:f,isValidating:h}=ta([r,o],ha);return ma(f),{currentParams:o,data:u,defaultParams:n,loading:!u&&!f||h,setParams:i}};var pa="/v2/highlights";function fs(){let{data:r,loading:t,setParams:n,defaultParams:o}=us(pa);return{data:r,loading:t,refetch:async i=>{n(Nn(Nn({},o),ls.default.parse(new URL(i,"https://readwise.io").search)))}}}var Pe=require("@raycast/api");var Y=require("@raycast/api");function ds(r){let{data:t,loading:n}=ss(`/v2/books/${r}`);return{data:t,loading:n}}var ba=require("@raycast/api"),cs=({tags:r})=>r.length===0?null:_jsx(ba.Detail.Metadata.TagList,{title:"Tag"},r.map(t=>_jsx(ba.Detail.Metadata.TagList.Item,{key:t.name,text:t.name})));var rd=Ce(nn());function M(r,t){if(t.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+t.length+" present")}function ga(r){return M(1,arguments),r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function $(r){M(1,arguments);var t=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&t==="[object Date]"?new Date(r.getTime()):typeof r=="number"||t==="[object Number]"?new Date(r):((typeof r=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function ya(r){if(M(1,arguments),!ga(r)&&typeof r!="number")return!1;var t=$(r);return!isNaN(Number(t))}var lf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ff=function(r,t,n){var o,i=lf[r];return typeof i=="string"?o=i:t===1?o=i.one:o=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},hs=ff;function Sr(r){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):r.defaultWidth,o=r.formats[n]||r.formats[r.defaultWidth];return o}}var df={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hf={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mf={date:Sr({formats:df,defaultWidth:"full"}),time:Sr({formats:cf,defaultWidth:"full"}),dateTime:Sr({formats:hf,defaultWidth:"full"})},ms=mf;var pf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bf=function(r,t,n,o){return pf[r]},ps=bf;function Tt(r){return function(t,n){var o=n||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&r.formattingValues){var f=r.defaultFormattingWidth||r.defaultWidth,h=o.width?String(o.width):f;u=r.formattingValues[h]||r.formattingValues[f]}else{var p=r.defaultWidth,c=o.width?String(o.width):r.defaultWidth;u=r.values[c]||r.values[p]}var _=r.argumentCallback?r.argumentCallback(t):t;return u[_]}}var gf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_f={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rf=function(r,t){var n=Number(r),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Tf={ordinalNumber:Rf,era:Tt({values:gf,defaultWidth:"wide"}),quarter:Tt({values:yf,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:Tt({values:wf,defaultWidth:"wide"}),day:Tt({values:Sf,defaultWidth:"wide"}),dayPeriod:Tt({values:_f,defaultWidth:"wide",formattingValues:vf,defaultFormattingWidth:"wide"})},bs=Tf;function Ct(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,i=o&&r.matchPatterns[o]||r.matchPatterns[r.defaultMatchWidth],u=t.match(i);if(!u)return null;var f=u[0],h=o&&r.parsePatterns[o]||r.parsePatterns[r.defaultParseWidth],p=Array.isArray(h)?Ef(h,function(v){return v.test(f)}):Cf(h,function(v){return v.test(f)}),c;c=r.valueCallback?r.valueCallback(p):p,c=n.valueCallback?n.valueCallback(c):c;var _=t.slice(f.length);return{value:c,rest:_}}}function Cf(r,t){for(var n in r)if(r.hasOwnProperty(n)&&t(r[n]))return n}function Ef(r,t){for(var n=0;n<r.length;n++)if(t(r[n]))return n}function wa(r){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.match(r.matchPattern);if(!o)return null;var i=o[0],u=t.match(r.parsePattern);if(!u)return null;var f=r.valueCallback?r.valueCallback(u[0]):u[0];f=n.valueCallback?n.valueCallback(f):f;var h=t.slice(i.length);return{value:f,rest:h}}}var Pf=/^(\d+)(th|st|nd|rd)?/i,Af=/\d+/i,Of={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Df={any:[/^b/i,/^(a|c)/i]},Wf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kf={any:[/1/i,/2/i,/3/i,/4/i]},Ff={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},If={ordinalNumber:wa({matchPattern:Pf,parsePattern:Af,valueCallback:function(r){return parseInt(r,10)}}),era:Ct({matchPatterns:Of,defaultMatchWidth:"wide",parsePatterns:Df,defaultParseWidth:"any"}),quarter:Ct({matchPatterns:Wf,defaultMatchWidth:"wide",parsePatterns:kf,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:Ct({matchPatterns:Ff,defaultMatchWidth:"wide",parsePatterns:xf,defaultParseWidth:"any"}),day:Ct({matchPatterns:Bf,defaultMatchWidth:"wide",parsePatterns:Mf,defaultParseWidth:"any"}),dayPeriod:Ct({matchPatterns:qf,defaultMatchWidth:"any",parsePatterns:Lf,defaultParseWidth:"any"})},gs=If;var Uf={code:"en-US",formatDistance:hs,formatLong:ms,formatRelative:ps,localize:bs,match:gs,options:{weekStartsOn:0,firstWeekContainsDate:1}},ys=Uf;function G(r){if(r===null||r===!0||r===!1)return NaN;var t=Number(r);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Sa(r,t){M(2,arguments);var n=$(r).getTime(),o=G(t);return new Date(n+o)}function _a(r,t){M(2,arguments);var n=G(t);return Sa(r,-n)}var zf=864e5;function va(r){M(1,arguments);var t=$(r),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var o=t.getTime(),i=n-o;return Math.floor(i/zf)+1}function ut(r){M(1,arguments);var t=1,n=$(r),o=n.getUTCDay(),i=(o<t?7:0)+o-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function _r(r){M(1,arguments);var t=$(r),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=ut(o),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var f=ut(u);return t.getTime()>=i.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function Ra(r){M(1,arguments);var t=_r(r),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var o=ut(n);return o}var Nf=6048e5;function Ta(r){M(1,arguments);var t=$(r),n=ut(t).getTime()-Ra(t).getTime();return Math.round(n/Nf)+1}function lt(r,t){M(1,arguments);var n=t||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,u=i==null?0:G(i),f=n.weekStartsOn==null?u:G(n.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=$(r),p=h.getUTCDay(),c=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-c),h.setUTCHours(0,0,0,0),h}function vr(r,t){M(1,arguments);var n=$(r),o=n.getUTCFullYear(),i=t||{},u=i.locale,f=u&&u.options&&u.options.firstWeekContainsDate,h=f==null?1:G(f),p=i.firstWeekContainsDate==null?h:G(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(o+1,0,p),c.setUTCHours(0,0,0,0);var _=lt(c,t),v=new Date(0);v.setUTCFullYear(o,0,p),v.setUTCHours(0,0,0,0);var y=lt(v,t);return n.getTime()>=_.getTime()?o+1:n.getTime()>=y.getTime()?o:o-1}function Ca(r,t){M(1,arguments);var n=t||{},o=n.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=i==null?1:G(i),f=n.firstWeekContainsDate==null?u:G(n.firstWeekContainsDate),h=vr(r,t),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var c=lt(p,t);return c}var jf=6048e5;function Ea(r,t){M(1,arguments);var n=$(r),o=lt(n,t).getTime()-Ca(n,t).getTime();return Math.round(o/jf)+1}function B(r,t){for(var n=r<0?"-":"",o=Math.abs(r).toString();o.length<t;)o="0"+o;return n+o}var Hf={y:function(r,t){var n=r.getUTCFullYear(),o=n>0?n:1-n;return B(t==="yy"?o%100:o,t.length)},M:function(r,t){var n=r.getUTCMonth();return t==="M"?String(n+1):B(n+1,2)},d:function(r,t){return B(r.getUTCDate(),t.length)},a:function(r,t){var n=r.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(r,t){return B(r.getUTCHours()%12||12,t.length)},H:function(r,t){return B(r.getUTCHours(),t.length)},m:function(r,t){return B(r.getUTCMinutes(),t.length)},s:function(r,t){return B(r.getUTCSeconds(),t.length)},S:function(r,t){var n=t.length,o=r.getUTCMilliseconds(),i=Math.floor(o*Math.pow(10,n-3));return B(i,t.length)}},Ye=Hf;var Ht={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$f={G:function(r,t,n){var o=r.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(r,t,n){if(t==="yo"){var o=r.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return Ye.y(r,t)},Y:function(r,t,n,o){var i=vr(r,o),u=i>0?i:1-i;if(t==="YY"){var f=u%100;return B(f,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):B(u,t.length)},R:function(r,t){var n=_r(r);return B(n,t.length)},u:function(r,t){var n=r.getUTCFullYear();return B(n,t.length)},Q:function(r,t,n){var o=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return B(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(r,t,n){var o=Math.ceil((r.getUTCMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return B(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(r,t,n){var o=r.getUTCMonth();switch(t){case"M":case"MM":return Ye.M(r,t);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(r,t,n){var o=r.getUTCMonth();switch(t){case"L":return String(o+1);case"LL":return B(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(r,t,n,o){var i=Ea(r,o);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):B(i,t.length)},I:function(r,t,n){var o=Ta(r);return t==="Io"?n.ordinalNumber(o,{unit:"week"}):B(o,t.length)},d:function(r,t,n){return t==="do"?n.ordinalNumber(r.getUTCDate(),{unit:"date"}):Ye.d(r,t)},D:function(r,t,n){var o=va(r);return t==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):B(o,t.length)},E:function(r,t,n){var o=r.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(r,t,n,o){var i=r.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return B(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(r,t,n,o){var i=r.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return B(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(r,t,n){var o=r.getUTCDay(),i=o===0?7:o;switch(t){case"i":return String(i);case"ii":return B(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(r,t,n){var o=r.getUTCHours(),i=o/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,t,n){var o=r.getUTCHours(),i;switch(o===12?i=Ht.noon:o===0?i=Ht.midnight:i=o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,t,n){var o=r.getUTCHours(),i;switch(o>=17?i=Ht.evening:o>=12?i=Ht.afternoon:o>=4?i=Ht.morning:i=Ht.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,t,n){if(t==="ho"){var o=r.getUTCHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Ye.h(r,t)},H:function(r,t,n){return t==="Ho"?n.ordinalNumber(r.getUTCHours(),{unit:"hour"}):Ye.H(r,t)},K:function(r,t,n){var o=r.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,t.length)},k:function(r,t,n){var o=r.getUTCHours();return o===0&&(o=24),t==="ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,t.length)},m:function(r,t,n){return t==="mo"?n.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):Ye.m(r,t)},s:function(r,t,n){return t==="so"?n.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):Ye.s(r,t)},S:function(r,t){return Ye.S(r,t)},X:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();if(u===0)return"Z";switch(t){case"X":return Ss(u);case"XXXX":case"XX":return Et(u);case"XXXXX":case"XXX":default:return Et(u,":")}},x:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"x":return Ss(u);case"xxxx":case"xx":return Et(u);case"xxxxx":case"xxx":default:return Et(u,":")}},O:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ws(u,":");case"OOOO":default:return"GMT"+Et(u,":")}},z:function(r,t,n,o){var i=o._originalDate||r,u=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ws(u,":");case"zzzz":default:return"GMT"+Et(u,":")}},t:function(r,t,n,o){var i=o._originalDate||r,u=Math.floor(i.getTime()/1e3);return B(u,t.length)},T:function(r,t,n,o){var i=o._originalDate||r,u=i.getTime();return B(u,t.length)}};function ws(r,t){var n=r>0?"-":"+",o=Math.abs(r),i=Math.floor(o/60),u=o%60;if(u===0)return n+String(i);var f=t||"";return n+String(i)+f+B(u,2)}function Ss(r,t){if(r%60===0){var n=r>0?"-":"+";return n+B(Math.abs(r)/60,2)}return Et(r,t)}function Et(r,t){var n=t||"",o=r>0?"-":"+",i=Math.abs(r),u=B(Math.floor(i/60),2),f=B(i%60,2);return o+u+n+f}var _s=$f;function vs(r,t){switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function Rs(r,t){switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function Yf(r,t){var n=r.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return vs(r,t);var u;switch(o){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",vs(o,t)).replace("{{time}}",Rs(i,t))}var Vf={p:Rs,P:Yf},Ts=Vf;function Pa(r){var t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),r.getTime()-t.getTime()}var Qf=["D","DD"],Gf=["YY","YYYY"];function Cs(r){return Qf.indexOf(r)!==-1}function Es(r){return Gf.indexOf(r)!==-1}function Aa(r,t,n){if(r==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(r==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Xf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jf=/^'([^]*?)'?$/,Zf=/''/g,ed=/[a-zA-Z]/;function Oa(r,t,n){M(2,arguments);var o=String(t),i=n||{},u=i.locale||ys,f=u.options&&u.options.firstWeekContainsDate,h=f==null?1:G(f),p=i.firstWeekContainsDate==null?h:G(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=u.options&&u.options.weekStartsOn,_=c==null?0:G(c),v=i.weekStartsOn==null?_:G(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var y=$(r);if(!ya(y))throw new RangeError("Invalid time value");var w=Pa(y),S=_a(y,w),E={firstWeekContainsDate:p,weekStartsOn:v,locale:u,_originalDate:y},T=o.match(Kf).map(function(g){var O=g[0];if(O==="p"||O==="P"){var I=Ts[O];return I(g,u.formatLong,E)}return g}).join("").match(Xf).map(function(g){if(g==="''")return"'";var O=g[0];if(O==="'")return td(g);var I=_s[O];if(I)return!i.useAdditionalWeekYearTokens&&Es(g)&&Aa(g,t,r),!i.useAdditionalDayOfYearTokens&&Cs(g)&&Aa(g,t,r),I(S,g,u.localize,E);if(O.match(ed))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return g}).join("");return T}function td(r){return r.match(Jf)[1].replace(Zf,"'")}var Da=r=>Oa(new Date(r),"MMMM dd, yyyy hh:mm"),Ps=(r,t)=>r?r.filter(Boolean).join(t):"",As=(r,t)=>r?"Loading...":t.toString();var Os=({item:r})=>{let{data:t,loading:n}=ds(r.book_id),o=t?.highlights_url,i=`https://readwise.io/open/${r.id}`;return _jsx(Y.Detail,{isLoading:n,actions:_jsx(Y.ActionPanel,null,_jsx(Y.Action.CopyToClipboard,{title:"Copy Text",content:r.text,shortcut:{modifiers:["cmd"],key:"."}}),r.url&&_jsx(Y.Action.OpenInBrowser,{title:"Open Source",url:r.url}),_jsx(Y.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&_jsx(Y.Action.OpenInBrowser,{title:"Browse related highlights",url:o})),navigationTitle:"Highlight Detail",metadata:_jsx(Y.Detail.Metadata,null,_jsx(Y.Detail.Metadata.Label,{title:"Author",text:t?.author||"-"}),_jsx(Y.Detail.Metadata.Label,{title:"Category",text:t?.category||"-"}),_jsx(Y.Detail.Metadata.Label,{title:"Source",text:t?.source||"-"}),_jsx(Y.Detail.Metadata.Separator,null),_jsx(Y.Detail.Metadata.Label,{title:"Highlighted At",text:Da(r.highlighted_at)}),_jsx(Y.Detail.Metadata.Label,{title:"Updated At",text:Da(r.updated)}),_jsx(cs,{tags:r.tags}),_jsx(Y.Detail.Metadata.Separator,null),r.url&&_jsx(Y.Detail.Metadata.Link,{title:"Source",target:r.url,text:r.url}),_jsx(Y.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&_jsx(Y.Detail.Metadata.Link,{title:"Related",text:"Browse related highlights",target:o}),_jsx(Y.Detail.Metadata.Separator,null)),markdown:Ps([`## Hightlight
${r.text}`,r.note&&`## Notes
${r.note}`],`

`)})};var Ds=({actions:r,item:t})=>_jsx(Pe.List.Item,{title:t.text,subtitle:t.note,keywords:t.tags.map(n=>n.name),accessories:t.url&&[{text:t.url,icon:Pe.Icon.Link}]||void 0,actions:_jsx(Pe.ActionPanel,null,_jsx(Pe.Action.Push,{icon:Pe.Icon.Document,title:"Show Details",target:_jsx(Os,{item:t})}),t.url&&_jsx(Pe.Action.OpenInBrowser,{title:"Open in Browser",url:t.url}),_jsx(Pe.Action.CopyToClipboard,{title:"Copy Text",content:t.text,shortcut:{modifiers:["cmd"],key:"."}}),r)});var Wa=require("@raycast/api");var nd=()=>_jsx(Wa.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}}),Ws=({actions:r,data:t,loading:n,listView:o})=>{let i=t?.results.length||0,u=As(n,i);return _jsx(_jsxFragment,null,_jsx(nd,null),_jsx(Wa.List.Section,{title:"Results",subtitle:u},t?.results.map(f=>_jsx(o,{key:f.id,item:f,actions:r}))))};var yn=require("@raycast/api"),ks=({onNextAction:r,onPreviousAction:t,onHomeAction:n})=>_jsx(_jsxFragment,null,r&&_jsx(yn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),t&&_jsx(_jsxFragment,null,_jsx(yn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:t,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),_jsx(yn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:n,shortcut:{modifiers:["cmd"],key:"0"}})));function xs(){let{data:r,loading:t,refetch:n}=fs(),{next:o,previous:i}=r||{};return _jsx(Fs.List,{isLoading:t,enableFiltering:!0},_jsx(Ws,{loading:t,data:r,actions:_jsx(ks,{onHomeAction:()=>n(pa),onNextAction:o?()=>n(o):void 0,onPreviousAction:i?()=>i&&n(i):void 0}),listView:Ds}))}module.exports=ol(ad);0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
