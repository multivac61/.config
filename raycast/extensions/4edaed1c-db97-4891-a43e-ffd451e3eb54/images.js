"use strict";var Ou=Object.create;var vr=Object.defineProperty;var qu=Object.getOwnPropertyDescriptor;var Fu=Object.getOwnPropertyNames;var Du=Object.getPrototypeOf,Wu=Object.prototype.hasOwnProperty;var Ft=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Ai=(r,t)=>{for(var o in t)vr(r,o,{get:t[o],enumerable:!0})},vi=(r,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fu(t))!Wu.call(r,s)&&s!==o&&vr(r,s,{get:()=>t[s],enumerable:!(a=qu(t,s))||a.enumerable});return r};var ce=(r,t,o)=>(o=r!=null?Ou(Du(r)):{},vi(t||!r||!r.__esModule?vr(o,"default",{value:r,enumerable:!0}):o,r)),Lu=r=>vi(vr({},"__esModule",{value:!0}),r);var Li=A((kr,Wi)=>{(function(r,t){typeof kr=="object"&&typeof Wi<"u"?t(kr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(kr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,m=Promise.prototype.then,b=Promise.resolve.bind(p),_=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return b(e)}function g(e){return _(e)}function y(e,n,i){return m.call(e,n,i)}function C(e,n,i){y(y(e,n,i),void 0,f)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function F(e,n,i){return y(e,n,i)}function G(e){y(e,void 0,f)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return i=>y(n,i)})();function z(e,n,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,i)}function B(e,n,i){try{return S(z(e,n,i))}catch(l){return g(l)}}let ie=16384;class J{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let i=this._back,l=i;i._elements.length===ie-1&&(l={_elements:[],_next:void 0}),i._elements.push(n),l!==i&&(this._back=l,i._next=l),++this._size}shift(){let n=this._front,i=n,l=this._cursor,c=l+1,d=n._elements,h=d[l];return c===ie&&(i=n._next,c=0),--this._size,this._cursor=c,n!==i&&(this._front=i),d[l]=void 0,h}forEach(n){let i=this._cursor,l=this._front,c=l._elements;for(;(i!==c.length||l._next!==void 0)&&!(i===c.length&&(l=l._next,c=l._elements,i=0,c.length===0));)n(c[i]),++i}peek(){let n=this._front,i=this._cursor;return n._elements[i]}}function fo(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?nn(e):n._state==="closed"?ll(e):mo(e,n._storedError)}function rn(e,n){let i=e._ownerReadableStream;return le(i,n)}function ye(e){e._ownerReadableStream._state==="readable"?on(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ul(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ve(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function nn(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i})}function mo(e,n){nn(e),on(e,n)}function ll(e){nn(e),ho(e)}function on(e,n){e._closedPromise_reject!==void 0&&(G(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function ul(e,n){mo(e,n)}function ho(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let po=t("[[AbortSteps]]"),bo=t("[[ErrorSteps]]"),an=t("[[CancelSteps]]"),sn=t("[[PullSteps]]"),yo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},cl=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function fl(e){return typeof e=="object"||typeof e=="function"}function ge(e,n){if(e!==void 0&&!fl(e))throw new TypeError(`${n} is not an object.`)}function ae(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function dl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function go(e,n){if(!dl(e))throw new TypeError(`${n} is not an object.`)}function Se(e,n,i){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${i}'.`)}function ln(e,n,i){if(e===void 0)throw new TypeError(`${n} is required in '${i}'.`)}function un(e){return Number(e)}function So(e){return e===0?0:e}function ml(e){return So(cl(e))}function _o(e,n){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=So(c),!yo(c))throw new TypeError(`${n} is not a finite number`);if(c=ml(c),c<0||c>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!yo(c)||c===0?0:c}function cn(e,n){if(!Ie(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Ye(e){return new _t(e)}function wo(e,n){e._reader._readRequests.push(n)}function fn(e,n,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(n)}function Xt(e){return e._reader._readRequests.length}function Ro(e){let n=e._reader;return!(n===void 0||!Pe(n))}class _t{constructor(n){if(Se(n,1,"ReadableStreamDefaultReader"),cn(n,"First parameter"),xe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");fo(this,n),this._readRequests=new J}get closed(){return Pe(this)?this._closedPromise:g(Kt("closed"))}cancel(n=void 0){return Pe(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):rn(this,n):g(Kt("cancel"))}read(){if(!Pe(this))return g(Kt("read"));if(this._ownerReadableStream===void 0)return g(Ve("read from"));let n,i,l=T((d,h)=>{n=d,i=h});return wt(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>i(d)}),l}releaseLock(){if(!Pe(this))throw Kt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ye(this)}}}Object.defineProperties(_t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Pe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof _t}function wt(e,n){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?n._closeSteps():i._state==="errored"?n._errorSteps(i._storedError):i._readableStreamController[sn](n)}function Kt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let To=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Eo{constructor(n,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=i}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let i=()=>this._returnSteps(n);return this._ongoingPromise?F(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(Ve("iterate"));let i,l,c=T((h,w)=>{i=h,l=w});return wt(n,{_chunkSteps:h=>{this._ongoingPromise=void 0,I(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ye(n),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,ye(n),l(h)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(Ve("finish iterating"));if(!this._preventCancel){let l=rn(i,n);return ye(i),F(l,()=>({value:n,done:!0}))}return ye(i),S({value:n,done:!0})}}let Co={next(){return Po(this)?this._asyncIteratorImpl.next():g(Ao("next"))},return(e){return Po(this)?this._asyncIteratorImpl.return(e):g(Ao("return"))}};To!==void 0&&Object.setPrototypeOf(Co,To);function hl(e,n){let i=Ye(e),l=new Eo(i,n),c=Object.create(Co);return c._asyncIteratorImpl=l,c}function Po(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Eo}catch{return!1}}function Ao(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let vo=Number.isNaN||function(e){return e!==e};function Rt(e){return e.slice()}function ko(e,n,i,l,c){new Uint8Array(e).set(new Uint8Array(i,l,c),n)}function ud(e){return e}function Zt(e){return!1}function Io(e,n,i){if(e.slice)return e.slice(n,i);let l=i-n,c=new ArrayBuffer(l);return ko(c,0,e,n,l),c}function pl(e){return!(typeof e!="number"||vo(e)||e<0)}function xo(e){let n=Io(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function dn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function mn(e,n,i){if(!pl(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:i}),e._queueTotalSize+=i}function bl(e){return e._queue.peek().value}function Ae(e){e._queue=new J,e._queueTotalSize=0}class Tt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!hn(this))throw gn("view");return this._view}respond(n){if(!hn(this))throw gn("respond");if(Se(n,1,"respond"),n=_o(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Zt(this._view.buffer),nr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!hn(this))throw gn("respondWithNewView");if(Se(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Zt(n.buffer),or(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Tt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Qe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Fe(this))throw Ct("byobRequest");return yn(this)}get desiredSize(){if(!Fe(this))throw Ct("desiredSize");return $o(this)}close(){if(!Fe(this))throw Ct("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Et(this)}enqueue(n){if(!Fe(this))throw Ct("enqueue");if(Se(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);rr(this,n)}error(n=void 0){if(!Fe(this))throw Ct("error");se(this,n)}[an](n){Bo(this),Ae(this);let i=this._cancelAlgorithm(n);return tr(this),i}[sn](n){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Do(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(h){n._errorSteps(h);return}let d={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}wo(i,n),De(this)}}Object.defineProperties(Qe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Fe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Qe}function hn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Tt}function De(e){if(!_l(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,De(e))},l=>{se(e,l)})}function Bo(e){bn(e),e._pendingPullIntos=new J}function pn(e,n){let i=!1;e._state==="closed"&&(i=!0);let l=Oo(n);n.readerType==="default"?fn(e,l,i):Tl(e,l,i)}function Oo(e){let n=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/i)}function Jt(e,n,i,l){e._queue.push({buffer:n,byteOffset:i,byteLength:l}),e._queueTotalSize+=l}function qo(e,n){let i=n.elementSize,l=n.bytesFilled-n.bytesFilled%i,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+c,h=d-d%i,w=c,E=!1;h>l&&(w=h-n.bytesFilled,E=!0);let x=e._queue;for(;w>0;){let O=x.peek(),q=Math.min(w,O.byteLength),M=n.byteOffset+n.bytesFilled;ko(n.buffer,M,O.buffer,O.byteOffset,q),O.byteLength===q?x.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,Fo(e,q,n),w-=q}return E}function Fo(e,n,i){i.bytesFilled+=n}function Do(e){e._queueTotalSize===0&&e._closeRequested?(tr(e),Ot(e._controlledReadableByteStream)):De(e)}function bn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Wo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();qo(e,n)&&(er(e),pn(e._controlledReadableByteStream,n))}}function yl(e,n,i){let l=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,h=n.buffer,w={buffer:h,bufferByteLength:h.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(w),jo(l,i);return}if(l._state==="closed"){let E=new d(w.buffer,w.byteOffset,0);i._closeSteps(E);return}if(e._queueTotalSize>0){if(qo(e,w)){let E=Oo(w);Do(e),i._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");se(e,E),i._errorSteps(E);return}}e._pendingPullIntos.push(w),jo(l,i),De(e)}function gl(e,n){let i=e._controlledReadableByteStream;if(Sn(i))for(;Uo(i)>0;){let l=er(e);pn(i,l)}}function Sl(e,n,i){if(Fo(e,n,i),i.bytesFilled<i.elementSize)return;er(e);let l=i.bytesFilled%i.elementSize;if(l>0){let c=i.byteOffset+i.bytesFilled,d=Io(i.buffer,c-l,c);Jt(e,d,0,d.byteLength)}i.bytesFilled-=l,pn(e._controlledReadableByteStream,i),Wo(e)}function Lo(e,n){let i=e._pendingPullIntos.peek();bn(e),e._controlledReadableByteStream._state==="closed"?gl(e):Sl(e,n,i),De(e)}function er(e){return e._pendingPullIntos.shift()}function _l(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ro(n)&&Xt(n)>0||Sn(n)&&Uo(n)>0||$o(e)>0)}function tr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Et(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw se(e,l),l}tr(e),Ot(n)}}function rr(e,n){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let l=n.buffer,c=n.byteOffset,d=n.byteLength,h=l;if(e._pendingPullIntos.length>0){let w=e._pendingPullIntos.peek();Zt(w.buffer),w.buffer=w.buffer}if(bn(e),Ro(i))if(Xt(i)===0)Jt(e,h,c,d);else{e._pendingPullIntos.length>0&&er(e);let w=new Uint8Array(h,c,d);fn(i,w,!1)}else Sn(i)?(Jt(e,h,c,d),Wo(e)):Jt(e,h,c,d);De(e)}function se(e,n){let i=e._controlledReadableByteStream;i._state==="readable"&&(Bo(e),Ae(e),tr(e),mi(i,n))}function yn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),i=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(Tt.prototype);Rl(l,e,i),e._byobRequest=l}return e._byobRequest}function $o(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function nr(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+n>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,Lo(e,n)}function or(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+n.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;i.buffer=n.buffer,Lo(e,c)}function zo(e,n,i,l,c,d,h){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Ae(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,n._autoAllocateChunkSize=h,n._pendingPullIntos=new J,e._readableStreamController=n;let w=i();C(S(w),()=>{n._started=!0,De(n)},E=>{se(n,E)})}function wl(e,n,i){let l=Object.create(Qe.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);n.start!==void 0&&(c=()=>n.start(l)),n.pull!==void 0&&(d=()=>n.pull(l)),n.cancel!==void 0&&(h=E=>n.cancel(E));let w=n.autoAllocateChunkSize;if(w===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");zo(e,l,c,d,h,i,w)}function Rl(e,n,i){e._associatedReadableByteStreamController=n,e._view=i}function gn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ct(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Mo(e){return new Pt(e)}function jo(e,n){e._reader._readIntoRequests.push(n)}function Tl(e,n,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(n):c._chunkSteps(n)}function Uo(e){return e._reader._readIntoRequests.length}function Sn(e){let n=e._reader;return!(n===void 0||!We(n))}class Pt{constructor(n){if(Se(n,1,"ReadableStreamBYOBReader"),cn(n,"First parameter"),xe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Fe(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");fo(this,n),this._readIntoRequests=new J}get closed(){return We(this)?this._closedPromise:g(ir("closed"))}cancel(n=void 0){return We(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):rn(this,n):g(ir("cancel"))}read(n){if(!We(this))return g(ir("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Zt(n.buffer),this._ownerReadableStream===void 0)return g(Ve("read from"));let i,l,c=T((h,w)=>{i=h,l=w});return No(this,n,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>l(h)}),c}releaseLock(){if(!We(this))throw ir("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ye(this)}}}Object.defineProperties(Pt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function We(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Pt}function No(e,n,i){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?i._errorSteps(l._storedError):yl(l._readableStreamController,n,i)}function ir(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function At(e,n){let{highWaterMark:i}=e;if(i===void 0)return n;if(vo(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function ar(e){let{size:n}=e;return n||(()=>1)}function sr(e,n){ge(e,n);let i=e?.highWaterMark,l=e?.size;return{highWaterMark:i===void 0?void 0:un(i),size:l===void 0?void 0:El(l,`${n} has member 'size' that`)}}function El(e,n){return ae(e,n),i=>un(e(i))}function Cl(e,n){ge(e,n);let i=e?.abort,l=e?.close,c=e?.start,d=e?.type,h=e?.write;return{abort:i===void 0?void 0:Pl(i,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Al(l,e,`${n} has member 'close' that`),start:c===void 0?void 0:vl(c,e,`${n} has member 'start' that`),write:h===void 0?void 0:kl(h,e,`${n} has member 'write' that`),type:d}}function Pl(e,n,i){return ae(e,i),l=>B(e,n,[l])}function Al(e,n,i){return ae(e,i),()=>B(e,n,[])}function vl(e,n,i){return ae(e,i),l=>z(e,n,[l])}function kl(e,n,i){return ae(e,i),(l,c)=>B(e,n,[l,c])}function Go(e,n){if(!Xe(e))throw new TypeError(`${n} is not a WritableStream.`)}function Il(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let xl=typeof AbortController=="function";function Bl(){if(xl)return new AbortController}class vt{constructor(n={},i={}){n===void 0?n=null:go(n,"First parameter");let l=sr(i,"Second parameter"),c=Cl(n,"First parameter");if(Vo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=ar(l),w=At(l,1);Hl(this,c,w,h)}get locked(){if(!Xe(this))throw dr("locked");return Ke(this)}abort(n=void 0){return Xe(this)?Ke(this)?g(new TypeError("Cannot abort a stream that already has a writer")):lr(this,n):g(dr("abort"))}close(){return Xe(this)?Ke(this)?g(new TypeError("Cannot close a stream that already has a writer")):de(this)?g(new TypeError("Cannot close an already-closing stream")):Yo(this):g(dr("close"))}getWriter(){if(!Xe(this))throw dr("getWriter");return Ho(this)}}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Ho(e){return new kt(e)}function Ol(e,n,i,l,c=1,d=()=>1){let h=Object.create(vt.prototype);Vo(h);let w=Object.create(Ze.prototype);return ei(h,w,e,n,i,l,c,d),h}function Vo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new J,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Xe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof vt}function Ke(e){return e._writer!==void 0}function lr(e,n){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,n=void 0);let d=T((h,w)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:w,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||wn(e,n),d}function Yo(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&In(l),Vl(e._writableStreamController),i}function ql(e){return T((i,l)=>{let c={_resolve:i,_reject:l};e._writeRequests.push(c)})}function _n(e,n){if(e._state==="writable"){wn(e,n);return}Rn(e)}function wn(e,n){let i=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&Xo(l,n),!$l(e)&&i._started&&Rn(e)}function Rn(e){e._state="errored",e._writableStreamController[bo]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new J,e._pendingAbortRequest===void 0){ur(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(n),ur(e);return}let l=e._writableStreamController[po](i._reason);C(l,()=>{i._resolve(),ur(e)},c=>{i._reject(c),ur(e)})}function Fl(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Dl(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,_n(e,n)}function Wl(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&oi(i)}function Ll(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),_n(e,n)}function de(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function $l(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function zl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ml(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ur(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&vn(n,e._storedError)}function Tn(e,n){let i=e._writer;i!==void 0&&n!==e._backpressure&&(n?eu(i):In(i)),e._backpressure=n}class kt{constructor(n){if(Se(n,1,"WritableStreamDefaultWriter"),Go(n,"First parameter"),Ke(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let i=n._state;if(i==="writable")!de(n)&&n._backpressure?hr(this):ii(this),mr(this);else if(i==="erroring")kn(this,n._storedError),mr(this);else if(i==="closed")ii(this),Zl(this);else{let l=n._storedError;kn(this,l),ni(this,l)}}get closed(){return Le(this)?this._closedPromise:g($e("closed"))}get desiredSize(){if(!Le(this))throw $e("desiredSize");if(this._ownerWritableStream===void 0)throw It("desiredSize");return Gl(this)}get ready(){return Le(this)?this._readyPromise:g($e("ready"))}abort(n=void 0){return Le(this)?this._ownerWritableStream===void 0?g(It("abort")):jl(this,n):g($e("abort"))}close(){if(!Le(this))return g($e("close"));let n=this._ownerWritableStream;return n===void 0?g(It("close")):de(n)?g(new TypeError("Cannot close an already-closing stream")):Qo(this)}releaseLock(){if(!Le(this))throw $e("releaseLock");this._ownerWritableStream!==void 0&&Ko(this)}write(n=void 0){return Le(this)?this._ownerWritableStream===void 0?g(It("write to")):Zo(this,n):g($e("write"))}}Object.defineProperties(kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof kt}function jl(e,n){let i=e._ownerWritableStream;return lr(i,n)}function Qo(e){let n=e._ownerWritableStream;return Yo(n)}function Ul(e){let n=e._ownerWritableStream,i=n._state;return de(n)||i==="closed"?S(void 0):i==="errored"?g(n._storedError):Qo(e)}function Nl(e,n){e._closedPromiseState==="pending"?vn(e,n):Jl(e,n)}function Xo(e,n){e._readyPromiseState==="pending"?ai(e,n):tu(e,n)}function Gl(e){let n=e._ownerWritableStream,i=n._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:ti(n._writableStreamController)}function Ko(e){let n=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Xo(e,i),Nl(e,i),n._writer=void 0,e._ownerWritableStream=void 0}function Zo(e,n){let i=e._ownerWritableStream,l=i._writableStreamController,c=Yl(l,n);if(i!==e._ownerWritableStream)return g(It("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(de(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=ql(i);return Ql(l,n,c),h}let Jo={};class Ze{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!En(this))throw An("abortReason");return this._abortReason}get signal(){if(!En(this))throw An("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!En(this))throw An("error");this._controlledWritableStream._state==="writable"&&ri(this,n)}[po](n){let i=this._abortAlgorithm(n);return cr(this),i}[bo](){Ae(this)}}Object.defineProperties(Ze.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function En(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ze}function ei(e,n,i,l,c,d,h,w){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Ae(n),n._abortReason=void 0,n._abortController=Bl(),n._started=!1,n._strategySizeAlgorithm=w,n._strategyHWM=h,n._writeAlgorithm=l,n._closeAlgorithm=c,n._abortAlgorithm=d;let E=Pn(n);Tn(e,E);let x=i(),O=S(x);C(O,()=>{n._started=!0,fr(n)},q=>{n._started=!0,_n(e,q)})}function Hl(e,n,i,l){let c=Object.create(Ze.prototype),d=()=>{},h=()=>S(void 0),w=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.write!==void 0&&(h=x=>n.write(x,c)),n.close!==void 0&&(w=()=>n.close()),n.abort!==void 0&&(E=x=>n.abort(x)),ei(e,c,d,h,w,E,i,l)}function cr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vl(e){mn(e,Jo,0),fr(e)}function Yl(e,n){try{return e._strategySizeAlgorithm(n)}catch(i){return Cn(e,i),1}}function ti(e){return e._strategyHWM-e._queueTotalSize}function Ql(e,n,i){try{mn(e,n,i)}catch(c){Cn(e,c);return}let l=e._controlledWritableStream;if(!de(l)&&l._state==="writable"){let c=Pn(e);Tn(l,c)}fr(e)}function fr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){Rn(n);return}if(e._queue.length===0)return;let l=bl(e);l===Jo?Xl(e):Kl(e,l)}function Cn(e,n){e._controlledWritableStream._state==="writable"&&ri(e,n)}function Xl(e){let n=e._controlledWritableStream;zl(n),dn(e);let i=e._closeAlgorithm();cr(e),C(i,()=>{Wl(n)},l=>{Ll(n,l)})}function Kl(e,n){let i=e._controlledWritableStream;Ml(i);let l=e._writeAlgorithm(n);C(l,()=>{Fl(i);let c=i._state;if(dn(e),!de(i)&&c==="writable"){let d=Pn(e);Tn(i,d)}fr(e)},c=>{i._state==="writable"&&cr(e),Dl(i,c)})}function Pn(e){return ti(e)<=0}function ri(e,n){let i=e._controlledWritableStream;cr(e),wn(i,n)}function dr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function An(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function $e(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function It(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function mr(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function ni(e,n){mr(e),vn(e,n)}function Zl(e){mr(e),oi(e)}function vn(e,n){e._closedPromise_reject!==void 0&&(G(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Jl(e,n){ni(e,n)}function oi(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function hr(e){e._readyPromise=T((n,i)=>{e._readyPromise_resolve=n,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function kn(e,n){hr(e),ai(e,n)}function ii(e){hr(e),In(e)}function ai(e,n){e._readyPromise_reject!==void 0&&(G(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function eu(e){hr(e)}function tu(e,n){kn(e,n)}function In(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let si=typeof DOMException<"u"?DOMException:void 0;function ru(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function nu(){let e=function(i,l){this.message=i||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let ou=ru(si)?si:nu();function li(e,n,i,l,c,d){let h=Ye(e),w=Ho(n);e._disturbed=!0;let E=!1,x=S(void 0);return T((O,q)=>{let M;if(d!==void 0){if(M=()=>{let R=new ou("Aborted","AbortError"),k=[];l||k.push(()=>n._state==="writable"?lr(n,R):S(void 0)),c||k.push(()=>e._state==="readable"?le(e,R):S(void 0)),Q(()=>Promise.all(k.map(W=>W())),!0,R)},d.aborted){M();return}d.addEventListener("abort",M)}function ue(){return T((R,k)=>{function W(ee){ee?R():y(tt(),W,k)}W(!1)})}function tt(){return E?S(!0):y(w._readyPromise,()=>T((R,k)=>{wt(h,{_chunkSteps:W=>{x=y(Zo(w,W),void 0,o),R(!1)},_closeSteps:()=>R(!0),_errorSteps:k})}))}if(_e(e,h._closedPromise,R=>{l?ne(!0,R):Q(()=>lr(n,R),!0,R)}),_e(n,w._closedPromise,R=>{c?ne(!0,R):Q(()=>le(e,R),!0,R)}),Y(e,h._closedPromise,()=>{i?ne():Q(()=>Ul(w))}),de(n)||n._state==="closed"){let R=new TypeError("the destination writable stream closed before all data could be piped to it");c?ne(!0,R):Q(()=>le(e,R),!0,R)}G(ue());function Be(){let R=x;return y(x,()=>R!==x?Be():void 0)}function _e(R,k,W){R._state==="errored"?W(R._storedError):v(k,W)}function Y(R,k,W){R._state==="closed"?W():P(k,W)}function Q(R,k,W){if(E)return;E=!0,n._state==="writable"&&!de(n)?P(Be(),ee):ee();function ee(){C(R(),()=>we(k,W),rt=>we(!0,rt))}}function ne(R,k){E||(E=!0,n._state==="writable"&&!de(n)?P(Be(),()=>we(R,k)):we(R,k))}function we(R,k){Ko(w),ye(h),d!==void 0&&d.removeEventListener("abort",M),R?q(k):O(void 0)}})}class Je{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!pr(this))throw gr("desiredSize");return xn(this)}close(){if(!pr(this))throw gr("close");if(!et(this))throw new TypeError("The stream is not in a state that permits close");Bt(this)}enqueue(n=void 0){if(!pr(this))throw gr("enqueue");if(!et(this))throw new TypeError("The stream is not in a state that permits enqueue");return yr(this,n)}error(n=void 0){if(!pr(this))throw gr("error");ve(this,n)}[an](n){Ae(this);let i=this._cancelAlgorithm(n);return br(this),i}[sn](n){let i=this._controlledReadableStream;if(this._queue.length>0){let l=dn(this);this._closeRequested&&this._queue.length===0?(br(this),Ot(i)):xt(this),n._chunkSteps(l)}else wo(i,n),xt(this)}}Object.defineProperties(Je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function pr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Je}function xt(e){if(!ui(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,xt(e))},l=>{ve(e,l)})}function ui(e){let n=e._controlledReadableStream;return!et(e)||!e._started?!1:!!(xe(n)&&Xt(n)>0||xn(e)>0)}function br(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Bt(e){if(!et(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(br(e),Ot(n))}function yr(e,n){if(!et(e))return;let i=e._controlledReadableStream;if(xe(i)&&Xt(i)>0)fn(i,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(c){throw ve(e,c),c}try{mn(e,n,l)}catch(c){throw ve(e,c),c}}xt(e)}function ve(e,n){let i=e._controlledReadableStream;i._state==="readable"&&(Ae(e),br(e),mi(i,n))}function xn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function iu(e){return!ui(e)}function et(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function ci(e,n,i,l,c,d,h){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Ae(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=h,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,e._readableStreamController=n;let w=i();C(S(w),()=>{n._started=!0,xt(n)},E=>{ve(n,E)})}function au(e,n,i,l){let c=Object.create(Je.prototype),d=()=>{},h=()=>S(void 0),w=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.pull!==void 0&&(h=()=>n.pull(c)),n.cancel!==void 0&&(w=E=>n.cancel(E)),ci(e,c,d,h,w,i,l)}function gr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function su(e,n){return Fe(e._readableStreamController)?uu(e):lu(e)}function lu(e,n){let i=Ye(e),l=!1,c=!1,d=!1,h=!1,w,E,x,O,q,M=T(Y=>{q=Y});function ue(){return l?(c=!0,S(void 0)):(l=!0,wt(i,{_chunkSteps:Q=>{I(()=>{c=!1;let ne=Q,we=Q;d||yr(x._readableStreamController,ne),h||yr(O._readableStreamController,we),l=!1,c&&ue()})},_closeSteps:()=>{l=!1,d||Bt(x._readableStreamController),h||Bt(O._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function tt(Y){if(d=!0,w=Y,h){let Q=Rt([w,E]),ne=le(e,Q);q(ne)}return M}function Be(Y){if(h=!0,E=Y,d){let Q=Rt([w,E]),ne=le(e,Q);q(ne)}return M}function _e(){}return x=Bn(_e,ue,tt),O=Bn(_e,ue,Be),v(i._closedPromise,Y=>{ve(x._readableStreamController,Y),ve(O._readableStreamController,Y),(!d||!h)&&q(void 0)}),[x,O]}function uu(e){let n=Ye(e),i=!1,l=!1,c=!1,d=!1,h=!1,w,E,x,O,q,M=T(R=>{q=R});function ue(R){v(R._closedPromise,k=>{R===n&&(se(x._readableStreamController,k),se(O._readableStreamController,k),(!d||!h)&&q(void 0))})}function tt(){We(n)&&(ye(n),n=Ye(e),ue(n)),wt(n,{_chunkSteps:k=>{I(()=>{l=!1,c=!1;let W=k,ee=k;if(!d&&!h)try{ee=xo(k)}catch(rt){se(x._readableStreamController,rt),se(O._readableStreamController,rt),q(le(e,rt));return}d||rr(x._readableStreamController,W),h||rr(O._readableStreamController,ee),i=!1,l?_e():c&&Y()})},_closeSteps:()=>{i=!1,d||Et(x._readableStreamController),h||Et(O._readableStreamController),x._readableStreamController._pendingPullIntos.length>0&&nr(x._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&nr(O._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{i=!1}})}function Be(R,k){Pe(n)&&(ye(n),n=Mo(e),ue(n));let W=k?O:x,ee=k?x:O;No(n,R,{_chunkSteps:nt=>{I(()=>{l=!1,c=!1;let ot=k?h:d;if(k?d:h)ot||or(W._readableStreamController,nt);else{let Pi;try{Pi=xo(nt)}catch(qn){se(W._readableStreamController,qn),se(ee._readableStreamController,qn),q(le(e,qn));return}ot||or(W._readableStreamController,nt),rr(ee._readableStreamController,Pi)}i=!1,l?_e():c&&Y()})},_closeSteps:nt=>{i=!1;let ot=k?h:d,Ar=k?d:h;ot||Et(W._readableStreamController),Ar||Et(ee._readableStreamController),nt!==void 0&&(ot||or(W._readableStreamController,nt),!Ar&&ee._readableStreamController._pendingPullIntos.length>0&&nr(ee._readableStreamController,0)),(!ot||!Ar)&&q(void 0)},_errorSteps:()=>{i=!1}})}function _e(){if(i)return l=!0,S(void 0);i=!0;let R=yn(x._readableStreamController);return R===null?tt():Be(R._view,!1),S(void 0)}function Y(){if(i)return c=!0,S(void 0);i=!0;let R=yn(O._readableStreamController);return R===null?tt():Be(R._view,!0),S(void 0)}function Q(R){if(d=!0,w=R,h){let k=Rt([w,E]),W=le(e,k);q(W)}return M}function ne(R){if(h=!0,E=R,d){let k=Rt([w,E]),W=le(e,k);q(W)}return M}function we(){}return x=di(we,_e,Q),O=di(we,Y,ne),ue(n),[x,O]}function cu(e,n){ge(e,n);let i=e,l=i?.autoAllocateChunkSize,c=i?.cancel,d=i?.pull,h=i?.start,w=i?.type;return{autoAllocateChunkSize:l===void 0?void 0:_o(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:fu(c,i,`${n} has member 'cancel' that`),pull:d===void 0?void 0:du(d,i,`${n} has member 'pull' that`),start:h===void 0?void 0:mu(h,i,`${n} has member 'start' that`),type:w===void 0?void 0:hu(w,`${n} has member 'type' that`)}}function fu(e,n,i){return ae(e,i),l=>B(e,n,[l])}function du(e,n,i){return ae(e,i),l=>B(e,n,[l])}function mu(e,n,i){return ae(e,i),l=>z(e,n,[l])}function hu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function pu(e,n){ge(e,n);let i=e?.mode;return{mode:i===void 0?void 0:bu(i,`${n} has member 'mode' that`)}}function bu(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function yu(e,n){ge(e,n);let i=e?.preventCancel;return{preventCancel:Boolean(i)}}function fi(e,n){ge(e,n);let i=e?.preventAbort,l=e?.preventCancel,c=e?.preventClose,d=e?.signal;return d!==void 0&&gu(d,`${n} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(l),preventClose:Boolean(c),signal:d}}function gu(e,n){if(!Il(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Su(e,n){ge(e,n);let i=e?.readable;ln(i,"readable","ReadableWritablePair"),cn(i,`${n} has member 'readable' that`);let l=e?.writable;return ln(l,"writable","ReadableWritablePair"),Go(l,`${n} has member 'writable' that`),{readable:i,writable:l}}class ke{constructor(n={},i={}){n===void 0?n=null:go(n,"First parameter");let l=sr(i,"Second parameter"),c=cu(n,"First parameter");if(On(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=At(l,0);wl(this,c,d)}else{let d=ar(l),h=At(l,1);au(this,c,h,d)}}get locked(){if(!Ie(this))throw ze("locked");return xe(this)}cancel(n=void 0){return Ie(this)?xe(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):le(this,n):g(ze("cancel"))}getReader(n=void 0){if(!Ie(this))throw ze("getReader");return pu(n,"First parameter").mode===void 0?Ye(this):Mo(this)}pipeThrough(n,i={}){if(!Ie(this))throw ze("pipeThrough");Se(n,1,"pipeThrough");let l=Su(n,"First parameter"),c=fi(i,"Second parameter");if(xe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ke(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=li(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return G(d),l.readable}pipeTo(n,i={}){if(!Ie(this))return g(ze("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Xe(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=fi(i,"Second parameter")}catch(c){return g(c)}return xe(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ke(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):li(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Ie(this))throw ze("tee");let n=su(this);return Rt(n)}values(n=void 0){if(!Ie(this))throw ze("values");let i=yu(n,"First parameter");return hl(this,i.preventCancel)}}Object.defineProperties(ke.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ke.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(ke.prototype,t.asyncIterator,{value:ke.prototype.values,writable:!0,configurable:!0});function Bn(e,n,i,l=1,c=()=>1){let d=Object.create(ke.prototype);On(d);let h=Object.create(Je.prototype);return ci(d,h,e,n,i,l,c),d}function di(e,n,i){let l=Object.create(ke.prototype);On(l);let c=Object.create(Qe.prototype);return zo(l,c,e,n,i,0,void 0),l}function On(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ie(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ke}function xe(e){return e._reader!==void 0}function le(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);Ot(e);let i=e._reader;i!==void 0&&We(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new J);let l=e._readableStreamController[an](n);return F(l,o)}function Ot(e){e._state="closed";let n=e._reader;n!==void 0&&(ho(n),Pe(n)&&(n._readRequests.forEach(i=>{i._closeSteps()}),n._readRequests=new J))}function mi(e,n){e._state="errored",e._storedError=n;let i=e._reader;i!==void 0&&(on(i,n),Pe(i)?(i._readRequests.forEach(l=>{l._errorSteps(n)}),i._readRequests=new J):(i._readIntoRequests.forEach(l=>{l._errorSteps(n)}),i._readIntoRequests=new J))}function ze(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function hi(e,n){ge(e,n);let i=e?.highWaterMark;return ln(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:un(i)}}let pi=e=>e.byteLength;Object.defineProperty(pi,"name",{value:"size",configurable:!0});class Sr{constructor(n){Se(n,1,"ByteLengthQueuingStrategy"),n=hi(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!yi(this))throw bi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!yi(this))throw bi("size");return pi}}Object.defineProperties(Sr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Sr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function bi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function yi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Sr}let gi=()=>1;Object.defineProperty(gi,"name",{value:"size",configurable:!0});class _r{constructor(n){Se(n,1,"CountQueuingStrategy"),n=hi(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!_i(this))throw Si("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!_i(this))throw Si("size");return gi}}Object.defineProperties(_r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Si(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function _i(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof _r}function _u(e,n){ge(e,n);let i=e?.flush,l=e?.readableType,c=e?.start,d=e?.transform,h=e?.writableType;return{flush:i===void 0?void 0:wu(i,e,`${n} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Ru(c,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Tu(d,e,`${n} has member 'transform' that`),writableType:h}}function wu(e,n,i){return ae(e,i),l=>B(e,n,[l])}function Ru(e,n,i){return ae(e,i),l=>z(e,n,[l])}function Tu(e,n,i){return ae(e,i),(l,c)=>B(e,n,[l,c])}class wr{constructor(n={},i={},l={}){n===void 0&&(n=null);let c=sr(i,"Second parameter"),d=sr(l,"Third parameter"),h=_u(n,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let w=At(d,0),E=ar(d),x=At(c,1),O=ar(c),q,M=T(ue=>{q=ue});Eu(this,M,x,O,w,E),Pu(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!wi(this))throw Ci("readable");return this._readable}get writable(){if(!wi(this))throw Ci("writable");return this._writable}}Object.defineProperties(wr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Eu(e,n,i,l,c,d){function h(){return n}function w(M){return ku(e,M)}function E(M){return Iu(e,M)}function x(){return xu(e)}e._writable=Ol(h,w,x,E,i,l);function O(){return Bu(e)}function q(M){return Tr(e,M),S(void 0)}e._readable=Bn(h,O,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Er(e,!0),e._transformStreamController=void 0}function wi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof wr}function Rr(e,n){ve(e._readable._readableStreamController,n),Tr(e,n)}function Tr(e,n){Ri(e._transformStreamController),Cn(e._writable._writableStreamController,n),e._backpressure&&Er(e,!1)}function Er(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=n}class qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Cr(this))throw Pr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return xn(n)}enqueue(n=void 0){if(!Cr(this))throw Pr("enqueue");Ti(this,n)}error(n=void 0){if(!Cr(this))throw Pr("error");Au(this,n)}terminate(){if(!Cr(this))throw Pr("terminate");vu(this)}}Object.defineProperties(qt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Cr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof qt}function Cu(e,n,i,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=i,n._flushAlgorithm=l}function Pu(e,n){let i=Object.create(qt.prototype),l=d=>{try{return Ti(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);n.transform!==void 0&&(l=d=>n.transform(d,i)),n.flush!==void 0&&(c=()=>n.flush(i)),Cu(e,i,l,c)}function Ri(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ti(e,n){let i=e._controlledTransformStream,l=i._readable._readableStreamController;if(!et(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{yr(l,n)}catch(d){throw Tr(i,d),i._readable._storedError}iu(l)!==i._backpressure&&Er(i,!0)}function Au(e,n){Rr(e._controlledTransformStream,n)}function Ei(e,n){let i=e._transformAlgorithm(n);return F(i,void 0,l=>{throw Rr(e._controlledTransformStream,l),l})}function vu(e){let n=e._controlledTransformStream,i=n._readable._readableStreamController;Bt(i);let l=new TypeError("TransformStream terminated");Tr(n,l)}function ku(e,n){let i=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return F(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Ei(i,n)})}return Ei(i,n)}function Iu(e,n){return Rr(e,n),S(void 0)}function xu(e){let n=e._readable,i=e._transformStreamController,l=i._flushAlgorithm();return Ri(i),F(l,()=>{if(n._state==="errored")throw n._storedError;Bt(n._readableStreamController)},c=>{throw Rr(e,c),n._storedError})}function Bu(e){return Er(e,!1),e._backpressureChangePromise}function Pr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ci(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Sr,r.CountQueuingStrategy=_r,r.ReadableByteStreamController=Qe,r.ReadableStream=ke,r.ReadableStreamBYOBReader=Pt,r.ReadableStreamBYOBRequest=Tt,r.ReadableStreamDefaultController=Je,r.ReadableStreamDefaultReader=_t,r.TransformStream=wr,r.TransformStreamDefaultController=qt,r.WritableStream=vt,r.WritableStreamDefaultController=Ze,r.WritableStreamDefaultWriter=kt,Object.defineProperty(r,"__esModule",{value:!0})})});var $i=A(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Li())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let p=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=p.byteLength,u.enqueue(new Uint8Array(p)),a===s.size&&u.close()}})})}catch{}});async function*Fn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let u=Math.min(s-a,zi),f=o.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0,s=o;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+zi)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var pd,zi,Mi,zu,Re,Dt=Ft(()=>{pd=ce($i(),1);zi=65536;Mi=class Dn{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof Dn?f=u:f=a.encode(`${u}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let a of Fn(this.#e,!1))o+=t.decode(a,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let a of Fn(this.#e,!1))t.set(a,o),o+=a.length;return t.buffer}stream(){let t=Fn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await t.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,a=""){let{size:s}=this,u=t<0?Math.max(s+t,0):Math.min(t,s),f=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(f-u,0),m=this.#e,b=[],_=0;for(let S of m){if(_>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,f)),_+=y.byteLength):(y=S.slice(u,Math.min(g,f)),_+=y.size),f-=g,b.push(y),u=0}}let T=new Dn([],{type:String(a).toLowerCase()});return T.#r=p,T.#e=b,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Mi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});zu=Mi,Re=zu});var Mu,ju,at,Wn=Ft(()=>{Dt();Mu=class extends Re{#e=0;#t="";constructor(t,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,a),a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Re&&/^(File)$/.test(t[Symbol.toStringTag])}},ju=Mu,at=ju});function Ni(r,t=Re){var o=`${ji()}${ji()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?a.push(s+Ln(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Ln(f)+`"; filename="${Ln(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${o}--`),new t(a,{type:"multipart/form-data; boundary="+o})}var Wt,Uu,Nu,ji,Gu,Ui,Ln,Me,je,Ir=Ft(()=>{Dt();Wn();({toStringTag:Wt,iterator:Uu,hasInstance:Nu}=Symbol),ji=Math.random,Gu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ui=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Wt])?[(o=o!==void 0?o+"":t[Wt]=="File"?t.name:"blob",r),t.name!==o||t[Wt]=="blob"?new at([t],o,t):t]:[r,t+""]),Ln=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Me=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},je=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Wt](){return"FormData"}[Uu](){return this.entries()}static[Nu](t){return t&&typeof t=="object"&&t[Wt]==="FormData"&&!Gu.some(o=>typeof t[o]!="function")}append(...t){Me("append",arguments,2),this.#e.push(Ui(...t))}delete(t){Me("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Me("get",arguments,1),t+="";for(var o=this.#e,a=o.length,s=0;s<a;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Me("getAll",arguments,1),o=[],t+="",this.#e.forEach(a=>a[0]===t&&o.push(a[1])),o}has(t){return Me("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Me("forEach",arguments,1);for(var[a,s]of this)t.call(o,s,a,this)}set(...t){Me("set",arguments,2);var o=[],a=!0;t=Ui(...t),this.#e.forEach(s=>{s[0]===t[0]?a&&(a=!o.push(t)):o.push(s)}),a&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Yi=A((vd,Vi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Vi.exports=globalThis.DOMException});var $t,Qi,Hu,Br,zn=Ft(()=>{$t=require("node:fs"),Qi=ce(Yi(),1);Wn();Dt();({stat:Hu}=$t.promises),Br=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Br({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await Hu(this.#e);if(t>this.lastModified)throw new Qi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,$t.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ki={};Ai(Ki,{toFormData:()=>Ju});function Zu(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function Ju(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new Mn(o[1]||o[2]),s,u,f,p,m,b,_=[],T=new je,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{_.push(v)},y=()=>{let v=new at(_,b,{type:m});T.append(p,v)},C=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=C,s="",u="",f="",p="",m="",b=null,_.length=0},a.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},a.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},a.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),b=Zu(u),b&&(a.onPartData=g,a.onPartEnd=y)}else s==="content-type"&&(m=u);u="",s=""};for await(let v of r)a.write(v);return a.end(),T}var me,L,Xi,Oe,Or,qr,Vu,zt,Yu,Qu,Xu,Ku,Ue,Mn,Zi=Ft(()=>{zn();Ir();me=0,L={START_BOUNDARY:me++,HEADER_FIELD_START:me++,HEADER_FIELD:me++,HEADER_VALUE_START:me++,HEADER_VALUE:me++,HEADER_VALUE_ALMOST_DONE:me++,HEADERS_ALMOST_DONE:me++,PART_DATA_START:me++,PART_DATA:me++,END:me++},Xi=1,Oe={PART_BOUNDARY:Xi,LAST_BOUNDARY:Xi*=2},Or=10,qr=13,Vu=32,zt=45,Yu=58,Qu=97,Xu=122,Ku=r=>r|32,Ue=()=>{},Mn=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Ue,this.onHeaderField=Ue,this.onHeadersEnd=Ue,this.onHeaderValue=Ue,this.onPartBegin=Ue,this.onPartData=Ue,this.onPartEnd=Ue,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(t){let o=0,a=t.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:p,index:m,state:b,flags:_}=this,T=this.boundary.length,S=T-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},F=(I,z,B,ie)=>{(z===void 0||z!==B)&&this[I](ie&&ie.subarray(z,B))},G=(I,z)=>{let B=I+"Mark";B in this&&(z?(F(I,this[B],o,t),delete this[B]):(F(I,this[B],t.length,t),this[B]=0))};for(o=0;o<a;o++)switch(y=t[o],b){case L.START_BOUNDARY:if(m===f.length-2){if(y===zt)_|=Oe.LAST_BOUNDARY;else if(y!==qr)return;m++;break}else if(m-1===f.length-2){if(_&Oe.LAST_BOUNDARY&&y===zt)b=L.END,_=0;else if(!(_&Oe.LAST_BOUNDARY)&&y===Or)m=0,F("onPartBegin"),b=L.HEADER_FIELD_START;else return;break}y!==f[m+2]&&(m=-2),y===f[m+2]&&m++;break;case L.HEADER_FIELD_START:b=L.HEADER_FIELD,P("onHeaderField"),m=0;case L.HEADER_FIELD:if(y===qr){v("onHeaderField"),b=L.HEADERS_ALMOST_DONE;break}if(m++,y===zt)break;if(y===Yu){if(m===1)return;G("onHeaderField",!0),b=L.HEADER_VALUE_START;break}if(C=Ku(y),C<Qu||C>Xu)return;break;case L.HEADER_VALUE_START:if(y===Vu)break;P("onHeaderValue"),b=L.HEADER_VALUE;case L.HEADER_VALUE:y===qr&&(G("onHeaderValue",!0),F("onHeaderEnd"),b=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(y!==Or)return;b=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(y!==Or)return;F("onHeadersEnd"),b=L.PART_DATA_START;break;case L.PART_DATA_START:b=L.PART_DATA,P("onPartData");case L.PART_DATA:if(s=m,m===0){for(o+=S;o<g&&!(t[o]in p);)o+=T;o-=S,y=t[o]}if(m<f.length)f[m]===y?(m===0&&G("onPartData",!0),m++):m=0;else if(m===f.length)m++,y===qr?_|=Oe.PART_BOUNDARY:y===zt?_|=Oe.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(_&Oe.PART_BOUNDARY){if(m=0,y===Or){_&=~Oe.PART_BOUNDARY,F("onPartEnd"),F("onPartBegin"),b=L.HEADER_FIELD_START;break}}else _&Oe.LAST_BOUNDARY&&y===zt?(F("onPartEnd"),b=L.END,_=0):m=0;if(m>0)u[m-1]=y;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);F("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case L.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}G("onHeaderField"),G("onHeaderValue"),G("onPartData"),this.index=m,this.state=b,this.flags=_}end(){if(this.state===L.HEADER_FIELD_START&&this.index===0||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var _a=A((wm,Sa)=>{Sa.exports=ga;ga.sync=uc;var ba=require("fs");function lc(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function ya(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:lc(t,o)}function ga(r,t,o){ba.stat(r,function(a,s){o(a,a?!1:ya(s,r,t))})}function uc(r,t){return ya(ba.statSync(r),r,t)}});var Ca=A((Rm,Ea)=>{Ea.exports=Ra;Ra.sync=cc;var wa=require("fs");function Ra(r,t,o){wa.stat(r,function(a,s){o(a,a?!1:Ta(s,t))})}function cc(r,t){return Ta(wa.statSync(r),t)}function Ta(r,t){return r.isFile()&&fc(r,t)}function fc(r,t){var o=r.mode,a=r.uid,s=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),f=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),p=parseInt("100",8),m=parseInt("010",8),b=parseInt("001",8),_=p|m,T=o&b||o&m&&s===f||o&p&&a===u||o&_&&u===0;return T}});var Aa=A((Em,Pa)=>{var Tm=require("fs"),Mr;process.platform==="win32"||global.TESTING_WINDOWS?Mr=_a():Mr=Ca();Pa.exports=Nn;Nn.sync=dc;function Nn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){Nn(r,t||{},function(u,f){u?s(u):a(f)})})}Mr(r,t||{},function(a,s){a&&(a.code==="EACCES"||t&&t.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function dc(r,t){try{return Mr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var qa=A((Cm,Oa)=>{var ft=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",va=require("path"),mc=ft?";":":",ka=Aa(),Ia=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),xa=(r,t)=>{let o=t.colon||mc,a=r.match(/\//)||ft&&r.match(/\\/)?[""]:[...ft?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=ft?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=ft?s.split(o):[""];return ft&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:a,pathExt:u,pathExtExe:s}},Ba=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:a,pathExt:s,pathExtExe:u}=xa(r,t),f=[],p=b=>new Promise((_,T)=>{if(b===a.length)return t.all&&f.length?_(f):T(Ia(r));let S=a[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=va.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;_(m(C,b,0))}),m=(b,_,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(_+1));let y=s[T];ka(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(t.all)f.push(b+y);else return S(b+y);return S(m(b,_,T+1))})});return o?p(0).then(b=>o(null,b),o):p(0)},hc=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=xa(r,t),u=[];for(let f=0;f<o.length;f++){let p=o[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,b=va.join(m,r),_=!m&&/^\.[\\\/]/.test(r)?r.slice(0,2)+b:b;for(let T=0;T<a.length;T++){let S=_+a[T];try{if(ka.sync(S,{pathExt:s}))if(t.all)u.push(S);else return S}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw Ia(r)};Oa.exports=Ba;Ba.sync=hc});var Hn=A((Pm,Gn)=>{"use strict";var Fa=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};Gn.exports=Fa;Gn.exports.default=Fa});var $a=A((Am,La)=>{"use strict";var Da=require("path"),pc=qa(),bc=Hn();function Wa(r,t){let o=r.options.env||process.env,a=process.cwd(),s=r.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let f;try{f=pc.sync(r.command,{path:o[bc({env:o})],pathExt:t?Da.delimiter:void 0})}catch{}finally{u&&process.chdir(a)}return f&&(f=Da.resolve(s?r.options.cwd:"",f)),f}function yc(r){return Wa(r)||Wa(r,!0)}La.exports=yc});var za=A((vm,Yn)=>{"use strict";var Vn=/([()\][%!^"`<>&|;, *?])/g;function gc(r){return r=r.replace(Vn,"^$1"),r}function Sc(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Vn,"^$1"),t&&(r=r.replace(Vn,"^$1")),r}Yn.exports.command=gc;Yn.exports.argument=Sc});var ja=A((km,Ma)=>{"use strict";Ma.exports=/^#!(.*)/});var Na=A((Im,Ua)=>{"use strict";var _c=ja();Ua.exports=(r="")=>{let t=r.match(_c);if(!t)return null;let[o,a]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var Ha=A((xm,Ga)=>{"use strict";var Qn=require("fs"),wc=Na();function Rc(r){let o=Buffer.alloc(150),a;try{a=Qn.openSync(r,"r"),Qn.readSync(a,o,0,150,0),Qn.closeSync(a)}catch{}return wc(o.toString())}Ga.exports=Rc});var Xa=A((Bm,Qa)=>{"use strict";var Tc=require("path"),Va=$a(),Ya=za(),Ec=Ha(),Cc=process.platform==="win32",Pc=/\.(?:com|exe)$/i,Ac=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function vc(r){r.file=Va(r);let t=r.file&&Ec(r.file);return t?(r.args.unshift(r.file),r.command=t,Va(r)):r.file}function kc(r){if(!Cc)return r;let t=vc(r),o=!Pc.test(t);if(r.options.forceShell||o){let a=Ac.test(t);r.command=Tc.normalize(r.command),r.command=Ya.command(r.command),r.args=r.args.map(u=>Ya.argument(u,a));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Ic(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let a={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?a:kc(a)}Qa.exports=Ic});var Ja=A((Om,Za)=>{"use strict";var Xn=process.platform==="win32";function Kn(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function xc(r,t){if(!Xn)return;let o=r.emit;r.emit=function(a,s){if(a==="exit"){let u=Ka(s,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function Ka(r,t){return Xn&&r===1&&!t.file?Kn(t.original,"spawn"):null}function Bc(r,t){return Xn&&r===1&&!t.file?Kn(t.original,"spawnSync"):null}Za.exports={hookChildProcess:xc,verifyENOENT:Ka,verifyENOENTSync:Bc,notFoundError:Kn}});var rs=A((qm,dt)=>{"use strict";var es=require("child_process"),Zn=Xa(),Jn=Ja();function ts(r,t,o){let a=Zn(r,t,o),s=es.spawn(a.command,a.args,a.options);return Jn.hookChildProcess(s,a),s}function Oc(r,t,o){let a=Zn(r,t,o),s=es.spawnSync(a.command,a.args,a.options);return s.error=s.error||Jn.verifyENOENTSync(s.status,a),s}dt.exports=ts;dt.exports.spawn=ts;dt.exports.sync=Oc;dt.exports._parse=Zn;dt.exports._enoent=Jn});var os=A((Fm,ns)=>{"use strict";ns.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var ss=A((Dm,Nt)=>{"use strict";var Ut=require("path"),is=Hn(),as=r=>{r={cwd:process.cwd(),path:process.env[is()],execPath:process.execPath,...r};let t,o=Ut.resolve(r.cwd),a=[];for(;t!==o;)a.push(Ut.join(o,"node_modules/.bin")),t=o,o=Ut.resolve(o,"..");let s=Ut.resolve(r.cwd,r.execPath,"..");return a.push(s),a.concat(r.path).join(Ut.delimiter)};Nt.exports=as;Nt.exports.default=as;Nt.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=is({env:t});return r.path=t[o],t[o]=Nt.exports(r),t}});var us=A((Wm,eo)=>{"use strict";var ls=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};eo.exports=ls;eo.exports.default=ls});var fs=A((Lm,Ur)=>{"use strict";var qc=us(),jr=new WeakMap,cs=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,a=0,s=r.displayName||r.name||"<anonymous>",u=function(...f){if(jr.set(u,++a),a===1)o=r.apply(this,f),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return qc(u,r),jr.set(u,a),u};Ur.exports=cs;Ur.exports.default=cs;Ur.exports.callCount=r=>{if(!jr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return jr.get(r)}});var ds=A(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.SIGNALS=void 0;var Fc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Nr.SIGNALS=Fc});var to=A(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.SIGRTMAX=mt.getRealtimeSignals=void 0;var Dc=function(){let r=hs-ms+1;return Array.from({length:r},Wc)};mt.getRealtimeSignals=Dc;var Wc=function(r,t){return{name:`SIGRT${t+1}`,number:ms+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},ms=34,hs=64;mt.SIGRTMAX=hs});var ps=A(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.getSignals=void 0;var Lc=require("os"),$c=ds(),zc=to(),Mc=function(){let r=(0,zc.getRealtimeSignals)();return[...$c.SIGNALS,...r].map(jc)};Gr.getSignals=Mc;var jc=function({name:r,number:t,description:o,action:a,forced:s=!1,standard:u}){let{signals:{[r]:f}}=Lc.constants,p=f!==void 0;return{name:r,number:p?f:t,description:o,supported:p,action:a,forced:s,standard:u}}});var ys=A(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.signalsByNumber=ht.signalsByName=void 0;var Uc=require("os"),bs=ps(),Nc=to(),Gc=function(){return(0,bs.getSignals)().reduce(Hc,{})},Hc=function(r,{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}){return{...r,[t]:{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}}},Vc=Gc();ht.signalsByName=Vc;var Yc=function(){let r=(0,bs.getSignals)(),t=Nc.SIGRTMAX+1,o=Array.from({length:t},(a,s)=>Qc(s,r));return Object.assign({},...o)},Qc=function(r,t){let o=Xc(r,t);if(o===void 0)return{};let{name:a,description:s,supported:u,action:f,forced:p,standard:m}=o;return{[r]:{name:a,number:r,description:s,supported:u,action:f,forced:p,standard:m}}},Xc=function(r,t){let o=t.find(({name:a})=>Uc.constants.signals[a]===r);return o!==void 0?o:t.find(a=>a.number===r)},Kc=Yc();ht.signalsByNumber=Kc});var Ss=A((Um,gs)=>{"use strict";var{signalsByName:Zc}=ys(),Jc=({timedOut:r,timeout:t,errorCode:o,signal:a,signalDescription:s,exitCode:u,isCanceled:f})=>r?`timed out after ${t} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",ef=({stdout:r,stderr:t,all:o,error:a,signal:s,exitCode:u,command:f,escapedCommand:p,timedOut:m,isCanceled:b,killed:_,parsed:{options:{timeout:T}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:Zc[s].description,g=a&&a.code,C=`Command ${Jc({timedOut:m,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:b})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",v=P?`${C}
${a.message}`:C,F=[v,t,r].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=F):a=new Error(F),a.shortMessage=v,a.command=f,a.escapedCommand=p,a.exitCode=u,a.signal=s,a.signalDescription=S,a.stdout=r,a.stderr=t,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=Boolean(m),a.isCanceled=b,a.killed=_&&!m,a};gs.exports=ef});var ws=A((Nm,ro)=>{"use strict";var Hr=["stdin","stdout","stderr"],tf=r=>Hr.some(t=>r[t]!==void 0),_s=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return Hr.map(a=>r[a]);if(tf(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Hr.map(a=>`\`${a}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,Hr.length);return Array.from({length:o},(a,s)=>t[s])};ro.exports=_s;ro.exports.node=r=>{let t=_s(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Rs=A((Gm,Vr)=>{Vr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Vr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Vr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var As=A((Hm,yt)=>{var $=global.process,Ge=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ge($)?(Ts=require("assert"),pt=Rs(),Es=/^win/i.test($.platform),Gt=require("events"),typeof Gt!="function"&&(Gt=Gt.EventEmitter),$.__signal_exit_emitter__?U=$.__signal_exit_emitter__:(U=$.__signal_exit_emitter__=new Gt,U.count=0,U.emitted={}),U.infinite||(U.setMaxListeners(1/0),U.infinite=!0),yt.exports=function(r,t){if(!!Ge(global.process)){Ts.equal(typeof r,"function","a callback must be provided for exit handler"),bt===!1&&no();var o="exit";t&&t.alwaysLast&&(o="afterexit");var a=function(){U.removeListener(o,r),U.listeners("exit").length===0&&U.listeners("afterexit").length===0&&Yr()};return U.on(o,r),a}},Yr=function(){!bt||!Ge(global.process)||(bt=!1,pt.forEach(function(t){try{$.removeListener(t,Qr[t])}catch{}}),$.emit=Xr,$.reallyExit=oo,U.count-=1)},yt.exports.unload=Yr,He=function(t,o,a){U.emitted[t]||(U.emitted[t]=!0,U.emit(t,o,a))},Qr={},pt.forEach(function(r){Qr[r]=function(){if(!!Ge(global.process)){var o=$.listeners(r);o.length===U.count&&(Yr(),He("exit",null,r),He("afterexit",null,r),Es&&r==="SIGHUP"&&(r="SIGINT"),$.kill($.pid,r))}}}),yt.exports.signals=function(){return pt},bt=!1,no=function(){bt||!Ge(global.process)||(bt=!0,U.count+=1,pt=pt.filter(function(t){try{return $.on(t,Qr[t]),!0}catch{return!1}}),$.emit=Ps,$.reallyExit=Cs)},yt.exports.load=no,oo=$.reallyExit,Cs=function(t){!Ge(global.process)||($.exitCode=t||0,He("exit",$.exitCode,null),He("afterexit",$.exitCode,null),oo.call($,$.exitCode))},Xr=$.emit,Ps=function(t,o){if(t==="exit"&&Ge(global.process)){o!==void 0&&($.exitCode=o);var a=Xr.apply(this,arguments);return He("exit",$.exitCode,null),He("afterexit",$.exitCode,null),a}else return Xr.apply(this,arguments)}):yt.exports=function(){};var Ts,pt,Es,Gt,U,Yr,He,Qr,bt,no,oo,Cs,Xr,Ps});var ks=A((Vm,vs)=>{"use strict";var rf=require("os"),nf=As(),of=1e3*5,af=(r,t="SIGTERM",o={})=>{let a=r(t);return sf(r,t,o,a),a},sf=(r,t,o,a)=>{if(!lf(t,o,a))return;let s=cf(o),u=setTimeout(()=>{r("SIGKILL")},s);u.unref&&u.unref()},lf=(r,{forceKillAfterTimeout:t},o)=>uf(r)&&t!==!1&&o,uf=r=>r===rf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",cf=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return of;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},ff=(r,t)=>{r.kill()&&(t.isCanceled=!0)},df=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},mf=(r,{timeout:t,killSignal:o="SIGTERM"},a)=>{if(t===0||t===void 0)return a;let s,u=new Promise((p,m)=>{s=setTimeout(()=>{df(r,o,m)},t)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([u,f])},hf=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},pf=async(r,{cleanup:t,detached:o},a)=>{if(!t||o)return a;let s=nf(()=>{r.kill()});return a.finally(()=>{s()})};vs.exports={spawnedKill:af,spawnedCancel:ff,setupTimeout:mf,validateTimeout:hf,setExitHandler:pf}});var xs=A((Ym,Is)=>{"use strict";var be=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";be.writable=r=>be(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";be.readable=r=>be(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";be.duplex=r=>be.writable(r)&&be.readable(r);be.transform=r=>be.duplex(r)&&typeof r._transform=="function";Is.exports=be});var Os=A((Qm,Bs)=>{"use strict";var{PassThrough:bf}=require("stream");Bs.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,a=o==="buffer",s=!1;t?s=!(o||a):o=o||"utf8",a&&(o=null);let u=new bf({objectMode:s});o&&u.setEncoding(o);let f=0,p=[];return u.on("data",m=>{p.push(m),s?f=p.length:f+=m.length}),u.getBufferedValue=()=>t?p:a?Buffer.concat(p,f):p.join(""),u.getBufferedLength=()=>f,u}});var qs=A((Xm,Ht)=>{"use strict";var{constants:yf}=require("buffer"),gf=require("stream"),{promisify:Sf}=require("util"),_f=Os(),wf=Sf(gf.pipeline),Kr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function io(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,a=_f(t);return await new Promise((s,u)=>{let f=p=>{p&&a.getBufferedLength()<=yf.MAX_LENGTH&&(p.bufferedData=a.getBufferedValue()),u(p)};(async()=>{try{await wf(r,a),s()}catch(p){f(p)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new Kr)})}),a.getBufferedValue()}Ht.exports=io;Ht.exports.buffer=(r,t)=>io(r,{...t,encoding:"buffer"});Ht.exports.array=(r,t)=>io(r,{...t,array:!0});Ht.exports.MaxBufferError=Kr});var Ds=A((Km,Fs)=>{"use strict";var{PassThrough:Rf}=require("stream");Fs.exports=function(){var r=[],t=new Rf({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=a,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",s.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function a(){return r.length==0}function s(u){r=r.filter(function(f){return f!==u}),!r.length&&t.readable&&t.end()}}});var zs=A((Zm,$s)=>{"use strict";var Ls=xs(),Ws=qs(),Tf=Ds(),Ef=(r,t)=>{t===void 0||r.stdin===void 0||(Ls(t)?t.pipe(r.stdin):r.stdin.end(t))},Cf=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=Tf();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},ao=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},so=(r,{encoding:t,buffer:o,maxBuffer:a})=>{if(!(!r||!o))return t?Ws(r,{encoding:t,maxBuffer:a}):Ws.buffer(r,{maxBuffer:a})},Pf=async({stdout:r,stderr:t,all:o},{encoding:a,buffer:s,maxBuffer:u},f)=>{let p=so(r,{encoding:a,buffer:s,maxBuffer:u}),m=so(t,{encoding:a,buffer:s,maxBuffer:u}),b=so(o,{encoding:a,buffer:s,maxBuffer:u*2});try{return await Promise.all([f,p,m,b])}catch(_){return Promise.all([{error:_,signal:_.signal,timedOut:_.timedOut},ao(r,p),ao(t,m),ao(o,b)])}},Af=({input:r})=>{if(Ls(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};$s.exports={handleInput:Ef,makeAllStream:Cf,getSpawnedResult:Pf,validateInputSync:Af}});var js=A((Jm,Ms)=>{"use strict";var vf=(async()=>{})().constructor.prototype,kf=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(vf,r)]),If=(r,t)=>{for(let[o,a]of kf){let s=typeof t=="function"?(...u)=>Reflect.apply(a.value,t(),u):a.value.bind(t);Reflect.defineProperty(r,o,{...a,value:s})}return r},xf=r=>new Promise((t,o)=>{r.on("exit",(a,s)=>{t({exitCode:a,signal:s})}),r.on("error",a=>{o(a)}),r.stdin&&r.stdin.on("error",a=>{o(a)})});Ms.exports={mergePromise:If,getSpawnedPromise:xf}});var Gs=A((eh,Ns)=>{"use strict";var Us=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Bf=/^[\w.-]+$/,Of=/"/g,qf=r=>typeof r!="string"||Bf.test(r)?r:`"${r.replace(Of,'\\"')}"`,Ff=(r,t)=>Us(r,t).join(" "),Df=(r,t)=>Us(r,t).map(o=>qf(o)).join(" "),Wf=/ +/g,Lf=r=>{let t=[];for(let o of r.trim().split(Wf)){let a=t[t.length-1];a&&a.endsWith("\\")?t[t.length-1]=`${a.slice(0,-1)} ${o}`:t.push(o)}return t};Ns.exports={joinCommand:Ff,getEscapedCommand:Df,parseCommand:Lf}});var Zs=A((th,gt)=>{"use strict";var $f=require("path"),lo=require("child_process"),zf=rs(),Mf=os(),jf=ss(),Uf=fs(),Zr=Ss(),Vs=ws(),{spawnedKill:Nf,spawnedCancel:Gf,setupTimeout:Hf,validateTimeout:Vf,setExitHandler:Yf}=ks(),{handleInput:Qf,getSpawnedResult:Xf,makeAllStream:Kf,validateInputSync:Zf}=zs(),{mergePromise:Hs,getSpawnedPromise:Jf}=js(),{joinCommand:Ys,parseCommand:Qs,getEscapedCommand:Xs}=Gs(),ed=1e3*1e3*100,td=({env:r,extendEnv:t,preferLocal:o,localDir:a,execPath:s})=>{let u=t?{...process.env,...r}:r;return o?jf.env({env:u,cwd:a,execPath:s}):u},Ks=(r,t,o={})=>{let a=zf._parse(r,t,o);return r=a.command,t=a.args,o=a.options,o={maxBuffer:ed,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=td(o),o.stdio=Vs(o),process.platform==="win32"&&$f.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:a}},Vt=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Mf(t):t,Jr=(r,t,o)=>{let a=Ks(r,t,o),s=Ys(r,t),u=Xs(r,t);Vf(a.options);let f;try{f=lo.spawn(a.file,a.args,a.options)}catch(g){let y=new lo.ChildProcess,C=Promise.reject(Zr({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return Hs(y,C)}let p=Jf(f),m=Hf(f,a.options,p),b=Yf(f,a.options,m),_={isCanceled:!1};f.kill=Nf.bind(null,f.kill.bind(f)),f.cancel=Gf.bind(null,f,_);let S=Uf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,F,G]=await Xf(f,a.options,b),I=Vt(a.options,v),z=Vt(a.options,F),B=Vt(a.options,G);if(g||y!==0||C!==null){let ie=Zr({error:g,exitCode:y,signal:C,stdout:I,stderr:z,all:B,command:s,escapedCommand:u,parsed:a,timedOut:P,isCanceled:_.isCanceled,killed:f.killed});if(!a.options.reject)return ie;throw ie}return{command:s,escapedCommand:u,exitCode:0,stdout:I,stderr:z,all:B,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Qf(f,a.options.input),f.all=Kf(f,a.options),Hs(f,S)};gt.exports=Jr;gt.exports.sync=(r,t,o)=>{let a=Ks(r,t,o),s=Ys(r,t),u=Xs(r,t);Zf(a.options);let f;try{f=lo.spawnSync(a.file,a.args,a.options)}catch(b){throw Zr({error:b,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let p=Vt(a.options,f.stdout,f.error),m=Vt(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let b=Zr({stdout:p,stderr:m,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:u,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return b;throw b}return{command:s,escapedCommand:u,exitCode:0,stdout:p,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};gt.exports.command=(r,t)=>{let[o,...a]=Qs(r);return Jr(o,a,t)};gt.exports.commandSync=(r,t)=>{let[o,...a]=Qs(r);return Jr.sync(o,a,t)};gt.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let a=Vs.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:f=s}=o;return Jr(u,[...f,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1})}});var ld={};Ai(ld,{default:()=>sd});module.exports=Lu(ld);var tn=require("@raycast/api");var it=require("@raycast/api"),ki=require("path"),Ii=require("os"),xi=(0,it.getPreferenceValues)(),Bi=()=>{let{gridItemSize:r}=xi;return r=="small"?it.Grid.ItemSize.Small:r=="large"?it.Grid.ItemSize.Large:it.Grid.ItemSize.Medium},Oi=()=>xi.showImageTitle,qi=r=>r.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),Fi=r=>r[0]==="~"?(0,ki.join)((0,Ii.homedir)(),r.slice(1)):r;var pe=require("@raycast/api"),ct=require("react");var ma=ce(require("node:http"),1),ha=ce(require("node:https"),1),Ne=ce(require("node:zlib"),1),re=ce(require("node:stream"),1),jt=require("node:buffer");function $u(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),a="",s=!1,u=o[0]||"text/plain",f=u;for(let _=1;_<o.length;_++)o[_]==="base64"?s=!0:(f+=`;${o[_]}`,o[_].indexOf("charset=")===0&&(a=o[_].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let p=s?"base64":"ascii",m=unescape(r.substring(t+1)),b=Buffer.from(m,p);return b.type=u,b.typeFull=f,b.charset=a,b}var Di=$u;var oe=ce(require("node:stream"),1),Ee=require("node:util"),te=require("node:buffer");Dt();Ir();var Te=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var X=class extends Te{constructor(t,o,a){super(t,o),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var xr=Symbol.toStringTag,$n=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[xr]==="URLSearchParams",Lt=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[xr]),Gi=r=>typeof r=="object"&&(r[xr]==="AbortSignal"||r[xr]==="EventTarget"),Hi=(r,t)=>{let o=new URL(t).hostname,a=new URL(r).hostname;return o===a||o.endsWith(`.${a}`)};var ec=(0,Ee.promisify)(oe.default.pipeline),K=Symbol("Body internals"),he=class{constructor(t,{size:o=0}={}){let a=null;t===null?t=null:$n(t)?t=te.Buffer.from(t.toString()):Lt(t)||te.Buffer.isBuffer(t)||(Ee.types.isAnyArrayBuffer(t)?t=te.Buffer.from(t):ArrayBuffer.isView(t)?t=te.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof oe.default||(t instanceof je?(t=Ni(t),a=t.type.split("=")[1]):t=te.Buffer.from(String(t))));let s=t;te.Buffer.isBuffer(t)?s=oe.default.Readable.from(t):Lt(t)&&(s=oe.default.Readable.from(t.stream())),this[K]={body:t,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,t instanceof oe.default&&t.on("error",u=>{let f=u instanceof Te?u:new X(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[K].error=f})}get body(){return this[K].stream}get bodyUsed(){return this[K].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:a}=await Fr(this);return t.slice(o,o+a)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let a=new je,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(Zi(),Ki));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[K].body&&this[K].body.type||"",o=await this.arrayBuffer();return new Re([o],{type:t})}async json(){let t=await Fr(this);return JSON.parse(t.toString())}async text(){return(await Fr(this)).toString()}buffer(){return Fr(this)}};he.prototype.buffer=(0,Ee.deprecate)(he.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(he.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ee.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Fr(r){if(r[K].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[K].disturbed=!0,r[K].error)throw r[K].error;let{body:t}=r;if(t===null)return te.Buffer.alloc(0);if(!(t instanceof oe.default))return te.Buffer.alloc(0);let o=[],a=0;try{for await(let s of t){if(r.size>0&&a+s.length>r.size){let u=new X(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}a+=s.length,o.push(s)}}catch(s){throw s instanceof Te?s:new X(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?te.Buffer.from(o.join("")):te.Buffer.concat(o,a)}catch(s){throw new X(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new X(`Premature close of server response while trying to fetch ${r.url}`)}var st=(r,t)=>{let o,a,{body:s}=r[K];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof oe.default&&typeof s.getBoundary!="function"&&(o=new oe.PassThrough({highWaterMark:t}),a=new oe.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(a),r[K].stream=o,s=a),s},tc=(0,Ee.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Dr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":$n(r)?"application/x-www-form-urlencoded;charset=UTF-8":Lt(r)?r.type||null:te.Buffer.isBuffer(r)||Ee.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof je?`multipart/form-data; boundary=${t[K].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${tc(r)}`:r instanceof oe.default?null:"text/plain;charset=UTF-8",Ji=r=>{let{body:t}=r[K];return t===null?0:Lt(t)?t.size:te.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},ea=async(r,{body:t})=>{t===null?r.end():await ec(t,r)};var jn=require("node:util"),Mt=ce(require("node:http"),1),Wr=typeof Mt.default.validateHeaderName=="function"?Mt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Un=typeof Mt.default.validateHeaderValue=="function"?Mt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Z=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof Z){let a=t.raw();for(let[s,u]of Object.entries(a))o.push(...u.map(f=>[s,f]))}else if(t!=null)if(typeof t=="object"&&!jn.types.isBoxedPrimitive(t)){let a=t[Symbol.iterator];if(a==null)o.push(...Object.entries(t));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||jn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([a,s])=>(Wr(a),Un(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,p)=>(Wr(f),Un(f,String(p)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(Wr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(t)&&(a=a.toLowerCase()),a}forEach(t,o=void 0){for(let a of this.keys())Reflect.apply(t,o,[this.get(a),a,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let a=this.getAll(o);return o==="host"?t[o]=a[0]:t[o]=a.length>1?a:a[0],t},{})}};Object.defineProperties(Z.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function ta(r=[]){return new Z(r.reduce((t,o,a,s)=>(a%2===0&&t.push(s.slice(a,a+2)),t),[]).filter(([t,o])=>{try{return Wr(t),Un(t,String(o)),!0}catch{return!1}}))}var rc=new Set([301,302,303,307,308]),Lr=r=>rc.has(r);var fe=Symbol("Response internals"),H=class extends he{constructor(t=null,o={}){super(t,o);let a=o.status!=null?o.status:200,s=new Z(o.headers);if(t!==null&&!s.has("Content-Type")){let u=Dr(t,this);u&&s.append("Content-Type",u)}this[fe]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[fe].type}get url(){return this[fe].url||""}get status(){return this[fe].status}get ok(){return this[fe].status>=200&&this[fe].status<300}get redirected(){return this[fe].counter>0}get statusText(){return this[fe].statusText}get headers(){return this[fe].headers}get highWaterMark(){return this[fe].highWaterMark}clone(){return new H(st(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Lr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new H(null,{status:0,statusText:""});return t[fe].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ca=require("node:url"),fa=require("node:util");var ra=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var oa=require("node:net");function na(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ia=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),aa="strict-origin-when-cross-origin";function sa(r){if(!ia.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function nc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,oa.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function lt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:nc(r)}function la(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let a=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=na(s),f=na(s,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),o&&(f=o(f));let p=new URL(r.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return lt(u)&&!lt(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===p.origin?u:lt(u)&&!lt(p)?"no-referrer":f;case"same-origin":return u.origin===p.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===p.origin?u:f;case"no-referrer-when-downgrade":return lt(u)&&!lt(p)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function ua(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of t)a&&ia.has(a)&&(o=a);return o}var j=Symbol("Request internals"),$r=r=>typeof r=="object"&&typeof r[j]=="object",oc=(0,fa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ce=class extends he{constructor(t,o={}){let a;if($r(t)?a=new URL(t.url):(a=new URL(t),t={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentails.`);let s=o.method||t.method||"GET";if(s=s.toUpperCase(),"data"in o&&oc(),(o.body!=null||$r(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:$r(t)&&t.body!==null?st(t):null;super(u,{size:o.size||t.size||0});let f=new Z(o.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let b=Dr(u,this);b&&f.set("Content-Type",b)}let p=$r(t)?t.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!Gi(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?t.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let b=new URL(m);m=/^about:(\/\/)?client$/.test(b)?"client":b}else m=void 0;this[j]={method:s,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:a,signal:p,referrer:m},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,ca.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=sa(t)}clone(){return new Ce(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ce.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var da=r=>{let{parsedURL:t}=r[j],o=new Z(r[j].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(a="0"),r.body!==null){let p=Ji(r);typeof p=="number"&&!Number.isNaN(p)&&(a=String(p))}a&&o.set("Content-Length",a),r.referrerPolicy===""&&(r.referrerPolicy=aa),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=la(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=ra(t),f={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:f}};var ut=class extends Te{constructor(t,o="aborted"){super(t,o)}};Ir();zn();var ic=new Set(["data:","http:","https:"]);async function zr(r,t){return new Promise((o,a)=>{let s=new Ce(r,t),{parsedURL:u,options:f}=da(s);if(!ic.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=Di(s.url),C=new H(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(u.protocol==="https:"?ha.default:ma.default).request,{signal:m}=s,b=null,_=()=>{let y=new ut("The operation was aborted.");a(y),s.body&&s.body instanceof re.default.Readable&&s.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(m&&m.aborted){_();return}let T=()=>{_(),g()},S=p(u.toString(),f);m&&m.addEventListener("abort",T);let g=()=>{S.abort(),m&&m.removeEventListener("abort",T)};S.on("error",y=>{a(new X(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),ac(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=ta(y.rawHeaders);if(Lr(y.statusCode)){let I=C.get("Location"),z=null;try{z=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){a(new X(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":a(new X(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(z===null)break;if(s.counter>=s.follow){a(new X(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let B={headers:new Z(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:st(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Hi(s.url,z))for(let J of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(J);if(y.statusCode!==303&&s.body&&t.body instanceof re.default.Readable){a(new X("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let ie=ua(C);ie&&(B.referrerPolicy=ie),o(zr(new Ce(z,B))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&y.once("end",()=>{m.removeEventListener("abort",T)});let P=(0,re.pipeline)(y,new re.PassThrough,I=>{I&&a(I)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},F=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||F===null||y.statusCode===204||y.statusCode===304){b=new H(P,v),o(b);return}let G={flush:Ne.default.Z_SYNC_FLUSH,finishFlush:Ne.default.Z_SYNC_FLUSH};if(F==="gzip"||F==="x-gzip"){P=(0,re.pipeline)(P,Ne.default.createGunzip(G),I=>{I&&a(I)}),b=new H(P,v),o(b);return}if(F==="deflate"||F==="x-deflate"){let I=(0,re.pipeline)(y,new re.PassThrough,z=>{z&&a(z)});I.once("data",z=>{(z[0]&15)===8?P=(0,re.pipeline)(P,Ne.default.createInflate(),B=>{B&&a(B)}):P=(0,re.pipeline)(P,Ne.default.createInflateRaw(),B=>{B&&a(B)}),b=new H(P,v),o(b)}),I.once("end",()=>{b||(b=new H(P,v),o(b))});return}if(F==="br"){P=(0,re.pipeline)(P,Ne.default.createBrotliDecompress(),I=>{I&&a(I)}),b=new H(P,v),o(b);return}b=new H(P,v),o(b)}),ea(S,s).catch(a)})}function ac(r,t){let o=jt.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;r.on("response",f=>{let{headers:p}=f;a=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),r.on("socket",f=>{let p=()=>{if(a&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}};f.prependListener("close",p),r.on("abort",()=>{f.removeListener("close",p)}),f.on("data",m=>{s=jt.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=jt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&jt.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var pa=r=>{let{accessKey:t,orientation:o}=(0,pe.getPreferenceValues)(),[a,s]=(0,ct.useState)({results:[],isLoading:!0}),u=(0,ct.useRef)(null);try{if(!t)throw new Error("Missing API key.");(0,ct.useEffect)(()=>(f(""),()=>{u.current?.abort()}),[]);let f=async p=>{u.current?.abort(),u.current=new AbortController;try{if(p===""){s(_=>({..._,isLoading:!1}));return}s(_=>({..._,isLoading:!0}));let{errors:m,results:b}=await sc({accessKey:t,signal:u.current?.signal,searchText:p,options:{orientation:o,type:r||"photos"}});m?.length&&(0,pe.showToast)(pe.Toast.Style.Failure,`Failed to fetch ${r}.`,m?.join(`
`)),s(_=>({..._,isLoading:!1,results:b||[]}))}catch(m){if(m instanceof ut)return;(0,pe.showToast)(pe.Toast.Style.Failure,"Could not perform search",String(m))}};return{state:a,search:f}}catch(f){console.error(f);let p={search:()=>({}),state:{results:[],isLoading:!1}};return(0,pe.showToast)(pe.Toast.Style.Failure,"Something went wrong",String(f)),p}},sc=async({searchText:r,options:t,accessKey:o,signal:a})=>{let s=new URLSearchParams({page:"1",query:r,per_page:"30"});t.orientation!=="all"&&s.append("orientation",t.orientation);let{errors:u,results:f}=await zr(`https://api.unsplash.com/search/${t.type}?${s.toString()}`,{method:"GET",signal:a,headers:{Authorization:`Client-ID ${o}`}}).then(p=>p.json());return{results:f,errors:u}};var D=require("@raycast/api");var Yt=require("@raycast/api");var Js=ce(require("node:process"),1),el=ce(Zs(),1);async function St(r){if(Js.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,el.default)("osascript",["-e",r]);return t}var tl=async({url:r,id:t})=>{let{downloadSize:o}=(0,Yt.getPreferenceValues)();try{await(0,Yt.showHUD)("Please select a location to save the image..."),await St(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${t}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd
    `)}catch(a){console.error(a),await(0,Yt.showHUD)("Couldn't save the image...")}};var V=require("@raycast/api");var uo=require("fs");var rl=async({url:r,id:t,useHud:o=!1,isBackground:a=!1})=>{let{downloadSize:s,applyTo:u,wallpaperPath:f}=(0,V.getPreferenceValues)(),p=Fi(f||V.environment.supportPath),m;if((0,uo.existsSync)(p)){let _="Downloading and setting wallpaper...";o?!a&&await(0,V.showHUD)(_):m=await(0,V.showToast)(V.Toast.Style.Animated,_)}else{let _="The selected path does not exist. Please select a valid path.";await(o?(0,V.showHUD)(_):(0,V.showToast)(V.Toast.Style.Animated,_));return}let b=p.endsWith("/")?`${p}${t}-${s}.jpg`:`${p}/${t}-${s}.jpg`;try{let _=b,T=(0,uo.existsSync)(_)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;if(await St(`
      set temp_folder to (POSIX path of "${_}")
      set q_temp_folder to quoted form of temp_folder

      ${T}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${u} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return o?!a&&await(0,V.showHUD)("Wallpaper set!"):m&&(m.style=V.Toast.Style.Success,m.title="Wallpaper set!"),!0}catch(_){return console.error(_),m&&(m.style=V.Toast.Style.Failure,m.title="Something went wrong.",m.message="Try with another image or check your internet connection."),!1}};var qe=require("@raycast/api");var nl=require("fs"),ol=async({url:r,id:t})=>{let o=await(0,qe.showToast)(qe.Toast.Style.Animated,"Downloading and copying image..."),a=qe.environment.supportPath,s=a.endsWith("/")?`${a}${t}.jpg`:`${a}/${t}.jpg`;try{let u=s,f=(0,nl.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;await St(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${f}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=qe.Toast.Style.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=qe.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var al=require("@raycast/api");var il=require("react/jsx-runtime"),rd=({result:r})=>{let t=r.urls?.regular||r.urls?.small||r.urls?.thumb,o=r.created_at?new Date(r.created_at).toLocaleString():"Unknown",a=[r.description&&`# ${r.description}`,r.user?.name&&`**Photo by [${r.user.name}](${r.user.links.html})**`,t&&`![image](${t})`,r.alt_description&&`**Description**: ${r.alt_description}`,r.created_at&&`**Uploaded On**: ${o}`,r.likes&&`**Likes**: ${r.likes}`,r.width&&r.height&&`**Ratio**: ${r.width}x${r.height}`];return(0,il.jsx)(al.Detail,{markdown:a.filter(s=>s).map(s=>s+`
`).join(`
`),navigationTitle:r.user?.name,actions:(0,il.jsx)(en,{item:r})})},sl=rd;var co=ce(require("react")),N=require("react/jsx-runtime"),nd=({details:r=!1,item:t})=>(0,N.jsx)(D.ActionPanel,{children:(0,N.jsx)(od,{details:r,item:t})}),od=({details:r=!1,item:t})=>{let{push:o}=(0,D.useNavigation)(),{downloadSize:a}=(0,D.getPreferenceValues)(),s=t.urls?.raw||t.urls?.full||t.urls?.regular||t.urls?.small,u={url:t.urls?.[a]||s,id:`${t.id}-${a}`};return(0,N.jsxs)(co.default.Fragment,{children:[(0,N.jsxs)(D.ActionPanel.Section,{children:[r&&(0,N.jsx)(D.Action,{title:"Show Details",icon:D.Icon.List,onAction:()=>o((0,N.jsx)(sl,{result:t}))}),t.links?.html&&(0,N.jsx)(D.Action.OpenInBrowser,{url:t.links.html,title:"Open Original"}),t.user?.links?.html&&(0,N.jsx)(D.Action.OpenInBrowser,{url:t.user.links.html,icon:D.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})]}),(0,N.jsx)(D.ActionPanel.Section,{title:"Image",children:s&&(0,N.jsxs)(co.default.Fragment,{children:[(0,N.jsx)(D.Action,{title:"Copy to Clipboard",icon:D.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>ol(u)}),(0,N.jsx)(D.Action,{title:"Set as Desktop Wallpaper",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>rl({url:s,id:String(t.id)})}),(0,N.jsx)(D.Action,{title:"Download Image",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>tl({url:s,id:String(t.id)})})]})}),(0,N.jsxs)(D.ActionPanel.Section,{title:"Links",children:[t.links?.html&&(0,N.jsx)(D.Action.CopyToClipboard,{content:t.links.html,title:"Copy URL to Clipboard",icon:D.Icon.Clipboard}),s&&(0,N.jsx)(D.Action.CopyToClipboard,{content:s,title:"Copy Image URL to Clipboard",icon:D.Icon.Clipboard}),t.user?.links?.html&&(0,N.jsx)(D.Action.CopyToClipboard,{content:t.user.links.html,title:"Copy Author URL to Clipboard",icon:D.Icon.Clipboard})]})]})},en=nd;var Qt=require("react/jsx-runtime"),id=()=>{let{state:r,search:t}=pa("photos"),o=Bi();return(0,Qt.jsx)(tn.Grid,{isLoading:r.isLoading,itemSize:o,onSearchTextChange:t,searchBarPlaceholder:"Search wallpapers...",throttle:!0,children:(0,Qt.jsx)(tn.Grid.Section,{title:"Results",subtitle:String(r?.results?.length),children:r.results.map(a=>(0,Qt.jsx)(ad,{searchResult:a},a.id))})})},ad=({searchResult:r})=>{let[t,o,a,s]=[r.description||r.alt_description||r.user.name||"No Name",r.description?r.alt_description:void 0,r.urls?.thumb||r.urls?.small||r.urls?.regular,r?.user?.profile_image?.small],u=Oi()?qi(t):"";return(0,Qt.jsx)(tn.Grid.Item,{content:a,title:u,actions:(0,Qt.jsx)(en,{item:r,details:!0})})},sd=id;0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
